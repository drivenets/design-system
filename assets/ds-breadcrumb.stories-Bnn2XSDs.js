import{j as v}from"./jsx-runtime-u17CrQMm.js";import{r as b,a as Mt,e as $n}from"./iframe-B1gKZKuc.js";import{r as Gn}from"./index-CziOPQvZ.js";import{r as zn}from"./index-DOIMq0Xz.js";import{c as Ke}from"./index-CI5Pb9HH.js";import{D as At}from"./ds-icon-DIuKbzlJ.js";import{a as ut}from"./ds-dropdown-menu-B3iEF_rC.js";import{D as Kn}from"./ds-text-input-C8rTfu1S.js";import{D as qn}from"./ds-typography-BbSFr2sw.js";import"./preload-helper-PPVm8Dsz.js";import"./index-CcgyKgzY.js";import"./index-CrebszRC.js";import"./index-BhARklHb.js";import"./index-BBSc6elT.js";import"./Combination-FapkOjAp.js";import"./index-BQu11pnq.js";import"./floating-ui.dom-BjS6HMTz.js";import"./index-D5ZZ1tXY.js";import"./index-C2B67tLG.js";import"./portal-CQe6VJ_y.js";import"./create-split-props-u5h9OPvL.js";import"./index-1kKNXetD.js";import"./use-locale-context-DyIBVjNs.js";import"./use-presence-C-RUHWbh.js";import"./index-BXFvYyHV.js";import"./index-Bs81qYQ6.js";import"./index-HtJxfs_E.js";const ft=new WeakMap,Wt=new WeakMap,Kt={current:[]};let ae=!1,It=0;const Lt=new Set,jt=new Map;function pn(t){const n=Array.from(t).sort((e,o)=>e instanceof pt&&e.options.deps.includes(o)?1:o instanceof pt&&o.options.deps.includes(e)?-1:0);for(const e of n){if(Kt.current.includes(e))continue;Kt.current.push(e),e.recompute();const o=Wt.get(e);if(o)for(const s of o){const r=ft.get(s);r&&pn(r)}}}function Yn(t){const n={prevVal:t.prevState,currentVal:t.state};for(const e of t.listeners)e(n)}function Jn(t){const n={prevVal:t.prevState,currentVal:t.state};for(const e of t.listeners)e(n)}function mn(t){if(It>0&&!jt.has(t)&&jt.set(t,t.prevState),Lt.add(t),!(It>0)&&!ae)try{for(ae=!0;Lt.size>0;){const n=Array.from(Lt);Lt.clear();for(const e of n){const o=jt.get(e)??e.prevState;e.prevState=o,Yn(e)}for(const e of n){const o=ft.get(e);o&&(Kt.current.push(e),pn(o))}for(const e of n){const o=ft.get(e);if(o)for(const s of o)Jn(s)}}}finally{ae=!1,Kt.current=[],jt.clear()}}function Xn(t){It++;try{t()}finally{if(It--,It===0){const n=Lt.values().next().value;n&&mn(n)}}}function Qn(t){return typeof t=="function"}class we{constructor(n,e){this.listeners=new Set,this.subscribe=o=>{var s,r;this.listeners.add(o);const i=(r=(s=this.options)==null?void 0:s.onSubscribe)==null?void 0:r.call(s,o,this);return()=>{this.listeners.delete(o),i?.()}},this.prevState=n,this.state=n,this.options=e}setState(n){var e,o,s;this.prevState=this.state,(e=this.options)!=null&&e.updateFn?this.state=this.options.updateFn(this.prevState)(n):Qn(n)?this.state=n(this.prevState):this.state=n,(s=(o=this.options)==null?void 0:o.onUpdate)==null||s.call(o),mn(this)}}class pt{constructor(n){this.listeners=new Set,this._subscriptions=[],this.lastSeenDepValues=[],this.getDepVals=()=>{const e=this.options.deps.length,o=new Array(e),s=new Array(e);for(let r=0;r<e;r++){const i=this.options.deps[r];o[r]=i.prevState,s[r]=i.state}return this.lastSeenDepValues=s,{prevDepVals:o,currDepVals:s,prevVal:this.prevState??void 0}},this.recompute=()=>{var e,o;this.prevState=this.state;const s=this.getDepVals();this.state=this.options.fn(s),(o=(e=this.options).onUpdate)==null||o.call(e)},this.checkIfRecalculationNeededDeeply=()=>{for(const r of this.options.deps)r instanceof pt&&r.checkIfRecalculationNeededDeeply();let e=!1;const o=this.lastSeenDepValues,{currDepVals:s}=this.getDepVals();for(let r=0;r<s.length;r++)if(s[r]!==o[r]){e=!0;break}e&&this.recompute()},this.mount=()=>(this.registerOnGraph(),this.checkIfRecalculationNeededDeeply(),()=>{this.unregisterFromGraph();for(const e of this._subscriptions)e()}),this.subscribe=e=>{var o,s;this.listeners.add(e);const r=(s=(o=this.options).onSubscribe)==null?void 0:s.call(o,e,this);return()=>{this.listeners.delete(e),r?.()}},this.options=n,this.state=n.fn({prevDepVals:void 0,prevVal:void 0,currDepVals:this.getDepVals().currDepVals})}registerOnGraph(n=this.options.deps){for(const e of n)if(e instanceof pt)e.registerOnGraph(),this.registerOnGraph(e.options.deps);else if(e instanceof we){let o=ft.get(e);o||(o=new Set,ft.set(e,o)),o.add(this);let s=Wt.get(this);s||(s=new Set,Wt.set(this,s)),s.add(e)}}unregisterFromGraph(n=this.options.deps){for(const e of n)if(e instanceof pt)this.unregisterFromGraph(e.options.deps);else if(e instanceof we){const o=ft.get(e);o&&o.delete(this);const s=Wt.get(this);s&&s.delete(e)}}}const tt="__TSR_index",qe="popstate",Ye="beforeunload";function gn(t){let n=t.getLocation();const e=new Set,o=i=>{n=t.getLocation(),e.forEach(a=>a({location:n,action:i}))},s=i=>{t.notifyOnIndexChange??!0?o(i):n=t.getLocation()},r=async({task:i,navigateOpts:a,...c})=>{if(a?.ignoreBlocker??!1){i();return}const u=t.getBlockers?.()??[],f=c.type==="PUSH"||c.type==="REPLACE";if(typeof document<"u"&&u.length&&f)for(const h of u){const d=Tt(c.path,c.state);if(await h.blockerFn({currentLocation:n,nextLocation:d,action:c.type})){t.onBlocked?.();return}}i()};return{get location(){return n},get length(){return t.getLength()},subscribers:e,subscribe:i=>(e.add(i),()=>{e.delete(i)}),push:(i,a,c)=>{const l=n.state[tt];a=Se(l+1,a),r({task:()=>{t.pushState(i,a),o({type:"PUSH"})},navigateOpts:c,type:"PUSH",path:i,state:a})},replace:(i,a,c)=>{const l=n.state[tt];a=Se(l,a),r({task:()=>{t.replaceState(i,a),o({type:"REPLACE"})},navigateOpts:c,type:"REPLACE",path:i,state:a})},go:(i,a)=>{r({task:()=>{t.go(i),s({type:"GO",index:i})},navigateOpts:a,type:"GO"})},back:i=>{r({task:()=>{t.back(i?.ignoreBlocker??!1),s({type:"BACK"})},navigateOpts:i,type:"BACK"})},forward:i=>{r({task:()=>{t.forward(i?.ignoreBlocker??!1),s({type:"FORWARD"})},navigateOpts:i,type:"FORWARD"})},canGoBack:()=>n.state[tt]!==0,createHref:i=>t.createHref(i),block:i=>{if(!t.setBlockers)return()=>{};const a=t.getBlockers?.()??[];return t.setBlockers([...a,i]),()=>{const c=t.getBlockers?.()??[];t.setBlockers?.(c.filter(l=>l!==i))}},flush:()=>t.flush?.(),destroy:()=>t.destroy?.(),notify:o}}function Se(t,n){n||(n={});const e=_e();return{...n,key:e,__TSR_key:e,[tt]:t}}function Zn(t){const n=typeof document<"u"?window:void 0,e=n.history.pushState,o=n.history.replaceState;let s=[];const r=()=>s,i=w=>s=w,a=(w=>w),c=(()=>Tt(`${n.location.pathname}${n.location.search}${n.location.hash}`,n.history.state));if(!n.history.state?.__TSR_key&&!n.history.state?.key){const w=_e();n.history.replaceState({[tt]:0,key:w,__TSR_key:w},"")}let l=c(),u,f=!1,h=!1,d=!1,p=!1;const m=()=>l;let g,S;const P=()=>{g&&(_._ignoreSubscribers=!0,(g.isPush?n.history.pushState:n.history.replaceState)(g.state,"",g.href),_._ignoreSubscribers=!1,g=void 0,S=void 0,u=void 0)},R=(w,x,I)=>{const C=a(x);S||(u=l),l=Tt(x,I),g={href:C,state:I,isPush:g?.isPush||w==="push"},S||(S=Promise.resolve().then(()=>P()))},y=w=>{l=c(),_.notify({type:w})},L=async()=>{if(h){h=!1;return}const w=c(),x=w.state[tt]-l.state[tt],I=x===1,C=x===-1,M=!I&&!C||f;f=!1;const E=M?"GO":C?"BACK":"FORWARD",T=M?{type:"GO",index:x}:{type:C?"BACK":"FORWARD"};if(d)d=!1;else{const J=r();if(typeof document<"u"&&J.length){for(const W of J)if(await W.blockerFn({currentLocation:l,nextLocation:w,action:E})){h=!0,n.history.go(1),_.notify(T);return}}}l=c(),_.notify(T)},k=w=>{if(p){p=!1;return}let x=!1;const I=r();if(typeof document<"u"&&I.length)for(const C of I){const M=C.enableBeforeUnload??!0;if(M===!0){x=!0;break}if(typeof M=="function"&&M()===!0){x=!0;break}}if(x)return w.preventDefault(),w.returnValue=""},_=gn({getLocation:m,getLength:()=>n.history.length,pushState:(w,x)=>R("push",w,x),replaceState:(w,x)=>R("replace",w,x),back:w=>(w&&(d=!0),p=!0,n.history.back()),forward:w=>{w&&(d=!0),p=!0,n.history.forward()},go:w=>{f=!0,n.history.go(w)},createHref:w=>a(w),flush:P,destroy:()=>{n.history.pushState=e,n.history.replaceState=o,n.removeEventListener(Ye,k,{capture:!0}),n.removeEventListener(qe,L)},onBlocked:()=>{u&&l!==u&&(l=u)},getBlockers:r,setBlockers:i,notifyOnIndexChange:!1});return n.addEventListener(Ye,k,{capture:!0}),n.addEventListener(qe,L),n.history.pushState=function(...w){const x=e.apply(n.history,w);return _._ignoreSubscribers||y("PUSH"),x},n.history.replaceState=function(...w){const x=o.apply(n.history,w);return _._ignoreSubscribers||y("REPLACE"),x},_}function to(t={initialEntries:["/"]}){const n=t.initialEntries;let e=t.initialIndex?Math.min(Math.max(t.initialIndex,0),n.length-1):n.length-1;const o=n.map((c,l)=>Se(l,void 0)),s=()=>Tt(n[e],o[e]);let r=[];return gn({getLocation:s,getLength:()=>n.length,pushState:(c,l)=>{e<n.length-1&&(n.splice(e+1),o.splice(e+1)),o.push(l),n.push(c),e=Math.max(n.length-1,0)},replaceState:(c,l)=>{o[e]=l,n[e]=c},back:()=>{e=Math.max(e-1,0)},forward:()=>{e=Math.min(e+1,n.length-1)},go:c=>{e=Math.min(Math.max(e+c,0),n.length-1)},createHref:c=>c,getBlockers:()=>r,setBlockers:c=>r=c})}function eo(t){let n=t.replace(/[\x00-\x1f\x7f]/g,"");return n.startsWith("//")&&(n="/"+n.replace(/^\/+/,"")),n}function Tt(t,n){const e=eo(t),o=e.indexOf("#"),s=e.indexOf("?"),r=_e();return{href:e,pathname:e.substring(0,o>0?s>0?Math.min(o,s):o:s>0?s:e.length),hash:o>-1?e.substring(o):"",search:s>-1?e.slice(s,o===-1?void 0:o):"",state:n||{[tt]:0,key:r,__TSR_key:r}}}function _e(){return(Math.random()+1).toString(36).substring(7)}const no=!1;function Ct(t){let n;return Xn(()=>{n=t()}),n}function Et(t){return t[t.length-1]}function oo(t){return typeof t=="function"}function Q(t,n){return oo(t)?t(n):t}const so=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;function D(t,n,e=0){if(t===n)return t;if(e>500)return n;const o=n,s=Ze(t)&&Ze(o);if(!s&&!(qt(t)&&qt(o)))return o;const r=s?t:Xe(t);if(!r)return o;const i=s?o:Xe(o);if(!i)return o;const a=r.length,c=i.length,l=s?new Array(c):{};let u=0;for(let f=0;f<c;f++){const h=s?f:i[f],d=t[h],p=o[h];if(d===p){l[h]=d,(s?f<a:so.call(t,h))&&u++;continue}if(d===null||p===null||typeof d!="object"||typeof p!="object"){l[h]=p;continue}const m=D(d,p,e+1);l[h]=m,m===d&&u++}return a===c&&u===a?t:l}function Xe(t){const n=Object.getOwnPropertyNames(t);for(const s of n)if(!Je.call(t,s))return!1;const e=Object.getOwnPropertySymbols(t);if(e.length===0)return n;const o=n;for(const s of e){if(!Je.call(t,s))return!1;o.push(s)}return o}function qt(t){if(!Qe(t))return!1;const n=t.constructor;if(typeof n>"u")return!0;const e=n.prototype;return!(!Qe(e)||!e.hasOwnProperty("isPrototypeOf"))}function Qe(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ze(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function rt(t,n,e){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(Array.isArray(t)&&Array.isArray(n)){if(t.length!==n.length)return!1;for(let o=0,s=t.length;o<s;o++)if(!rt(t[o],n[o],e))return!1;return!0}if(qt(t)&&qt(n)){const o=e?.ignoreUndefined??!0;if(e?.partial){for(const i in n)if((!o||n[i]!==void 0)&&!rt(t[i],n[i],e))return!1;return!0}let s=0;if(!o)s=Object.keys(t).length;else for(const i in t)t[i]!==void 0&&s++;let r=0;for(const i in n)if((!o||n[i]!==void 0)&&(r++,r>s||!rt(t[i],n[i],e)))return!1;return s===r}return!1}function yt(t){let n,e;const o=new Promise((s,r)=>{n=s,e=r});return o.status="pending",o.resolve=s=>{o.status="resolved",o.value=s,n(s),t?.(s)},o.reject=s=>{o.status="rejected",e(s)},o}function mt(t){return!!(t&&typeof t=="object"&&typeof t.then=="function")}function ro(t){return t.replace(/[\x00-\x1f\x7f]/g,"")}function tn(t){let n;try{n=decodeURI(t)}catch{n=t.replaceAll(/%[0-9A-F]{2}/gi,e=>{try{return decodeURI(e)}catch{return e}})}return ro(n)}const io=["http:","https:","mailto:","tel:"];function Yt(t,n){if(!t)return!1;try{const e=new URL(t);return!n.has(e.protocol)}catch{return!1}}function Rt(t){if(!t)return{path:t,handledProtocolRelativeURL:!1};if(!/[%\\\x00-\x1f\x7f]/.test(t)&&!t.startsWith("//"))return{path:t,handledProtocolRelativeURL:!1};const n=/%25|%5C/gi;let e=0,o="",s;for(;(s=n.exec(t))!==null;)o+=tn(t.slice(e,s.index))+s[0],e=n.lastIndex;o=o+tn(e?t.slice(e):t);let r=!1;return o.startsWith("//")&&(r=!0,o="/"+o.replace(/^\/+/,"")),{path:o,handledProtocolRelativeURL:r}}function ao(t){return/\s|[^\u0000-\u007F]/.test(t)?t.replace(/\s|[^\u0000-\u007F]/gu,encodeURIComponent):t}var co="Invariant failed";function Y(t,n){if(!t)throw new Error(co)}function Jt(t){const n=new Map;let e,o;const s=r=>{r.next&&(r.prev?(r.prev.next=r.next,r.next.prev=r.prev,r.next=void 0,o&&(o.next=r,r.prev=o)):(r.next.prev=void 0,e=r.next,r.next=void 0,o&&(r.prev=o,o.next=r)),o=r)};return{get(r){const i=n.get(r);if(i)return s(i),i.value},set(r,i){if(n.size>=t&&e){const c=e;n.delete(c.key),c.next&&(e=c.next,c.next.prev=void 0),c===o&&(o=void 0)}const a=n.get(r);if(a)a.value=i,s(a);else{const c={key:r,value:i,prev:o};o&&(o.next=c),o=c,e||(e=c),n.set(r,c)}},clear(){n.clear(),e=void 0,o=void 0}}}const vt=0,at=1,ct=2,Bt=3,ot=4,yn=5;function lo(t){const n=t.indexOf("{");if(n===-1)return null;const e=t.indexOf("}",n);return e===-1||n+1>=t.length?null:[n,e]}function be(t,n,e=new Uint16Array(6)){const o=t.indexOf("/",n),s=o===-1?t.length:o,r=t.substring(n,s);if(!r||!r.includes("$"))return e[0]=vt,e[1]=n,e[2]=n,e[3]=s,e[4]=s,e[5]=s,e;if(r==="$"){const a=t.length;return e[0]=ct,e[1]=n,e[2]=n,e[3]=a,e[4]=a,e[5]=a,e}if(r.charCodeAt(0)===36)return e[0]=at,e[1]=n,e[2]=n+1,e[3]=s,e[4]=s,e[5]=s,e;const i=lo(r);if(i){const[a,c]=i,l=r.charCodeAt(a+1);if(l===45){if(a+2<r.length&&r.charCodeAt(a+2)===36){const u=a+3,f=c;if(u<f)return e[0]=Bt,e[1]=n+a,e[2]=n+u,e[3]=n+f,e[4]=n+c+1,e[5]=s,e}}else if(l===36){const u=a+1,f=a+2;return f===c?(e[0]=ct,e[1]=n+a,e[2]=n+u,e[3]=n+f,e[4]=n+c+1,e[5]=t.length,e):(e[0]=at,e[1]=n+a,e[2]=n+f,e[3]=n+c,e[4]=n+c+1,e[5]=s,e)}}return e[0]=vt,e[1]=n,e[2]=n,e[3]=s,e[4]=s,e[5]=s,e}function ee(t,n,e,o,s,r,i){i?.(e);let a=o;{const c=e.fullPath??e.from,l=c.length,u=e.options?.caseSensitive??t,f=!!(e.options?.params?.parse&&e.options?.skipRouteOnParseError?.params);for(;a<l;){const d=be(c,a,n);let p;const m=a,g=d[5];switch(a=g+1,r++,d[0]){case vt:{const P=c.substring(d[2],d[3]);if(u){const R=s.static?.get(P);if(R)p=R;else{s.static??=new Map;const y=st(e.fullPath??e.from);y.parent=s,y.depth=r,p=y,s.static.set(P,y)}}else{const R=P.toLowerCase(),y=s.staticInsensitive?.get(R);if(y)p=y;else{s.staticInsensitive??=new Map;const L=st(e.fullPath??e.from);L.parent=s,L.depth=r,p=L,s.staticInsensitive.set(R,L)}}break}case at:{const P=c.substring(m,d[1]),R=c.substring(d[4],g),y=u&&!!(P||R),L=P?y?P:P.toLowerCase():void 0,k=R?y?R:R.toLowerCase():void 0,_=!f&&s.dynamic?.find(w=>!w.skipOnParamError&&w.caseSensitive===y&&w.prefix===L&&w.suffix===k);if(_)p=_;else{const w=le(at,e.fullPath??e.from,y,L,k);p=w,w.depth=r,w.parent=s,s.dynamic??=[],s.dynamic.push(w)}break}case Bt:{const P=c.substring(m,d[1]),R=c.substring(d[4],g),y=u&&!!(P||R),L=P?y?P:P.toLowerCase():void 0,k=R?y?R:R.toLowerCase():void 0,_=!f&&s.optional?.find(w=>!w.skipOnParamError&&w.caseSensitive===y&&w.prefix===L&&w.suffix===k);if(_)p=_;else{const w=le(Bt,e.fullPath??e.from,y,L,k);p=w,w.parent=s,w.depth=r,s.optional??=[],s.optional.push(w)}break}case ct:{const P=c.substring(m,d[1]),R=c.substring(d[4],g),y=u&&!!(P||R),L=P?y?P:P.toLowerCase():void 0,k=R?y?R:R.toLowerCase():void 0,_=le(ct,e.fullPath??e.from,y,L,k);p=_,_.parent=s,_.depth=r,s.wildcard??=[],s.wildcard.push(_)}}s=p}if(f&&e.children&&!e.isRoot&&e.id&&e.id.charCodeAt(e.id.lastIndexOf("/")+1)===95){const d=st(e.fullPath??e.from);d.kind=yn,d.parent=s,r++,d.depth=r,s.pathless??=[],s.pathless.push(d),s=d}const h=(e.path||!e.children)&&!e.isRoot;if(h&&c.endsWith("/")){const d=st(e.fullPath??e.from);d.kind=ot,d.parent=s,r++,d.depth=r,s.index=d,s=d}s.parse=e.options?.params?.parse??null,s.skipOnParamError=f,s.parsingPriority=e.options?.skipRouteOnParseError?.priority??0,h&&!s.route&&(s.route=e,s.fullPath=e.fullPath??e.from)}if(e.children)for(const c of e.children)ee(t,n,c,a,s,r,i)}function ce(t,n){if(t.skipOnParamError&&!n.skipOnParamError)return-1;if(!t.skipOnParamError&&n.skipOnParamError)return 1;if(t.skipOnParamError&&n.skipOnParamError&&(t.parsingPriority||n.parsingPriority))return n.parsingPriority-t.parsingPriority;if(t.prefix&&n.prefix&&t.prefix!==n.prefix){if(t.prefix.startsWith(n.prefix))return-1;if(n.prefix.startsWith(t.prefix))return 1}if(t.suffix&&n.suffix&&t.suffix!==n.suffix){if(t.suffix.endsWith(n.suffix))return-1;if(n.suffix.endsWith(t.suffix))return 1}return t.prefix&&!n.prefix?-1:!t.prefix&&n.prefix?1:t.suffix&&!n.suffix?-1:!t.suffix&&n.suffix?1:t.caseSensitive&&!n.caseSensitive?-1:!t.caseSensitive&&n.caseSensitive?1:0}function X(t){if(t.pathless)for(const n of t.pathless)X(n);if(t.static)for(const n of t.static.values())X(n);if(t.staticInsensitive)for(const n of t.staticInsensitive.values())X(n);if(t.dynamic?.length){t.dynamic.sort(ce);for(const n of t.dynamic)X(n)}if(t.optional?.length){t.optional.sort(ce);for(const n of t.optional)X(n)}if(t.wildcard?.length){t.wildcard.sort(ce);for(const n of t.wildcard)X(n)}}function st(t){return{kind:vt,depth:0,pathless:null,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null,parse:null,skipOnParamError:!1,parsingPriority:0}}function le(t,n,e,o,s){return{kind:t,depth:0,pathless:null,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:n,parent:null,parse:null,skipOnParamError:!1,parsingPriority:0,caseSensitive:e,prefix:o,suffix:s}}function uo(t,n){const e=st("/"),o=new Uint16Array(6);for(const s of t)ee(!1,o,s,1,e,0);X(e),n.masksTree=e,n.flatCache=Jt(1e3)}function ho(t,n){t||="/";const e=n.flatCache.get(t);if(e)return e;const o=ke(t,n.masksTree);return n.flatCache.set(t,o),o}function fo(t,n,e,o,s){t||="/",o||="/";const r=n?`case\0${t}`:t;let i=s.singleCache.get(r);if(!i){i=st("/");const a=new Uint16Array(6);ee(n,a,{from:t},1,i,0),s.singleCache.set(r,i)}return ke(o,i,e)}function po(t,n,e=!1){const o=e?t:`nofuzz\0${t}`,s=n.matchCache.get(o);if(s!==void 0)return s;t||="/";let r;try{r=ke(t,n.segmentTree,e)}catch(i){if(i instanceof URIError)r=null;else throw i}return r&&(r.branch=yo(r.route)),n.matchCache.set(o,r),r}function mo(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function go(t,n=!1,e){const o=st(t.fullPath),s=new Uint16Array(6),r={},i={};let a=0;return ee(n,s,t,1,o,0,l=>{if(e?.(l,a),Y(!(l.id in r),`Duplicate routes found with id: ${String(l.id)}`),r[l.id]=l,a!==0&&l.path){const u=mo(l.fullPath);(!i[u]||l.fullPath.endsWith("/"))&&(i[u]=l)}a++}),X(o),{processedTree:{segmentTree:o,singleCache:Jt(1e3),matchCache:Jt(1e3),flatCache:null,masksTree:null},routesById:r,routesByPath:i}}function ke(t,n,e=!1){const o=t.split("/"),s=wo(t,o,n,e);if(!s)return null;const[r]=vn(t,o,s);return{route:s.node.route,rawParams:r,parsedParams:s.parsedParams}}function vn(t,n,e){const o=vo(e.node);let s=null;const r={};let i=e.extract?.part??0,a=e.extract?.node??0,c=e.extract?.path??0,l=e.extract?.segment??0;for(;a<o.length;i++,a++,c++,l++){const u=o[a];if(u.kind===ot)break;if(u.kind===yn){l--,i--,c--;continue}const f=n[i],h=c;if(f&&(c+=f.length),u.kind===at){s??=e.node.fullPath.split("/");const d=s[l],p=u.prefix?.length??0;if(d.charCodeAt(p)===123){const g=u.suffix?.length??0,S=d.substring(p+2,d.length-g-1),P=f.substring(p,f.length-g);r[S]=decodeURIComponent(P)}else{const g=d.substring(1);r[g]=decodeURIComponent(f)}}else if(u.kind===Bt){if(e.skipped&1<<a){i--,c=h-1;continue}s??=e.node.fullPath.split("/");const d=s[l],p=u.prefix?.length??0,m=u.suffix?.length??0,g=d.substring(p+3,d.length-m-1),S=u.suffix||u.prefix?f.substring(p,f.length-m):f;S&&(r[g]=decodeURIComponent(S))}else if(u.kind===ct){const d=u,p=t.substring(h+(d.prefix?.length??0),t.length-(d.suffix?.length??0)),m=decodeURIComponent(p);r["*"]=m,r._splat=m;break}}return e.rawParams&&Object.assign(r,e.rawParams),[r,{part:i,node:a,path:c,segment:l}]}function yo(t){const n=[t];for(;t.parentRoute;)t=t.parentRoute,n.push(t);return n.reverse(),n}function vo(t){const n=Array(t.depth+1);do n[t.depth]=t,t=t.parent;while(t);return n}function wo(t,n,e,o){if(t==="/"&&e.index)return{node:e.index,skipped:0};const s=!Et(n),r=s&&t!=="/",i=n.length-(s?1:0),a=[{node:e,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let c=null,l=null,u=null;for(;a.length;){const f=a.pop(),{node:h,index:d,skipped:p,depth:m,statics:g,dynamics:S,optionals:P}=f;let{extract:R,rawParams:y,parsedParams:L}=f;if(h.skipOnParamError){if(!ue(t,n,f))continue;y=f.rawParams,R=f.extract,L=f.parsedParams}o&&h.route&&h.kind!==ot&&xt(l,f)&&(l=f);const k=d===i;if(k&&(h.route&&!r&&xt(u,f)&&(u=f),!h.optional&&!h.wildcard&&!h.index&&!h.pathless))continue;const _=k?void 0:n[d];let w;if(k&&h.index){const x={node:h.index,index:d,skipped:p,depth:m+1,statics:g,dynamics:S,optionals:P,extract:R,rawParams:y,parsedParams:L};let I=!0;if(h.index.skipOnParamError&&(ue(t,n,x)||(I=!1)),I){if(g===i&&!S&&!P&&!p)return x;xt(u,x)&&(u=x)}}if(h.wildcard&&xt(c,f))for(const x of h.wildcard){const{prefix:I,suffix:C}=x;if(I&&(k||!(x.caseSensitive?_:w??=_.toLowerCase()).startsWith(I)))continue;if(C){if(k)continue;const E=n.slice(d).join("/").slice(-C.length);if((x.caseSensitive?E:E.toLowerCase())!==C)continue}const M={node:x,index:i,skipped:p,depth:m,statics:g,dynamics:S,optionals:P,extract:R,rawParams:y,parsedParams:L};if(!(x.skipOnParamError&&!ue(t,n,M))){c=M;break}}if(h.optional){const x=p|1<<m,I=m+1;for(let C=h.optional.length-1;C>=0;C--){const M=h.optional[C];a.push({node:M,index:d,skipped:x,depth:I,statics:g,dynamics:S,optionals:P,extract:R,rawParams:y,parsedParams:L})}if(!k)for(let C=h.optional.length-1;C>=0;C--){const M=h.optional[C],{prefix:E,suffix:T}=M;if(E||T){const J=M.caseSensitive?_:w??=_.toLowerCase();if(E&&!J.startsWith(E)||T&&!J.endsWith(T))continue}a.push({node:M,index:d+1,skipped:p,depth:I,statics:g,dynamics:S,optionals:P+1,extract:R,rawParams:y,parsedParams:L})}}if(!k&&h.dynamic&&_)for(let x=h.dynamic.length-1;x>=0;x--){const I=h.dynamic[x],{prefix:C,suffix:M}=I;if(C||M){const E=I.caseSensitive?_:w??=_.toLowerCase();if(C&&!E.startsWith(C)||M&&!E.endsWith(M))continue}a.push({node:I,index:d+1,skipped:p,depth:m+1,statics:g,dynamics:S+1,optionals:P,extract:R,rawParams:y,parsedParams:L})}if(!k&&h.staticInsensitive){const x=h.staticInsensitive.get(w??=_.toLowerCase());x&&a.push({node:x,index:d+1,skipped:p,depth:m+1,statics:g+1,dynamics:S,optionals:P,extract:R,rawParams:y,parsedParams:L})}if(!k&&h.static){const x=h.static.get(_);x&&a.push({node:x,index:d+1,skipped:p,depth:m+1,statics:g+1,dynamics:S,optionals:P,extract:R,rawParams:y,parsedParams:L})}if(h.pathless){const x=m+1;for(let I=h.pathless.length-1;I>=0;I--){const C=h.pathless[I];a.push({node:C,index:d,skipped:p,depth:x,statics:g,dynamics:S,optionals:P,extract:R,rawParams:y,parsedParams:L})}}}if(u&&c)return xt(c,u)?u:c;if(u)return u;if(c)return c;if(o&&l){let f=l.index;for(let d=0;d<l.index;d++)f+=n[d].length;const h=f===t.length?"/":t.slice(f);return l.rawParams??={},l.rawParams["**"]=decodeURIComponent(h),l}return null}function ue(t,n,e){try{const[o,s]=vn(t,n,e);e.rawParams=o,e.extract=s;const r=e.node.parse(o);return e.parsedParams=Object.assign({},e.parsedParams,r),!0}catch{return null}}function xt(t,n){return t?n.statics>t.statics||n.statics===t.statics&&(n.dynamics>t.dynamics||n.dynamics===t.dynamics&&(n.optionals>t.optionals||n.optionals===t.optionals&&((n.node.kind===ot)>(t.node.kind===ot)||n.node.kind===ot==(t.node.kind===ot)&&n.depth>t.depth))):!0}function $t(t){return Le(t.filter(n=>n!==void 0).join("/"))}function Le(t){return t.replace(/\/{2,}/g,"/")}function wn(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function q(t){const n=t.length;return n>1&&t[n-1]==="/"?t.replace(/\/{1,}$/,""):t}function Sn(t){return q(wn(t))}function Xt(t,n){return t?.endsWith("/")&&t!=="/"&&t!==`${n}/`?t.slice(0,-1):t}function So(t,n,e){return Xt(t,e)===Xt(n,e)}function Po({base:t,to:n,trailingSlash:e="never",cache:o}){const s=n.startsWith("/"),r=!s&&n===".";let i;if(o){i=s?n:r?t:t+"\0"+n;const f=o.get(i);if(f)return f}let a;if(r)a=t.split("/");else if(s)a=n.split("/");else{for(a=t.split("/");a.length>1&&Et(a)==="";)a.pop();const f=n.split("/");for(let h=0,d=f.length;h<d;h++){const p=f[h];p===""?h?h===d-1&&a.push(p):a=[p]:p===".."?a.pop():p==="."||a.push(p)}}a.length>1&&(Et(a)===""?e==="never"&&a.pop():e==="always"&&a.push(""));let c,l="";for(let f=0;f<a.length;f++){f>0&&(l+="/");const h=a[f];if(!h)continue;c=be(h,0,c);const d=c[0];if(d===vt){l+=h;continue}const p=c[5],m=h.substring(0,c[1]),g=h.substring(c[4],p),S=h.substring(c[2],c[3]);d===at?l+=m||g?`${m}{$${S}}${g}`:`$${S}`:d===ct?l+=m||g?`${m}{$}${g}`:"$":l+=`${m}{-$${S}}${g}`}l=Le(l);const u=l||"/";return i&&o&&o.set(i,u),u}function Ro(t){const n=new Map(t.map(s=>[encodeURIComponent(s),s])),e=Array.from(n.keys()).map(s=>s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),o=new RegExp(e,"g");return s=>s.replace(o,r=>n.get(r)??r)}function he(t,n,e){const o=n[t];return typeof o!="string"?o:t==="_splat"?/^[a-zA-Z0-9\-._~!/]*$/.test(o)?o:o.split("/").map(s=>en(s,e)).join("/"):en(o,e)}function de({path:t,params:n,decoder:e,...o}){let s=!1;const r={};if(!t||t==="/")return{interpolatedPath:"/",usedParams:r,isMissingParams:s};if(!t.includes("$"))return{interpolatedPath:t,usedParams:r,isMissingParams:s};const i=t.length;let a=0,c,l="";for(;a<i;){const f=a;c=be(t,f,c);const h=c[5];if(a=h+1,f===h)continue;const d=c[0];if(d===vt){l+="/"+t.substring(f,h);continue}if(d===ct){const p=n._splat;r._splat=p,r["*"]=p;const m=t.substring(f,c[1]),g=t.substring(c[4],h);if(!p){s=!0,(m||g)&&(l+="/"+m+g);continue}const S=he("_splat",n,e);l+="/"+m+S+g;continue}if(d===at){const p=t.substring(c[2],c[3]);!s&&!(p in n)&&(s=!0),r[p]=n[p];const m=t.substring(f,c[1]),g=t.substring(c[4],h),S=he(p,n,e)??"undefined";l+="/"+m+S+g;continue}if(d===Bt){const p=t.substring(c[2],c[3]),m=n[p];if(m==null)continue;r[p]=m;const g=t.substring(f,c[1]),S=t.substring(c[4],h),P=he(p,n,e)??"";l+="/"+g+P+S;continue}}return t.endsWith("/")&&(l+="/"),{usedParams:r,interpolatedPath:l||"/",isMissingParams:s}}function en(t,n){const e=encodeURIComponent(t);return n?.(e)??e}function F(t){return!!t?.isNotFound}function xo(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const Pe="tsr-scroll-restoration-v1_3",_o=(t,n)=>{let e;return(...o)=>{e||(e=setTimeout(()=>{t(...o),e=null},n))}};function bo(){const t=xo();if(!t)return null;const n=t.getItem(Pe);let e=n?JSON.parse(n):{};return{state:e,set:o=>{e=Q(o,e)||e;try{t.setItem(Pe,JSON.stringify(e))}catch{console.warn("[ts-router] Could not persist scroll restoration state to sessionStorage.")}}}}const Vt=bo(),ko=t=>t.state.__TSR_key||t.href;function Lo(t){const n=[];let e;for(;e=t.parentNode;)n.push(`${t.tagName}:nth-child(${Array.prototype.indexOf.call(e.children,t)+1})`),t=e;return`${n.reverse().join(" > ")}`.toLowerCase()}let Qt=!1;function Io({storageKey:t,key:n,behavior:e,shouldScrollRestoration:o,scrollToTopSelectors:s,location:r}){let i;try{i=JSON.parse(sessionStorage.getItem(t)||"{}")}catch(l){console.error(l);return}const a=n||window.history.state?.__TSR_key,c=i[a];Qt=!0;t:{if(o&&c&&Object.keys(c).length>0){for(const f in c){const h=c[f];if(f==="window")window.scrollTo({top:h.scrollY,left:h.scrollX,behavior:e});else if(f){const d=document.querySelector(f);d&&(d.scrollLeft=h.scrollX,d.scrollTop=h.scrollY)}}break t}const l=(r??window.location).hash.split("#",2)[1];if(l){const f=window.history.state?.__hashScrollIntoViewOptions??!0;if(f){const h=document.getElementById(l);h&&h.scrollIntoView(f)}break t}const u={top:0,left:0,behavior:e};if(window.scrollTo(u),s)for(const f of s){if(f==="window")continue;const h=typeof f=="function"?f():document.querySelector(f);h&&h.scrollTo(u)}}Qt=!1}function Co(t,n){if(!Vt||((t.options.scrollRestoration??!1)&&(t.isScrollRestoring=!0),t.isScrollRestorationSetup||!Vt))return;t.isScrollRestorationSetup=!0,Qt=!1;const o=t.options.getScrollRestorationKey||ko;window.history.scrollRestoration="manual";const s=r=>{if(Qt||!t.isScrollRestoring)return;let i="";if(r.target===document||r.target===window)i="window";else{const c=r.target.getAttribute("data-scroll-restoration-id");c?i=`[data-scroll-restoration-id="${c}"]`:i=Lo(r.target)}const a=o(t.state.location);Vt.set(c=>{const l=c[a]||={},u=l[i]||={};if(i==="window")u.scrollX=window.scrollX||0,u.scrollY=window.scrollY||0;else if(i){const f=document.querySelector(i);f&&(u.scrollX=f.scrollLeft||0,u.scrollY=f.scrollTop||0)}return c})};typeof document<"u"&&document.addEventListener("scroll",_o(s,100),!0),t.subscribe("onRendered",r=>{const i=o(r.toLocation);if(!t.resetNextScroll){t.resetNextScroll=!0;return}typeof t.options.scrollRestoration=="function"&&!t.options.scrollRestoration({location:t.latestLocation})||(Io({storageKey:Pe,key:i,behavior:t.options.scrollRestorationBehavior,shouldScrollRestoration:t.isScrollRestoring,scrollToTopSelectors:t.options.scrollToTopSelectors,location:t.history.location}),t.isScrollRestoring&&Vt.set(a=>(a[i]||={},a)))})}function Mo(t){if(typeof document<"u"&&document.querySelector){const n=t.state.location.state.__hashScrollIntoViewOptions??!0;if(n&&t.state.location.hash!==""){const e=document.getElementById(t.state.location.hash);e&&e.scrollIntoView(n)}}}function To(t,n=String){const e=new URLSearchParams;for(const o in t){const s=t[o];s!==void 0&&e.set(o,n(s))}return e.toString()}function fe(t){return t?t==="false"?!1:t==="true"?!0:+t*0===0&&+t+""===t?+t:t:""}function Eo(t){const n=new URLSearchParams(t),e={};for(const[o,s]of n.entries()){const r=e[o];r==null?e[o]=fe(s):Array.isArray(r)?r.push(fe(s)):e[o]=[r,fe(s)]}return e}const Bo=Do(JSON.parse),Oo=Fo(JSON.stringify,JSON.parse);function Do(t){return n=>{n[0]==="?"&&(n=n.substring(1));const e=Eo(n);for(const o in e){const s=e[o];if(typeof s=="string")try{e[o]=t(s)}catch{}}return e}}function Fo(t,n){const e=typeof n=="function";function o(s){if(typeof s=="object"&&s!==null)try{return t(s)}catch{}else if(e&&typeof s=="string")try{return n(s),t(s)}catch{}return s}return s=>{const r=To(s,o);return r?`?${r}`:""}}const V="__root__";function Ao(t){if(t.statusCode=t.statusCode||t.code||307,!t._builtLocation&&!t.reloadDocument&&typeof t.href=="string")try{new URL(t.href),t.reloadDocument=!0}catch{}const n=new Headers(t.headers);t.href&&n.get("Location")===null&&n.set("Location",t.href);const e=new Response(null,{status:t.statusCode,headers:n});if(e.options=t,t.throw)throw e;return e}function N(t){return t instanceof Response&&!!t.options}const Gt=t=>{if(!t.rendered)return t.rendered=!0,t.onReady?.()},ne=(t,n)=>!!(t.preload&&!t.router.state.matches.some(e=>e.id===n)),gt=(t,n,e=!0)=>{const o={...t.router.options.context??{}},s=e?n:n-1;for(let r=0;r<=s;r++){const i=t.matches[r];if(!i)continue;const a=t.router.getMatch(i.id);a&&Object.assign(o,a.__routeContext,a.__beforeLoadContext)}return o},Pn=(t,n,e)=>{const o=t.router.routesById[n.routeId??""]??t.router.routeTree;!o.options.notFoundComponent&&t.router.options?.defaultNotFoundComponent&&(o.options.notFoundComponent=t.router.options.defaultNotFoundComponent);const s=e==="BEFORE_LOAD"&&o.parentRoute;s||Y(o.options.notFoundComponent);const r=t.matches.find(i=>i.routeId===o.id);Y(r,"Could not find match for route: "+o.id),t.updateMatch(r.id,i=>({...i,status:"notFound",error:n,isFetching:!1})),s&&(n.routeId=o.parentRoute.id,Pn(t,n,e))},Z=(t,n,e,o)=>{if(!(!N(e)&&!F(e))){if(N(e)&&e.redirectHandled&&!e.options.reloadDocument)throw e;if(n){n._nonReactive.beforeLoadPromise?.resolve(),n._nonReactive.loaderPromise?.resolve(),n._nonReactive.beforeLoadPromise=void 0,n._nonReactive.loaderPromise=void 0;const s=N(e)?"redirected":"notFound";n._nonReactive.error=e,t.updateMatch(n.id,r=>({...r,status:s,context:gt(t,n.index),isFetching:!1,error:e})),F(e)&&!e.routeId&&(e.routeId=n.routeId),n._nonReactive.loadPromise?.resolve()}throw N(e)?(t.rendered=!0,e.options._fromLocation=t.location,e.redirectHandled=!0,e=t.router.resolveRedirect(e),e):(Pn(t,e,o),e)}},Rn=(t,n)=>!!t.router.getMatch(n)._nonReactive.dehydrated,_t=(t,n,e,o)=>{const{id:s,routeId:r}=t.matches[n],i=t.router.looseRoutesById[r];if(e instanceof Promise)throw e;e.routerCode=o,t.firstBadMatchIndex??=n,Z(t,t.router.getMatch(s),e,o);try{i.options.onError?.(e)}catch(a){e=a,Z(t,t.router.getMatch(s),e,o)}t.updateMatch(s,a=>(a._nonReactive.beforeLoadPromise?.resolve(),a._nonReactive.beforeLoadPromise=void 0,a._nonReactive.loadPromise?.resolve(),{...a,error:e,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},xn=(t,n,e,o)=>{if(o._nonReactive.pendingTimeout!==void 0)return;const s=e.options.pendingMs??t.router.options.defaultPendingMs;if(!!(t.onReady&&!ne(t,n)&&(e.options.loader||e.options.beforeLoad||kn(e))&&typeof s=="number"&&s!==1/0&&(e.options.pendingComponent??t.router.options?.defaultPendingComponent))){const i=setTimeout(()=>{Gt(t)},s);o._nonReactive.pendingTimeout=i}},jo=(t,n,e)=>{const o=t.router.getMatch(n);if(!o._nonReactive.beforeLoadPromise&&!o._nonReactive.loaderPromise)return;xn(t,n,e,o);const s=()=>{const r=t.router.getMatch(n);r.preload&&(r.status==="redirected"||r.status==="notFound")&&Z(t,r,r.error)};return o._nonReactive.beforeLoadPromise?o._nonReactive.beforeLoadPromise.then(s):s()},Vo=(t,n,e,o)=>{const s=t.router.getMatch(n),r=s._nonReactive.loadPromise;s._nonReactive.loadPromise=yt(()=>{r?.resolve()});const{paramsError:i,searchError:a}=s;i&&_t(t,e,i,"PARSE_PARAMS"),a&&_t(t,e,a,"VALIDATE_SEARCH"),xn(t,n,o,s);const c=new AbortController;let l=!1;const u=()=>{l||(l=!0,t.updateMatch(n,y=>({...y,isFetching:"beforeLoad",fetchCount:y.fetchCount+1,abortController:c})))},f=()=>{s._nonReactive.beforeLoadPromise?.resolve(),s._nonReactive.beforeLoadPromise=void 0,t.updateMatch(n,y=>({...y,isFetching:!1}))};if(!o.options.beforeLoad){Ct(()=>{u(),f()});return}s._nonReactive.beforeLoadPromise=yt();const h={...gt(t,e,!1),...s.__routeContext},{search:d,params:p,cause:m}=s,g=ne(t,n),S={search:d,abortController:c,params:p,preload:g,context:h,location:t.location,navigate:y=>t.router.navigate({...y,_fromLocation:t.location}),buildLocation:t.router.buildLocation,cause:g?"preload":m,matches:t.matches,routeId:o.id,...t.router.options.additionalContext},P=y=>{if(y===void 0){Ct(()=>{u(),f()});return}(N(y)||F(y))&&(u(),_t(t,e,y,"BEFORE_LOAD")),Ct(()=>{u(),t.updateMatch(n,L=>({...L,__beforeLoadContext:y})),f()})};let R;try{if(R=o.options.beforeLoad(S),mt(R))return u(),R.catch(y=>{_t(t,e,y,"BEFORE_LOAD")}).then(P)}catch(y){u(),_t(t,e,y,"BEFORE_LOAD")}P(R)},No=(t,n)=>{const{id:e,routeId:o}=t.matches[n],s=t.router.looseRoutesById[o],r=()=>a(),i=()=>Vo(t,e,n,s),a=()=>{if(Rn(t,e))return;const c=jo(t,e,s);return mt(c)?c.then(i):i()};return r()},Ho=(t,n,e)=>{const o=t.router.getMatch(n);if(!o||!e.options.head&&!e.options.scripts&&!e.options.headers)return;const s={ssr:t.router.options.ssr,matches:t.matches,match:o,params:o.params,loaderData:o.loaderData};return Promise.all([e.options.head?.(s),e.options.scripts?.(s),e.options.headers?.(s)]).then(([r,i,a])=>{const c=r?.meta,l=r?.links,u=r?.scripts,f=r?.styles;return{meta:c,links:l,headScripts:u,headers:a,scripts:i,styles:f}})},_n=(t,n,e,o)=>{const s=t.matchPromises[e-1],{params:r,loaderDeps:i,abortController:a,cause:c}=t.router.getMatch(n),l=gt(t,e),u=ne(t,n);return{params:r,deps:i,preload:!!u,parentMatchPromise:s,abortController:a,context:l,location:t.location,navigate:f=>t.router.navigate({...f,_fromLocation:t.location}),cause:u?"preload":c,route:o,...t.router.options.additionalContext}},nn=async(t,n,e,o)=>{try{const s=t.router.getMatch(n);try{(!(no??t.router.isServer)||s.ssr===!0)&&bn(o);const r=o.options.loader?.(_n(t,n,e,o)),i=o.options.loader&&mt(r);if((i||o._lazyPromise||o._componentsPromise||o.options.head||o.options.scripts||o.options.headers||s._nonReactive.minPendingPromise)&&t.updateMatch(n,l=>({...l,isFetching:"loader"})),o.options.loader){const l=i?await r:r;Z(t,t.router.getMatch(n),l),l!==void 0&&t.updateMatch(n,u=>({...u,loaderData:l}))}o._lazyPromise&&await o._lazyPromise;const c=s._nonReactive.minPendingPromise;c&&await c,o._componentsPromise&&await o._componentsPromise,t.updateMatch(n,l=>({...l,error:void 0,context:gt(t,e),status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(r){let i=r;if(i?.name==="AbortError"){if(s.abortController.signal.aborted){s._nonReactive.loaderPromise?.resolve(),s._nonReactive.loaderPromise=void 0;return}t.updateMatch(n,c=>({...c,status:c.status==="pending"?"success":c.status,isFetching:!1,context:gt(t,e)}));return}const a=s._nonReactive.minPendingPromise;a&&await a,F(r)&&await o.options.notFoundComponent?.preload?.(),Z(t,t.router.getMatch(n),r);try{o.options.onError?.(r)}catch(c){i=c,Z(t,t.router.getMatch(n),c)}t.updateMatch(n,c=>({...c,error:i,context:gt(t,e),status:"error",isFetching:!1}))}}catch(s){const r=t.router.getMatch(n);r&&(r._nonReactive.loaderPromise=void 0),Z(t,r,s)}},Uo=async(t,n)=>{async function e(u,f,h,d){const p=Date.now()-f.updatedAt,m=u?d.options.preloadStaleTime??t.router.options.defaultPreloadStaleTime??3e4:d.options.staleTime??t.router.options.defaultStaleTime??0,g=d.options.shouldReload,S=typeof g=="function"?g(_n(t,o,n,d)):g,{status:P,invalid:R}=h;r=P==="success"&&(R||(S??p>m)),u&&d.options.preload===!1||(r&&!t.sync?(i=!0,(async()=>{try{await nn(t,o,n,d);const y=t.router.getMatch(o);y._nonReactive.loaderPromise?.resolve(),y._nonReactive.loadPromise?.resolve(),y._nonReactive.loaderPromise=void 0}catch(y){N(y)&&await t.router.navigate(y.options)}})()):(P!=="success"||r&&t.sync)&&await nn(t,o,n,d))}const{id:o,routeId:s}=t.matches[n];let r=!1,i=!1;const a=t.router.looseRoutesById[s];if(!Rn(t,o)){const u=t.router.getMatch(o),f=ne(t,o);if(u._nonReactive.loaderPromise){if(u.status==="success"&&!t.sync&&!u.preload)return u;await u._nonReactive.loaderPromise;const h=t.router.getMatch(o),d=h._nonReactive.error||h.error;d&&Z(t,h,d),h.status==="pending"&&await e(f,u,h,a)}else{const h=f&&!t.router.state.matches.some(p=>p.id===o),d=t.router.getMatch(o);d._nonReactive.loaderPromise=yt(),h!==d.preload&&t.updateMatch(o,p=>({...p,preload:h})),await e(f,u,d,a)}}const c=t.router.getMatch(o);i||(c._nonReactive.loaderPromise?.resolve(),c._nonReactive.loadPromise?.resolve()),clearTimeout(c._nonReactive.pendingTimeout),c._nonReactive.pendingTimeout=void 0,i||(c._nonReactive.loaderPromise=void 0),c._nonReactive.dehydrated=void 0;const l=i?c.isFetching:!1;return l!==c.isFetching||c.invalid!==!1?(t.updateMatch(o,u=>({...u,isFetching:l,invalid:!1})),t.router.getMatch(o)):c};async function on(t){const n=Object.assign(t,{matchPromises:[]});n.router.state.matches.some(e=>e._forcePending)&&Gt(n);try{for(let a=0;a<n.matches.length;a++){const c=No(n,a);mt(c)&&await c}const e=n.firstBadMatchIndex??n.matches.length;for(let a=0;a<e;a++)n.matchPromises.push(Uo(n,a));const s=(await Promise.allSettled(n.matchPromises)).filter(a=>a.status==="rejected").map(a=>a.reason);let r;for(const a of s){if(N(a))throw a;!r&&F(a)&&(r=a)}for(const a of n.matches){const{id:c,routeId:l}=a,u=n.router.looseRoutesById[l];try{const f=Ho(n,c,u);if(f){const h=await f;n.updateMatch(c,d=>({...d,...h}))}}catch(f){console.error(`Error executing head for route ${l}:`,f)}}if(r)throw r;const i=Gt(n);mt(i)&&await i}catch(e){if(F(e)&&!n.preload){const o=Gt(n);throw mt(o)&&await o,e}if(N(e))throw e}return n.matches}async function bn(t){if(!t._lazyLoaded&&t._lazyPromise===void 0&&(t.lazyFn?t._lazyPromise=t.lazyFn().then(n=>{const{id:e,...o}=n.options;Object.assign(t.options,o),t._lazyLoaded=!0,t._lazyPromise=void 0}):t._lazyLoaded=!0),!t._componentsLoaded&&t._componentsPromise===void 0){const n=()=>{const e=[];for(const o of Ln){const s=t.options[o]?.preload;s&&e.push(s())}if(e.length)return Promise.all(e).then(()=>{t._componentsLoaded=!0,t._componentsPromise=void 0});t._componentsLoaded=!0,t._componentsPromise=void 0};t._componentsPromise=t._lazyPromise?t._lazyPromise.then(n):n()}return t._componentsPromise}function kn(t){for(const n of Ln)if(t.options[n]?.preload)return!0;return!1}const Ln=["component","errorComponent","pendingComponent","notFoundComponent"];function Wo(t){return{input:({url:n})=>{for(const e of t)n=Re(e,n);return n},output:({url:n})=>{for(let e=t.length-1;e>=0;e--)n=In(t[e],n);return n}}}function $o(t){const n=Sn(t.basepath),e=`/${n}`,o=`${e}/`,s=t.caseSensitive?e:e.toLowerCase(),r=t.caseSensitive?o:o.toLowerCase();return{input:({url:i})=>{const a=t.caseSensitive?i.pathname:i.pathname.toLowerCase();return a===s?i.pathname="/":a.startsWith(r)&&(i.pathname=i.pathname.slice(e.length)),i},output:({url:i})=>(i.pathname=$t(["/",n,i.pathname]),i)}}function Re(t,n){const e=t?.input?.({url:n});if(e){if(typeof e=="string")return new URL(e);if(e instanceof URL)return e}return n}function In(t,n){const e=t?.output?.({url:n});if(e){if(typeof e=="string")return new URL(e);if(e instanceof URL)return e}return n}function it(t){const n=t.resolvedLocation,e=t.location,o=n?.pathname!==e.pathname,s=n?.href!==e.href,r=n?.hash!==e.hash;return{fromLocation:n,toLocation:e,pathChanged:o,hrefChanged:s,hashChanged:r}}class Go{constructor(n){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=e=>e(),this.update=e=>{e.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const o=this.options,s=this.basepath??o?.basepath??"/",r=this.basepath===void 0,i=o?.rewrite;if(this.options={...o,...e},this.isServer=this.options.isServer??typeof document>"u",this.protocolAllowlist=new Set(this.options.protocolAllowlist),this.options.pathParamsAllowedCharacters&&(this.pathParamsDecoder=Ro(this.options.pathParamsAllowedCharacters)),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.history=Zn()),this.origin=this.options.origin,this.origin||(window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree){this.routeTree=this.options.routeTree;let h;this.resolvePathCache=Jt(1e3),h=this.buildRouteTree(),this.setRoutes(h)}!this.__store&&this.latestLocation&&(this.__store=new we(Ko(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(h=>!["redirected"].includes(h.status))}}}),Co(this));let a=!1;const c=this.options.basepath??"/",l=this.options.rewrite;if(r||s!==c||i!==l){this.basepath=c;const h=[],d=Sn(c);d&&d!=="/"&&h.push($o({basepath:c})),l&&h.push(l),this.rewrite=h.length===0?void 0:h.length===1?h[0]:Wo(h),this.history&&this.updateLatestLocation(),a=!0}a&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const e=go(this.routeTree,this.options.caseSensitive,(o,s)=>{o.init({originalIndex:s})});return this.options.routeMasks&&uo(this.options.routeMasks,e.processedTree),e},this.subscribe=(e,o)=>{const s={eventType:e,fn:o};return this.subscribers.add(s),()=>{this.subscribers.delete(s)}},this.emit=e=>{this.subscribers.forEach(o=>{o.eventType===e.type&&o.fn(e)})},this.parseLocation=(e,o)=>{const s=({pathname:c,search:l,hash:u,href:f,state:h})=>{if(!this.rewrite&&!/[ \x00-\x1f\x7f\u0080-\uffff]/.test(c)){const P=this.options.parseSearch(l),R=this.options.stringifySearch(P);return{href:c+R+u,publicHref:f,pathname:Rt(c).path,external:!1,searchStr:R,search:D(o?.search,P),hash:Rt(u.slice(1)).path,state:D(o?.state,h)}}const d=new URL(f,this.origin),p=Re(this.rewrite,d),m=this.options.parseSearch(p.search),g=this.options.stringifySearch(m);return p.search=g,{href:p.href.replace(p.origin,""),publicHref:f,pathname:Rt(p.pathname).path,external:!!this.rewrite&&p.origin!==this.origin,searchStr:g,search:D(o?.search,m),hash:Rt(p.hash.slice(1)).path,state:D(o?.state,h)}},r=s(e),{__tempLocation:i,__tempKey:a}=r.state;if(i&&(!a||a===this.tempLocationKey)){const c=s(i);return c.state.key=r.state.key,c.state.__TSR_key=r.state.__TSR_key,delete c.state.__tempLocation,{...c,maskedLocation:r}}return r},this.resolvePathWithBase=(e,o)=>Po({base:e,to:Le(o),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(e,o,s)=>typeof e=="string"?this.matchRoutesInternal({pathname:e,search:o},s):this.matchRoutesInternal(e,o),this.getMatchedRoutes=e=>qo({pathname:e,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=e=>{const o=this.getMatch(e);o&&(o.abortController.abort(),clearTimeout(o._nonReactive.pendingTimeout),o._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const e=this.state.matches.filter(r=>r.status==="pending"),o=this.state.matches.filter(r=>r.isFetching==="loader");new Set([...this.state.pendingMatches??[],...e,...o]).forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=e=>{const o=(r={})=>{const i=r._fromLocation||this.pendingBuiltLocation||this.latestLocation,a=this.matchRoutesLightweight(i);r.from;const c=r.unsafeRelative==="path"?i.pathname:r.from??a.fullPath,l=this.resolvePathWithBase(c,"."),u=a.search,f={...a.params},h=r.to?this.resolvePathWithBase(l,`${r.to}`):this.resolvePathWithBase(l,"."),d=r.params===!1||r.params===null?{}:(r.params??!0)===!0?f:Object.assign(f,Q(r.params,f)),p=de({path:h,params:d,decoder:this.pathParamsDecoder,server:this.isServer}).interpolatedPath,m=this.getMatchedRoutes(p);let g=m.matchedRoutes;(m.foundRoute?m.foundRoute.path!=="/"&&m.routeParams["**"]:q(p))&&this.options.notFoundRoute&&(g=[...g,this.options.notFoundRoute]);let P=!1;if(Object.keys(d).length>0)for(const E of g){const T=E.options.params?.stringify??E.options.stringifyParams;T&&(P=!0,Object.assign(d,T(d)))}const R=e.leaveParams?h:Rt(P?de({path:h,params:d,decoder:this.pathParamsDecoder,server:this.isServer}).interpolatedPath:p).path;let y=u;if(e._includeValidateSearch&&this.options.search?.strict){const E={};g.forEach(T=>{if(T.options.validateSearch)try{Object.assign(E,zt(T.options.validateSearch,{...E,...y}))}catch{}}),y=E}y=Yo({search:y,dest:r,destRoutes:g,_includeValidateSearch:e._includeValidateSearch}),y=D(u,y);const L=this.options.stringifySearch(y),k=r.hash===!0?i.hash:r.hash?Q(r.hash,i.hash):void 0,_=k?`#${k}`:"";let w=r.state===!0?i.state:r.state?Q(r.state,i.state):{};w=D(i.state,w);const x=`${R}${L}${_}`;let I,C,M=!1;if(this.rewrite){const E=new URL(x,this.origin),T=In(this.rewrite,E);I=E.href.replace(E.origin,""),T.origin!==this.origin?(C=T.href,M=!0):C=T.pathname+T.search+T.hash}else I=ao(x),C=I;return{publicHref:C,href:I,pathname:R,search:y,searchStr:L,state:w,hash:k??"",external:M,unmaskOnReload:r.unmaskOnReload}},s=(r={},i)=>{const a=o(r);let c=i?o(i):void 0;if(!c){const l={};if(this.options.routeMasks){const u=ho(a.pathname,this.processedTree);if(u){Object.assign(l,u.rawParams);const{from:f,params:h,...d}=u.route,p=h===!1||h===null?{}:(h??!0)===!0?l:Object.assign(l,Q(h,l));i={from:e.from,...d,params:p},c=o(i)}}}return c&&(a.maskedLocation=c),a};return e.mask?s(e,{from:e.from,...e.mask}):s(e)},this.commitLocation=async({viewTransition:e,ignoreBlocker:o,...s})=>{const r=()=>{const c=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];c.forEach(u=>{s.state[u]=this.latestLocation.state[u]});const l=rt(s.state,this.latestLocation.state);return c.forEach(u=>{delete s.state[u]}),l},i=q(this.latestLocation.href)===q(s.href),a=this.commitLocationPromise;if(this.commitLocationPromise=yt(()=>{a?.resolve()}),i&&r())this.load();else{let{maskedLocation:c,hashScrollIntoView:l,...u}=s;c&&(u={...c,state:{...c.state,__tempKey:void 0,__tempLocation:{...u,search:u.searchStr,state:{...u.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(u.unmaskOnReload??this.options.unmaskOnReload??!1)&&(u.state.__tempKey=this.tempLocationKey)),u.state.__hashScrollIntoViewOptions=l??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=e,this.history[s.replace?"replace":"push"](u.publicHref,u.state,{ignoreBlocker:o})}return this.resetNextScroll=s.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:e,resetScroll:o,hashScrollIntoView:s,viewTransition:r,ignoreBlocker:i,href:a,...c}={})=>{if(a){const f=this.history.location.state.__TSR_index,h=Tt(a,{__TSR_index:e?f:f+1}),d=new URL(h.pathname,this.origin),p=Re(this.rewrite,d);c.to=p.pathname,c.search=this.options.parseSearch(h.search),c.hash=h.hash.slice(1)}const l=this.buildLocation({...c,_includeValidateSearch:!0});this.pendingBuiltLocation=l;const u=this.commitLocation({...l,viewTransition:r,replace:e,resetScroll:o,hashScrollIntoView:s,ignoreBlocker:i});return Promise.resolve().then(()=>{this.pendingBuiltLocation===l&&(this.pendingBuiltLocation=void 0)}),u},this.navigate=async({to:e,reloadDocument:o,href:s,publicHref:r,...i})=>{let a=!1;if(s)try{new URL(`${s}`),a=!0}catch{}if(a&&!o&&(o=!0),o){if(e!==void 0||!s){const l=this.buildLocation({to:e,...i});s=s??l.publicHref,r=r??l.publicHref}const c=!a&&r?r:s;if(Yt(c,this.protocolAllowlist))return Promise.resolve();if(!i.ignoreBlocker){const u=this.history.getBlockers?.()??[];for(const f of u)if(f?.blockerFn&&await f.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}return i.replace?window.location.replace(c):window.location.href=c,Promise.resolve()}return this.buildAndCommitLocation({...i,href:s,to:e,_isNavigate:!0})},this.beforeLoad=()=>{this.cancelMatches(),this.updateLatestLocation();const e=this.matchRoutes(this.latestLocation);this.__store.setState(o=>({...o,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:e,cachedMatches:o.cachedMatches.filter(s=>!e.some(r=>r.id===s.id))}))},this.load=async e=>{let o,s,r;for(r=new Promise(a=>{this.startTransition(async()=>{try{this.beforeLoad();const c=this.latestLocation,l=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...it({resolvedLocation:l,location:c})}),this.emit({type:"onBeforeLoad",...it({resolvedLocation:l,location:c})}),await on({router:this,sync:e?.sync,matches:this.state.pendingMatches,location:c,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let u=[],f=[],h=[];Ct(()=>{this.__store.setState(d=>{const p=d.matches,m=d.pendingMatches||d.matches;return u=p.filter(g=>!m.some(S=>S.id===g.id)),f=m.filter(g=>!p.some(S=>S.id===g.id)),h=m.filter(g=>p.some(S=>S.id===g.id)),{...d,isLoading:!1,loadedAt:Date.now(),matches:m,pendingMatches:void 0,cachedMatches:[...d.cachedMatches,...u.filter(g=>g.status!=="error"&&g.status!=="notFound")]}}),this.clearExpiredCache()}),[[u,"onLeave"],[f,"onEnter"],[h,"onStay"]].forEach(([d,p])=>{d.forEach(m=>{this.looseRoutesById[m.routeId].options[p]?.(m)})})})})}})}catch(c){N(c)?(o=c,this.navigate({...o.options,replace:!0,ignoreBlocker:!0})):F(c)&&(s=c),this.__store.setState(l=>({...l,statusCode:o?o.status:s?404:l.matches.some(u=>u.status==="error")?500:200,redirect:o}))}this.latestLoadPromise===r&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),a()})}),this.latestLoadPromise=r,await r;this.latestLoadPromise&&r!==this.latestLoadPromise;)await this.latestLoadPromise;let i;this.hasNotFoundMatch()?i=404:this.__store.state.matches.some(a=>a.status==="error")&&(i=500),i!==void 0&&this.__store.setState(a=>({...a,statusCode:i}))},this.startViewTransition=e=>{const o=this.shouldViewTransition??this.options.defaultViewTransition;if(this.shouldViewTransition=void 0,o&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let s;if(typeof o=="object"&&this.isViewTransitionTypesSupported){const r=this.latestLocation,i=this.state.resolvedLocation,a=typeof o.types=="function"?o.types(it({resolvedLocation:i,location:r})):o.types;if(a===!1){e();return}s={update:e,types:a}}else s=e;document.startViewTransition(s)}else e()},this.updateMatch=(e,o)=>{this.startTransition(()=>{const s=this.state.pendingMatches?.some(r=>r.id===e)?"pendingMatches":this.state.matches.some(r=>r.id===e)?"matches":this.state.cachedMatches.some(r=>r.id===e)?"cachedMatches":"";s&&this.__store.setState(r=>({...r,[s]:r[s]?.map(i=>i.id===e?o(i):i)}))})},this.getMatch=e=>{const o=s=>s.id===e;return this.state.cachedMatches.find(o)??this.state.pendingMatches?.find(o)??this.state.matches.find(o)},this.invalidate=e=>{const o=s=>e?.filter?.(s)??!0?{...s,invalid:!0,...e?.forcePending||s.status==="error"||s.status==="notFound"?{status:"pending",error:void 0}:void 0}:s;return this.__store.setState(s=>({...s,matches:s.matches.map(o),cachedMatches:s.cachedMatches.map(o),pendingMatches:s.pendingMatches?.map(o)})),this.shouldViewTransition=!1,this.load({sync:e?.sync})},this.getParsedLocationHref=e=>e.publicHref||"/",this.resolveRedirect=e=>{const o=e.headers.get("Location");if(!e.options.href||e.options._builtLocation){const s=e.options._builtLocation??this.buildLocation(e.options),r=this.getParsedLocationHref(s);e.options.href=r,e.headers.set("Location",r)}else if(o)try{const s=new URL(o);if(this.origin&&s.origin===this.origin){const r=s.pathname+s.search+s.hash;e.options.href=r,e.headers.set("Location",r)}}catch{}if(e.options.href&&!e.options._builtLocation&&Yt(e.options.href,this.protocolAllowlist))throw new Error(`Redirect blocked: unsafe protocol in href "${e.options.href}". Allowed protocols: ${Array.from(this.protocolAllowlist).join(", ")}.`);return e.headers.get("Location")||e.headers.set("Location",e.options.href),e},this.clearCache=e=>{const o=e?.filter;o!==void 0?this.__store.setState(s=>({...s,cachedMatches:s.cachedMatches.filter(r=>!o(r))})):this.__store.setState(s=>({...s,cachedMatches:[]}))},this.clearExpiredCache=()=>{const e=o=>{const s=this.looseRoutesById[o.routeId];if(!s.options.loader)return!0;const r=(o.preload?s.options.preloadGcTime??this.options.defaultPreloadGcTime:s.options.gcTime??this.options.defaultGcTime)??300*1e3;return o.status==="error"?!0:Date.now()-o.updatedAt>=r};this.clearCache({filter:e})},this.loadRouteChunk=bn,this.preloadRoute=async e=>{const o=e._builtLocation??this.buildLocation(e);let s=this.matchRoutes(o,{throwOnError:!0,preload:!0,dest:e});const r=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),i=new Set([...r,...this.state.cachedMatches.map(a=>a.id)]);Ct(()=>{s.forEach(a=>{i.has(a.id)||this.__store.setState(c=>({...c,cachedMatches:[...c.cachedMatches,a]}))})});try{return s=await on({router:this,matches:s,location:o,preload:!0,updateMatch:(a,c)=>{r.has(a)?s=s.map(l=>l.id===a?c(l):l):this.updateMatch(a,c)}}),s}catch(a){if(N(a))return a.options.reloadDocument?void 0:await this.preloadRoute({...a.options,_fromLocation:o});F(a)||console.error(a);return}},this.matchRoute=(e,o)=>{const s={...e,to:e.to?this.resolvePathWithBase(e.from||"",e.to):void 0,params:e.params||{},leaveParams:!0},r=this.buildLocation(s);if(o?.pending&&this.state.status!=="pending")return!1;const a=(o?.pending===void 0?!this.state.isLoading:o.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,c=fo(r.pathname,o?.caseSensitive??!1,o?.fuzzy??!1,a.pathname,this.processedTree);return!c||e.params&&!rt(c.rawParams,e.params,{partial:!0})?!1:o?.includeSearch??!0?rt(a.search,r.search,{partial:!0})?c.rawParams:!1:c.rawParams},this.hasNotFoundMatch=()=>this.__store.state.matches.some(e=>e.status==="notFound"||e.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...n,caseSensitive:n.caseSensitive??!1,notFoundMode:n.notFoundMode??"fuzzy",stringifySearch:n.stringifySearch??Oo,parseSearch:n.parseSearch??Bo,protocolAllowlist:n.protocolAllowlist??io}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}setRoutes({routesById:n,routesByPath:e,processedTree:o}){this.routesById=n,this.routesByPath=e,this.processedTree=o;const s=this.options.notFoundRoute;s&&(s.init({originalIndex:99999999999}),this.routesById[s.id]=s)}get looseRoutesById(){return this.routesById}getParentContext(n){return n?.id?n.context??this.options.context??void 0:this.options.context??void 0}matchRoutesInternal(n,e){const o=this.getMatchedRoutes(n.pathname),{foundRoute:s,routeParams:r,parsedParams:i}=o;let{matchedRoutes:a}=o,c=!1;(s?s.path!=="/"&&r["**"]:q(n.pathname))&&(this.options.notFoundRoute?a=[...a,this.options.notFoundRoute]:c=!0);const l=c?Xo(this.options.notFoundMode,a):void 0,u=new Array(a.length),f=new Map(this.state.matches.map(h=>[h.routeId,h]));for(let h=0;h<a.length;h++){const d=a[h],p=u[h-1];let m,g,S;{const T=p?.search??n.search,J=p?._strictSearch??void 0;try{const W=zt(d.options.validateSearch,{...T})??void 0;m={...T,...W},g={...J,...W},S=void 0}catch(W){let wt=W;if(W instanceof Zt||(wt=new Zt(W.message,{cause:W})),e?.throwOnError)throw wt;m=T,g={},S=wt}}const P=d.options.loaderDeps?.({search:m})??"",R=P?JSON.stringify(P):"",{interpolatedPath:y,usedParams:L}=de({path:d.fullPath,params:r,decoder:this.pathParamsDecoder,server:this.isServer}),k=d.id+y+R,_=this.getMatch(k),w=f.get(d.id),x=_?._strictParams??L;let I;if(!_)try{sn(d,L,i,x)}catch(T){if(F(T)||N(T)?I=T:I=new zo(T.message,{cause:T}),e?.throwOnError)throw I}Object.assign(r,x);const C=w?"stay":"enter";let M;if(_)M={..._,cause:C,params:w?.params??r,_strictParams:x,search:D(w?w.search:_.search,m),_strictSearch:g};else{const T=d.options.loader||d.options.beforeLoad||d.lazyFn||kn(d)?"pending":"success";M={id:k,ssr:d.options.ssr,index:h,routeId:d.id,params:w?.params??r,_strictParams:x,pathname:y,updatedAt:Date.now(),search:w?D(w.search,m):m,_strictSearch:g,searchError:void 0,status:T,isFetching:!1,error:void 0,paramsError:I,__routeContext:void 0,_nonReactive:{loadPromise:yt()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:C,loaderDeps:w?D(w.loaderDeps,P):P,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:d.options.staticData||{},fullPath:d.fullPath}}e?.preload||(M.globalNotFound=l===d.id),M.searchError=S;const E=this.getParentContext(p);M.context={...E,...M.__routeContext,...M.__beforeLoadContext},u[h]=M}for(let h=0;h<u.length;h++){const d=u[h],p=this.looseRoutesById[d.routeId],m=this.getMatch(d.id),g=f.get(d.routeId);if(d.params=g?D(g.params,r):r,!m){const S=u[h-1],P=this.getParentContext(S);if(p.options.context){const R={deps:d.loaderDeps,params:d.params,context:P??{},location:n,navigate:y=>this.navigate({...y,_fromLocation:n}),buildLocation:this.buildLocation,cause:d.cause,abortController:d.abortController,preload:!!d.preload,matches:u,routeId:p.id};d.__routeContext=p.options.context(R)??void 0}d.context={...P,...d.__routeContext,...d.__beforeLoadContext}}}return u}matchRoutesLightweight(n){const{matchedRoutes:e,routeParams:o,parsedParams:s}=this.getMatchedRoutes(n.pathname),r=Et(e),i={...n.search};for(const u of e)try{Object.assign(i,zt(u.options.validateSearch,i))}catch{}const a=Et(this.state.matches),c=a&&a.routeId===r.id&&n.pathname===this.state.location.pathname;let l;if(c)l=a.params;else{const u={...o};for(const f of e)try{sn(f,o,s??{},u)}catch{}l=u}return{matchedRoutes:e,fullPath:r.fullPath,search:i,params:l}}}class Zt extends Error{}class zo extends Error{}function Ko(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function zt(t,n){if(t==null)return{};if("~standard"in t){const e=t["~standard"].validate(n);if(e instanceof Promise)throw new Zt("Async validation not supported");if(e.issues)throw new Zt(JSON.stringify(e.issues,void 0,2),{cause:e});return e.value}return"parse"in t?t.parse(n):typeof t=="function"?t(n):{}}function qo({pathname:t,routesById:n,processedTree:e}){const o={},s=q(t);let r,i;const a=po(s,e,!0);return a&&(r=a.route,Object.assign(o,a.rawParams),i=Object.assign({},a.parsedParams)),{matchedRoutes:a?.branch||[n[V]],routeParams:o,foundRoute:r,parsedParams:i}}function Yo({search:t,dest:n,destRoutes:e,_includeValidateSearch:o}){return Jo(e)(t,n,o??!1)}function Jo(t){const n={dest:null,_includeValidateSearch:!1,middlewares:[]};for(const s of t){if("search"in s.options)s.options.search?.middlewares&&n.middlewares.push(...s.options.search.middlewares);else if(s.options.preSearchFilters||s.options.postSearchFilters){const r=({search:i,next:a})=>{let c=i;"preSearchFilters"in s.options&&s.options.preSearchFilters&&(c=s.options.preSearchFilters.reduce((u,f)=>f(u),i));const l=a(c);return"postSearchFilters"in s.options&&s.options.postSearchFilters?s.options.postSearchFilters.reduce((u,f)=>f(u),l):l};n.middlewares.push(r)}if(s.options.validateSearch){const r=({search:i,next:a})=>{const c=a(i);if(!n._includeValidateSearch)return c;try{return{...c,...zt(s.options.validateSearch,c)??void 0}}catch{return c}};n.middlewares.push(r)}}const e=({search:s})=>{const r=n.dest;return r.search?r.search===!0?s:Q(r.search,s):{}};n.middlewares.push(e);const o=(s,r,i)=>{if(s>=i.length)return r;const a=i[s];return a({search:r,next:l=>o(s+1,l,i)})};return function(r,i,a){return n.dest=i,n._includeValidateSearch=a,o(0,r,n.middlewares)}}function Xo(t,n){if(t!=="root")for(let e=n.length-1;e>=0;e--){const o=n[e];if(o.children)return o.id}return V}function sn(t,n,e,o){const s=t.options.params?.parse??t.options.parseParams;if(s)if(t.options.skipRouteOnParseError)for(const r in n)r in e&&(o[r]=e[r]);else{const r=s(o);Object.assign(o,r)}}const Qo="Error preloading route! ";class Cn{constructor(n){if(this.init=e=>{this.originalIndex=e.originalIndex;const o=this.options,s=!o?.path&&!o?.id;this.parentRoute=this.options.getParentRoute?.(),s?this._path=V:this.parentRoute||Y(!1);let r=s?V:o?.path;r&&r!=="/"&&(r=wn(r));const i=o?.id||r;let a=s?V:$t([this.parentRoute.id===V?"":this.parentRoute.id,i]);r===V&&(r="/"),a!==V&&(a=$t(["/",a]));const c=a===V?"/":$t([this.parentRoute.fullPath,r]);this._path=r,this._id=a,this._fullPath=c,this._to=q(c)},this.addChildren=e=>this._addFileChildren(e),this._addFileChildren=e=>(Array.isArray(e)&&(this.children=e),typeof e=="object"&&e!==null&&(this.children=Object.values(e)),this),this._addFileTypes=()=>this,this.updateLoader=e=>(Object.assign(this.options,e),this),this.update=e=>(Object.assign(this.options,e),this),this.lazy=e=>(this.lazyFn=e,this),this.redirect=e=>Ao({from:this.fullPath,...e}),this.options=n||{},this.isRoot=!n?.getParentRoute,n?.id&&n?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class Zo extends Cn{constructor(n){super(n)}}const Nt=typeof window<"u"?b.useLayoutEffect:b.useEffect;function pe(t){const n=b.useRef({value:t,prev:null}),e=n.current.value;return t!==e&&(n.current={value:t,prev:e}),n.current.prev}function ts(t,n,e={},o={}){b.useEffect(()=>{if(!t.current||o.disabled||typeof IntersectionObserver!="function")return;const s=new IntersectionObserver(([r])=>{n(r)},e);return s.observe(t.current),()=>{s.disconnect()}},[n,e,o.disabled,t])}function es(t){const n=b.useRef(null);return b.useImperativeHandle(t,()=>n.current,[]),n}function Ie(t){const n=t.errorComponent??Ce;return v.jsx(ns,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:e,reset:o})=>e?b.createElement(n,{error:e,reset:o}):t.children})}class ns extends b.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(n){return{resetKey:n.getResetKey()}}static getDerivedStateFromError(n){return{error:n}}reset(){this.setState({error:null})}componentDidUpdate(n,e){e.error&&e.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(n,e){this.props.onCatch&&this.props.onCatch(n,e)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Ce({error:t}){const[n,e]=b.useState(!1);return v.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[v.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[v.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),v.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>e(o=>!o),children:n?"Hide Error":"Show Error"})]}),v.jsx("div",{style:{height:".25rem"}}),n?v.jsx("div",{children:v.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?v.jsx("code",{children:t.message}):null})}):null]})}function os({children:t,fallback:n=null}){return Mn()?v.jsx(Mt.Fragment,{children:t}):v.jsx(Mt.Fragment,{children:n})}function Mn(){return Mt.useSyncExternalStore(ss,()=>!0,()=>!1)}function ss(){return()=>{}}var me={exports:{}},ge={};var rn;function rs(){if(rn)return ge;rn=1;var t=$n(),n=Gn();function e(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var o=typeof Object.is=="function"?Object.is:e,s=n.useSyncExternalStore,r=t.useRef,i=t.useEffect,a=t.useMemo,c=t.useDebugValue;return ge.useSyncExternalStoreWithSelector=function(l,u,f,h,d){var p=r(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=a(function(){function S(k){if(!P){if(P=!0,R=k,k=h(k),d!==void 0&&m.hasValue){var _=m.value;if(d(_,k))return y=_}return y=k}if(_=y,o(R,k))return _;var w=h(k);return d!==void 0&&d(_,w)?(R=k,_):(R=k,y=w)}var P=!1,R,y,L=f===void 0?null:f;return[function(){return S(u())},L===null?void 0:function(){return S(L())}]},[u,f,h,d]);var g=s(l,p[0],p[1]);return i(function(){m.hasValue=!0,m.value=g},[g]),c(g),g},ge}var an;function is(){return an||(an=1,me.exports=rs()),me.exports}var as=is();function cs(t,n=o=>o,e={}){const o=e.equal??ls;return as.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,n,o)}function ls(t,n){if(Object.is(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(const[o,s]of t)if(!n.has(o)||!Object.is(s,n.get(o)))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(const o of t)if(!n.has(o))return!1;return!0}if(t instanceof Date&&n instanceof Date)return t.getTime()===n.getTime();const e=cn(t);if(e.length!==cn(n).length)return!1;for(let o=0;o<e.length;o++)if(!Object.prototype.hasOwnProperty.call(n,e[o])||!Object.is(t[e[o]],n[e[o]]))return!1;return!0}function cn(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}const ye=b.createContext(null);function Tn(){return typeof document>"u"?ye:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=ye,ye)}function H(t){const n=b.useContext(Tn());return t?.warn,n}function A(t){const n=H({warn:t?.router===void 0}),e=t?.router||n,o=b.useRef(void 0);return cs(e.__store,s=>{if(t?.select){if(t.structuralSharing??e.options.defaultStructuralSharing){const r=D(o.current,t.select(s));return o.current=r,r}return t.select(s)}return s})}const oe=b.createContext(void 0),us=b.createContext(void 0);function G(t){const n=b.useContext(t.from?us:oe);return A({select:o=>{const s=o.matches.find(r=>t.from?t.from===r.routeId:r.id===n);if(Y(!((t.shouldThrow??!0)&&!s),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),s!==void 0)return t.select?t.select(s):s},structuralSharing:t.structuralSharing})}function Me(t){return G({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:n=>t.select?t.select(n.loaderData):n.loaderData})}function Te(t){const{select:n,...e}=t;return G({...e,select:o=>n?n(o.loaderDeps):o.loaderDeps})}function Ee(t){return G({from:t.from,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,strict:t.strict,select:n=>{const e=t.strict===!1?n.params:n._strictParams;return t.select?t.select(e):e}})}function Be(t){return G({from:t.from,strict:t.strict,shouldThrow:t.shouldThrow,structuralSharing:t.structuralSharing,select:n=>t.select?t.select(n.search):n.search})}function se(t){const n=H();return b.useCallback(e=>n.navigate({...e,from:e.from??t?.from}),[t?.from,n])}function hs(t,n){const e=H(),o=es(n),{activeProps:s,inactiveProps:r,activeOptions:i,to:a,preload:c,preloadDelay:l,hashScrollIntoView:u,replace:f,startTransition:h,resetScroll:d,viewTransition:p,children:m,target:g,disabled:S,style:P,className:R,onClick:y,onFocus:L,onMouseEnter:k,onMouseLeave:_,onTouchStart:w,ignoreBlocker:x,params:I,search:C,hash:M,state:E,mask:T,reloadDocument:J,unsafeRelative:W,from:wt,_fromLocation:zs,...Fe}=t,Ae=Mn(),An=A({select:B=>{const O=B.matches[B.matches.length-1];return{search:O?.search,hash:B.location.hash,path:O?.pathname}},structuralSharing:!0}),je=t.from,St=b.useMemo(()=>({...t,from:je}),[e,An,je,t._fromLocation,t.hash,t.to,t.search,t.params,t.state,t.mask,t.unsafeRelative]),j=b.useMemo(()=>e.buildLocation({...St}),[e,St]),Ve=j.maskedLocation?j.maskedLocation.publicHref:j.publicHref,Ne=j.maskedLocation?j.maskedLocation.external:j.external,Pt=b.useMemo(()=>ys(Ve,Ne,e.history,S),[S,Ne,Ve,e.history]),Ot=b.useMemo(()=>{if(Pt?.external)return Yt(Pt.href,e.protocolAllowlist)?void 0:Pt.href;if(!vs(a)&&!(typeof a!="string"||a.indexOf(":")===-1))try{return new URL(a),Yt(a,e.protocolAllowlist)?void 0:a}catch{}},[a,Pt,e.protocolAllowlist]),re=A({select:B=>{if(Ot)return!1;if(i?.exact){if(!So(B.location.pathname,j.pathname,e.basepath))return!1}else{const O=Xt(B.location.pathname,e.basepath),U=Xt(j.pathname,e.basepath);if(!(O.startsWith(U)&&(O.length===U.length||O[U.length]==="/")))return!1}return(i?.includeSearch??!0)&&!rt(B.location.search,j.search,{partial:!i?.exact,ignoreUndefined:!i?.explicitUndefined})?!1:i?.includeHash?Ae&&B.location.hash===j.hash:!0}}),Dt=re?Q(s,{})??ds:ve,Ft=re?ve:Q(r,{})??ve,He=[R,Dt.className,Ft.className].filter(Boolean).join(" "),Ue=(P||Dt.style||Ft.style)&&{...P,...Dt.style,...Ft.style},[jn,We]=b.useState(!1),$e=b.useRef(!1),lt=t.reloadDocument||Ot?!1:c??e.options.defaultPreload,ie=l??e.options.defaultPreloadDelay??0,et=b.useCallback(()=>{e.preloadRoute({...St,_builtLocation:j}).catch(B=>{console.warn(B),console.warn(Qo)})},[e,St,j]),Vn=b.useCallback(B=>{B?.isIntersecting&&et()},[et]);ts(o,Vn,gs,{disabled:!!S||lt!=="viewport"}),b.useEffect(()=>{$e.current||!S&&lt==="render"&&(et(),$e.current=!0)},[S,et,lt]);const Nn=B=>{const O=B.currentTarget.getAttribute("target"),U=g!==void 0?g:O;if(!S&&!ws(B)&&!B.defaultPrevented&&(!U||U==="_self")&&B.button===0){B.preventDefault(),zn.flushSync(()=>{We(!0)});const ze=e.subscribe("onResolved",()=>{ze(),We(!1)});e.navigate({...St,replace:f,resetScroll:d,hashScrollIntoView:u,startTransition:h,viewTransition:p,ignoreBlocker:x})}};if(Ot)return{...Fe,ref:o,href:Ot,...m&&{children:m},...g&&{target:g},...S&&{disabled:S},...P&&{style:P},...R&&{className:R},...y&&{onClick:y},...L&&{onFocus:L},...k&&{onMouseEnter:k},..._&&{onMouseLeave:_},...w&&{onTouchStart:w}};const Ge=B=>{S||lt&&et()},Hn=Ge,Un=B=>{if(!(S||!lt))if(!ie)et();else{const O=B.target;if(bt.has(O))return;const U=setTimeout(()=>{bt.delete(O),et()},ie);bt.set(O,U)}},Wn=B=>{if(S||!lt||!ie)return;const O=B.target,U=bt.get(O);U&&(clearTimeout(U),bt.delete(O))};return{...Fe,...Dt,...Ft,href:Pt?.href,ref:o,onClick:kt([y,Nn]),onFocus:kt([L,Ge]),onMouseEnter:kt([k,Un]),onMouseLeave:kt([_,Wn]),onTouchStart:kt([w,Hn]),disabled:!!S,target:g,...Ue&&{style:Ue},...He&&{className:He},...S&&fs,...re&&ps,...Ae&&jn&&ms}}const ve={},ds={className:"active"},fs={role:"link","aria-disabled":!0},ps={"data-status":"active","aria-current":"page"},ms={"data-transitioning":"transitioning"},bt=new WeakMap,gs={rootMargin:"100px"},kt=t=>n=>{for(const e of t)if(e){if(n.defaultPrevented)return;e(n)}};function ys(t,n,e,o){if(!o)return n?{href:t,external:!0}:{href:e.createHref(t)||"/",external:!1}}function vs(t){if(typeof t!="string")return!1;const n=t.charCodeAt(0);return n===47?t.charCodeAt(1)!==47:n===46}const Oe=b.forwardRef((t,n)=>{const{_asChild:e,...o}=t,{type:s,...r}=hs(o,n),i=typeof o.children=="function"?o.children({isActive:r["data-status"]==="active"}):o.children;if(!e){const{disabled:a,...c}=r;return b.createElement("a",c,i)}return b.createElement(e,r,i)});function ws(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}class Ss extends Cn{constructor(n){super(n),this.useMatch=e=>G({select:e?.select,from:this.id,structuralSharing:e?.structuralSharing}),this.useRouteContext=e=>G({...e,from:this.id,select:o=>e?.select?e.select(o.context):o.context}),this.useSearch=e=>Be({select:e?.select,structuralSharing:e?.structuralSharing,from:this.id}),this.useParams=e=>Ee({select:e?.select,structuralSharing:e?.structuralSharing,from:this.id}),this.useLoaderDeps=e=>Te({...e,from:this.id}),this.useLoaderData=e=>Me({...e,from:this.id}),this.useNavigate=()=>se({from:this.fullPath}),this.Link=Mt.forwardRef((e,o)=>v.jsx(Oe,{ref:o,from:this.fullPath,...e})),this.$$typeof=Symbol.for("react.memo")}}function K(t){return new Ss(t)}class Ps extends Zo{constructor(n){super(n),this.useMatch=e=>G({select:e?.select,from:this.id,structuralSharing:e?.structuralSharing}),this.useRouteContext=e=>G({...e,from:this.id,select:o=>e?.select?e.select(o.context):o.context}),this.useSearch=e=>Be({select:e?.select,structuralSharing:e?.structuralSharing,from:this.id}),this.useParams=e=>Ee({select:e?.select,structuralSharing:e?.structuralSharing,from:this.id}),this.useLoaderDeps=e=>Te({...e,from:this.id}),this.useLoaderData=e=>Me({...e,from:this.id}),this.useNavigate=()=>se({from:this.fullPath}),this.Link=Mt.forwardRef((e,o)=>v.jsx(Oe,{ref:o,from:this.fullPath,...e})),this.$$typeof=Symbol.for("react.memo")}}function Rs(t){return new Ps(t)}function ln(t){return typeof t=="object"?new un(t,{silent:!0}).createRoute(t):new un(t,{silent:!0}).createRoute}class un{constructor(n,e){this.path=n,this.createRoute=o=>{this.silent;const s=K(o);return s.isRoot=!1,s},this.silent=e?.silent}}class hn{constructor(n){this.useMatch=e=>G({select:e?.select,from:this.options.id,structuralSharing:e?.structuralSharing}),this.useRouteContext=e=>G({from:this.options.id,select:o=>e?.select?e.select(o.context):o.context}),this.useSearch=e=>Be({select:e?.select,structuralSharing:e?.structuralSharing,from:this.options.id}),this.useParams=e=>Ee({select:e?.select,structuralSharing:e?.structuralSharing,from:this.options.id}),this.useLoaderDeps=e=>Te({...e,from:this.options.id}),this.useLoaderData=e=>Me({...e,from:this.options.id}),this.useNavigate=()=>{const e=H();return se({from:e.routesById[this.options.id].fullPath})},this.options=n,this.$$typeof=Symbol.for("react.memo")}}function dn(t){return typeof t=="object"?new hn(t):n=>new hn({id:t,...n})}function xs(){const t=H(),n=b.useRef({router:t,mounted:!1}),[e,o]=b.useState(!1),{hasPendingMatches:s,isLoading:r}=A({select:f=>({isLoading:f.isLoading,hasPendingMatches:f.matches.some(h=>h.status==="pending")}),structuralSharing:!0}),i=pe(r),a=r||e||s,c=pe(a),l=r||s,u=pe(l);return t.startTransition=f=>{o(!0),b.startTransition(()=>{f(),o(!1)})},b.useEffect(()=>{const f=t.history.subscribe(t.load),h=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return q(t.latestLocation.publicHref)!==q(h.publicHref)&&t.commitLocation({...h,replace:!0}),()=>{f()}},[t,t.history]),Nt(()=>{if(typeof window<"u"&&t.ssr||n.current.router===t&&n.current.mounted)return;n.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(h){console.error(h)}})()},[t]),Nt(()=>{i&&!r&&t.emit({type:"onLoad",...it(t.state)})},[i,t,r]),Nt(()=>{u&&!l&&t.emit({type:"onBeforeRouteMount",...it(t.state)})},[l,u,t]),Nt(()=>{if(c&&!a){const f=it(t.state);t.emit({type:"onResolved",...f}),t.__store.setState(h=>({...h,status:"idle",resolvedLocation:h.location})),f.hrefChanged&&Mo(t)}},[a,c,t]),null}function _s(t){const n=A({select:e=>`not-found-${e.location.pathname}-${e.status}`});return v.jsx(Ie,{getResetKey:()=>n,onCatch:(e,o)=>{if(F(e))t.onCatch?.(e,o);else throw e},errorComponent:({error:e})=>{if(F(e))return t.fallback?.(e);throw e},children:t.children})}function bs(){return v.jsx("p",{children:"Not Found"})}function ht(t){return v.jsx(v.Fragment,{children:t.children})}function En(t,n,e){return n.options.notFoundComponent?v.jsx(n.options.notFoundComponent,{...e}):t.options.defaultNotFoundComponent?v.jsx(t.options.defaultNotFoundComponent,{...e}):v.jsx(bs,{})}function ks(){return H().isScrollRestoring,null}const Bn=b.memo(function({matchId:n}){const e=H(),o=A({select:m=>{const g=m.matches.findIndex(P=>P.id===n),S=m.matches[g];return Y(S),{routeId:S.routeId,ssr:S.ssr,_displayPending:S._displayPending,resetKey:m.loadedAt,parentRouteId:m.matches[g-1]?.routeId}},structuralSharing:!0}),s=e.routesById[o.routeId],r=s.options.pendingComponent??e.options.defaultPendingComponent,i=r?v.jsx(r,{}):null,a=s.options.errorComponent??e.options.defaultErrorComponent,c=s.options.onCatch??e.options.defaultOnCatch,l=s.isRoot?s.options.notFoundComponent??e.options.notFoundRoute?.options.component:s.options.notFoundComponent,u=o.ssr===!1||o.ssr==="data-only",f=(!s.isRoot||s.options.wrapInSuspense||u)&&(s.options.wrapInSuspense??r??(s.options.errorComponent?.preload||u))?b.Suspense:ht,h=a?Ie:ht,d=l?_s:ht,p=s.isRoot?s.options.shellComponent??ht:ht;return v.jsxs(p,{children:[v.jsx(oe.Provider,{value:n,children:v.jsx(f,{fallback:i,children:v.jsx(h,{getResetKey:()=>o.resetKey,errorComponent:a||Ce,onCatch:(m,g)=>{if(F(m))throw m;c?.(m,g)},children:v.jsx(d,{fallback:m=>{if(!l||m.routeId&&m.routeId!==o.routeId||!m.routeId&&!s.isRoot)throw m;return b.createElement(l,m)},children:u||o._displayPending?v.jsx(os,{fallback:i,children:v.jsx(fn,{matchId:n})}):v.jsx(fn,{matchId:n})})})})}),o.parentRouteId===V&&e.options.scrollRestoration?v.jsxs(v.Fragment,{children:[v.jsx(Ls,{}),v.jsx(ks,{})]}):null]})});function Ls(){const t=H(),n=b.useRef(void 0);return v.jsx("script",{suppressHydrationWarning:!0,ref:e=>{e&&(n.current===void 0||n.current.href!==t.latestLocation.href)&&(t.emit({type:"onRendered",...it(t.state)}),n.current=t.latestLocation)}},t.latestLocation.state.__TSR_key)}const fn=b.memo(function({matchId:n}){const e=H(),{match:o,key:s,routeId:r}=A({select:c=>{const l=c.matches.find(p=>p.id===n),u=l.routeId,h=(e.routesById[u].options.remountDeps??e.options.defaultRemountDeps)?.({routeId:u,loaderDeps:l.loaderDeps,params:l._strictParams,search:l._strictSearch});return{key:h?JSON.stringify(h):void 0,routeId:u,match:{id:l.id,status:l.status,error:l.error,invalid:l.invalid,_forcePending:l._forcePending,_displayPending:l._displayPending}}},structuralSharing:!0}),i=e.routesById[r],a=b.useMemo(()=>{const c=i.options.component??e.options.defaultComponent;return c?v.jsx(c,{},s):v.jsx(Is,{})},[s,i.options.component,e.options.defaultComponent]);if(o._displayPending)throw e.getMatch(o.id)?._nonReactive.displayPendingPromise;if(o._forcePending)throw e.getMatch(o.id)?._nonReactive.minPendingPromise;if(o.status==="pending"){const c=i.options.pendingMinMs??e.options.defaultPendingMinMs;if(c){const l=e.getMatch(o.id);if(l&&!l._nonReactive.minPendingPromise){const u=yt();l._nonReactive.minPendingPromise=u,setTimeout(()=>{u.resolve(),l._nonReactive.minPendingPromise=void 0},c)}}throw e.getMatch(o.id)?._nonReactive.loadPromise}if(o.status==="notFound")return Y(F(o.error)),En(e,i,o.error);if(o.status==="redirected")throw Y(N(o.error)),e.getMatch(o.id)?._nonReactive.loadPromise;if(o.status==="error")throw o.error;return a}),Is=b.memo(function(){const n=H(),e=b.useContext(oe),o=A({select:l=>l.matches.find(u=>u.id===e)?.routeId}),s=n.routesById[o],r=A({select:l=>{const f=l.matches.find(h=>h.id===e);return Y(f),f.globalNotFound}}),i=A({select:l=>{const u=l.matches,f=u.findIndex(h=>h.id===e);return u[f+1]?.id}}),a=n.options.defaultPendingComponent?v.jsx(n.options.defaultPendingComponent,{}):null;if(r)return En(n,s,void 0);if(!i)return null;const c=v.jsx(Bn,{matchId:i});return o===V?v.jsx(b.Suspense,{fallback:a,children:c}):c});function Cs(){const t=H(),e=t.routesById[V].options.pendingComponent??t.options.defaultPendingComponent,o=e?v.jsx(e,{}):null,s=typeof document<"u"&&t.ssr?ht:b.Suspense,r=v.jsxs(s,{fallback:o,children:[v.jsx(xs,{}),v.jsx(Ms,{})]});return t.options.InnerWrap?v.jsx(t.options.InnerWrap,{children:r}):r}function Ms(){const t=H(),n=A({select:s=>s.matches[0]?.id}),e=A({select:s=>s.loadedAt}),o=n?v.jsx(Bn,{matchId:n}):null;return v.jsx(oe.Provider,{value:n,children:t.options.disableGlobalCatchBoundary?o:v.jsx(Ie,{getResetKey:()=>e,errorComponent:Ce,onCatch:s=>{s.message||s.toString()},children:o})})}const Ts=t=>new Es(t);class Es extends Go{constructor(n){super(n)}}typeof globalThis<"u"?(globalThis.createFileRoute=ln,globalThis.createLazyFileRoute=dn):typeof window<"u"&&(window.createFileRoute=ln,window.createLazyFileRoute=dn);function Bs({router:t,children:n,...e}){Object.keys(e).length>0&&t.update({...t.options,...e,context:{...t.options.context,...e.context}});const o=Tn(),s=v.jsx(o.Provider,{value:t,children:n});return t.options.Wrap?v.jsx(t.options.Wrap,{children:s}):s}function Os({router:t,...n}){return v.jsx(Bs,{router:t,...n,children:v.jsx(Cs,{})})}function On(t){return A({select:n=>n.location})}const Ds="_breadcrumb_17xdx_1",Fs="_list_17xdx_6",As="_breadcrumbItem_17xdx_13",js="_link_17xdx_33",Vs="_trigger_17xdx_34",Ns="_icon_17xdx_125",Hs="_dropdownIcon_17xdx_131",Us="_itemLabel_17xdx_137",z={breadcrumb:Ds,list:Fs,breadcrumbItem:As,link:js,trigger:Vs,icon:Ns,dropdownIcon:Hs,itemLabel:Us},De=({items:t,onSelect:n,className:e})=>{const o=On(),[s,r]=b.useState("");return v.jsx("nav",{className:Ke(z.breadcrumb,e),"aria-label":"Breadcrumb",children:v.jsx("ol",{className:z.list,children:t.map((i,a)=>{const c=i.type==="dropdown"?i.options.find(u=>u.href===o.pathname):null,l=i.type==="dropdown"?i.options.filter(u=>u.label.toLowerCase().includes(s.toLowerCase())):[];return v.jsx("li",{className:z.breadcrumbItem,children:i.type==="link"?v.jsxs(Oe,{to:i.href,className:Ke(z.link),"aria-current":a===t.length-1?"page":void 0,onClick:()=>n?.(i.href),children:[i.icon&&v.jsx(At,{icon:i.icon,className:z.icon,size:"small"}),i.label]}):v.jsxs(ut.Root,{onSelect:n,children:[v.jsxs(ut.Trigger,{className:z.trigger,"aria-current":a===t.length-1?"page":void 0,children:[i.icon&&v.jsx(At,{icon:i.icon,className:z.icon,size:"small"}),c?.label||i.label,v.jsx(At,{icon:"arrow_drop_down",className:z.dropdownIcon})]}),v.jsxs(ut.Content,{children:[v.jsx(ut.Header,{children:v.jsx(Kn,{placeholder:"Search",value:s,onValueChange:r,onKeyDown:u=>u.stopPropagation(),slots:{startAdornment:v.jsx(At,{icon:"search",size:"tiny"})}})}),l.map(u=>{const f=c?.href===u.href;return v.jsx(qn,{className:z.itemLabel,variant:"body-sm-reg",asChild:!0,children:v.jsxs(ut.Item,{value:u.href,selected:f,children:[u.label,f&&v.jsx(ut.ItemIndicator,{})]})},u.href)})]})]})},a)})})})};De.__docgenInfo={description:"Design system Breadcrumb component",methods:[],displayName:"DsBreadcrumb",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"union",raw:`| {
		type: 'link';
		label: string;
		href: string;
		icon?: IconType;
  }
| {
		type: 'dropdown';
		label: string;
		options: { label: string; href: string }[];
		icon?: IconType;
  }`,elements:[{name:"signature",type:"object",raw:`{
type: 'link';
label: string;
href: string;
icon?: IconType;
}`,signature:{properties:[{key:"type",value:{name:"literal",value:"'link'",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"href",value:{name:"string",required:!0}},{key:"icon",value:{name:"union",raw:"IconName | FunctionComponent<SVGProps<SVGSVGElement>>",elements:[{name:"union",raw:"MaterialIconName | CustomIconName",elements:[{name:"unknown"},{name:"unknown"}]},{name:"FunctionComponent",elements:[{name:"SVGProps",elements:[{name:"SVGSVGElement"}],raw:"SVGProps<SVGSVGElement>"}],raw:"FunctionComponent<SVGProps<SVGSVGElement>>"}],required:!1}}]}},{name:"signature",type:"object",raw:`{
type: 'dropdown';
label: string;
options: { label: string; href: string }[];
icon?: IconType;
}`,signature:{properties:[{key:"type",value:{name:"literal",value:"'dropdown'",required:!0}},{key:"label",value:{name:"string",required:!0}},{key:"options",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ label: string; href: string }",signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"href",value:{name:"string",required:!0}}]}}],raw:"{ label: string; href: string }[]",required:!0}},{key:"icon",value:{name:"union",raw:"IconName | FunctionComponent<SVGProps<SVGSVGElement>>",elements:[{name:"union",raw:"MaterialIconName | CustomIconName",elements:[{name:"unknown"},{name:"unknown"}]},{name:"FunctionComponent",elements:[{name:"SVGProps",elements:[{name:"SVGSVGElement"}],raw:"SVGProps<SVGSVGElement>"}],raw:"FunctionComponent<SVGProps<SVGSVGElement>>"}],required:!1}}]}}]}],raw:"DsBreadcrumbItem[]"},description:"The items to be displayed in the breadcrumb"},onSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(href: string) => void",signature:{arguments:[{type:{name:"string"},name:"href"}],return:{name:"void"}}},description:`The event handler to be called when an option is selected

@param href`},className:{required:!1,tsType:{name:"string"},description:"Additional CSS class name to be applied to the breadcrumb"}}};const{expect:$,screen:dt,userEvent:nt,within:xe}=__STORYBOOK_MODULE_TEST__,Ws=(t,n)=>{const e=Rs({component:()=>v.jsx(t,{})}),o=K({getParentRoute:()=>e,path:"/",component:()=>v.jsx("div",{children:"Home"})}),s=K({getParentRoute:()=>e,path:"/inventory",component:()=>v.jsx("div",{children:"Inventory"})}),r=K({getParentRoute:()=>e,path:"/inventory/catalog",component:()=>v.jsx("div",{children:"Catalog"})}),i=K({getParentRoute:()=>e,path:"/network",component:()=>v.jsx("div",{children:"Network"})}),a=K({getParentRoute:()=>e,path:"/network/vienna",component:()=>v.jsx("div",{children:"Vienna"})}),c=K({getParentRoute:()=>e,path:"/network/paris",component:()=>v.jsx("div",{children:"Paris"})}),l=K({getParentRoute:()=>e,path:"/network/vienna/router-a",component:()=>v.jsx("div",{children:"Router A"})}),u=K({getParentRoute:()=>e,path:"/network/vienna/switch-b",component:()=>v.jsx("div",{children:"Switch B"})});return Ts({routeTree:e.addChildren([o,s,r,i,a,c,l,u]),history:to({initialEntries:[n]})})},Dn=(t,n)=>{const e=Ws(t,n);return v.jsx(Os,{router:e})},Sr={title:"Design System/Breadcrumb",component:De,tags:["autodocs"],parameters:{layout:"centered"},argTypes:{items:{description:"Array of breadcrumb items, each being a link or a dropdown.",control:{type:"object"}}}},$s=[{type:"link",label:"Home",href:"/",icon:"home"},{type:"link",label:"Inventory",href:"/inventory",icon:"settings"},{type:"link",label:"Catalog",href:"/inventory/catalog",icon:"newspaper"}],Gs=[{type:"link",label:"Home",href:"/"},{type:"link",label:"Network Visibility",href:"/network"},{type:"dropdown",label:"Vienna HQ",icon:"location_on",options:[{label:"Vienna HQ",href:"/network/vienna"},{label:"Paris Office",href:"/network/paris"}]},{type:"dropdown",label:"Router A",icon:"device_hub",options:[{label:"Router A",href:"/network/vienna/router-a"},{label:"Switch B",href:"/network/vienna/switch-b"}]}],te=window,Fn=({items:t})=>{const n=se(),e=On(),[o,s]=b.useState(t);return b.useEffect(()=>{const i=e.pathname.split("/").filter(Boolean);s(t.slice(0,i.length+1))},[e,t]),b.useEffect(()=>(te.resetBreadcrumbItems=r=>{s(t),n({to:r})},()=>{delete te.resetBreadcrumbItems}),[t,n]),v.jsx(De,{items:o,onSelect:r=>{n({to:r})}})},Ht={args:{items:$s},decorators:[t=>Dn(t,"/inventory/catalog")],render:t=>v.jsx(Fn,{items:t.items}),play:async({canvasElement:t,args:{items:n}})=>{const e=xe(t),o=n[n.length-1],s=n[n.length-2];if(!o||!s)throw new Error("Items array must have at least 2 elements");const r=e.getByText(o.label);await $(r).toHaveAttribute("aria-current","page");const i=e.getByText(s.label);await nt.click(i);const a=e.getByText(s.label);await $(a).toHaveAttribute("aria-current","page");const c=dt.queryByText(o.label);await $(c).not.toBeInTheDocument();const l=o.type==="link"?o.href:o.options[0]?.href??"";b.act(()=>{te.resetBreadcrumbItems?.(l)});const u=e.getByText(o.label);await $(u).toBeInTheDocument()}},Ut={args:{items:Gs},decorators:[t=>Dn(t,"/network/vienna/router-a")],render:t=>v.jsx(Fn,{items:t.items}),play:async({canvasElement:t})=>{const n=xe(t),e=n.getByRole("button",{name:/Router A/});await $(e).toHaveAttribute("aria-current","page");const o=n.getByRole("button",{name:/Router A/});await nt.click(o);const s=await dt.findByRole("menuitem",{name:/Router A/}),r=xe(s).getByText("check");await $(r).toBeInTheDocument();const i=await dt.findByRole("menuitem",{name:/Switch B/});await nt.click(i);const a=n.getByRole("button",{name:/Switch B/});await $(a).toHaveAttribute("aria-current","page");const c=n.getByRole("button",{name:/Vienna HQ/});await nt.click(c);const l=await dt.findByRole("menuitem",{name:/Paris Office/});await nt.click(l);const u=dt.queryByRole("button",{name:/Switch B/});await $(u).not.toBeInTheDocument();const f=n.getByRole("link",{name:"Network Visibility"});await nt.click(f);const h=dt.queryByRole("button",{name:/Vienna HQ/});await $(h).not.toBeInTheDocument();const d=n.getByRole("link",{name:"Home"});await nt.click(d),b.act(()=>{te.resetBreadcrumbItems?.("/network/vienna/router-a")});const p=n.getByRole("button",{name:/Router A/});await $(p).toBeInTheDocument()}};Ht.parameters={...Ht.parameters,docs:{...Ht.parameters?.docs,source:{originalSource:`{
  args: {
    items: defaultItems
  },
  decorators: [Story => withTanStackRouter(Story, '/inventory/catalog')],
  render: args => <BreadcrumbStory items={args.items} />,
  play: async ({
    canvasElement,
    args: {
      items: initialItems
    }
  }: {
    canvasElement: HTMLElement;
    args: {
      items: DsBreadcrumbItem[];
    };
  }) => {
    const canvas = within(canvasElement);
    const lastItem = initialItems[initialItems.length - 1];
    const previousItem = initialItems[initialItems.length - 2];
    if (!lastItem || !previousItem) {
      throw new Error('Items array must have at least 2 elements');
    }

    // 1. Check last item is selected
    const lastItemElement = canvas.getByText(lastItem.label);
    await expect(lastItemElement).toHaveAttribute('aria-current', 'page');

    // 2. Click on previous item and verify last item is hidden
    const previousItemElement = canvas.getByText(previousItem.label);
    await userEvent.click(previousItemElement);

    // Verify previous item is now last and selected
    const updatedLastItem = canvas.getByText(previousItem.label);
    await expect(updatedLastItem).toHaveAttribute('aria-current', 'page');

    // Verify original last item is not visible
    const originalLastItem = screen.queryByText(lastItem.label);
    await expect(originalLastItem).not.toBeInTheDocument();

    // 3. Reset to initial state
    const lastItemHref = lastItem.type === 'link' ? lastItem.href : lastItem.options[0]?.href ?? '';
    act(() => {
      extendedWindow.resetBreadcrumbItems?.(lastItemHref);
    });

    // Verify we're back to initial state
    const resetLastItem = canvas.getByText(lastItem.label);
    await expect(resetLastItem).toBeInTheDocument();
  }
}`,...Ht.parameters?.docs?.source}}};Ut.parameters={...Ut.parameters,docs:{...Ut.parameters?.docs,source:{originalSource:`{
  args: {
    items: dropdownItems
  },
  decorators: [Story => withTanStackRouter(Story, '/network/vienna/router-a')],
  render: args => <BreadcrumbStory items={args.items} />,
  play: async ({
    canvasElement
  }) => {
    const canvas = within(canvasElement);

    // 1. Check last item (Router A) is selected
    const lastItem = canvas.getByRole('button', {
      name: /Router A/
    });
    await expect(lastItem).toHaveAttribute('aria-current', 'page');

    // 2. Check Router A is selected in dropdown
    const routerDropdown = canvas.getByRole('button', {
      name: /Router A/
    });
    await userEvent.click(routerDropdown);
    const routerMenuItem = await screen.findByRole('menuitem', {
      name: /Router A/
    });
    const routerIndicator = within(routerMenuItem).getByText('check');
    await expect(routerIndicator).toBeInTheDocument();

    // 3. Select Switch B
    const switchBMenuItem = await screen.findByRole('menuitem', {
      name: /Switch B/
    });
    await userEvent.click(switchBMenuItem);

    // 4. Verify Switch B is now selected
    const updatedLastItem = canvas.getByRole('button', {
      name: /Switch B/
    });
    await expect(updatedLastItem).toHaveAttribute('aria-current', 'page');

    // 5. Click on Vienna HQ dropdown
    const viennaDropdown = canvas.getByRole('button', {
      name: /Vienna HQ/
    });
    await userEvent.click(viennaDropdown);

    // 6. Select Paris Office
    const parisMenuItem = await screen.findByRole('menuitem', {
      name: /Paris Office/
    });
    await userEvent.click(parisMenuItem);

    // 7. Verify Switch B dropdown is gone
    const switchBDropdownAfter = screen.queryByRole('button', {
      name: /Switch B/
    });
    await expect(switchBDropdownAfter).not.toBeInTheDocument();

    // 8. Click Network Visibility
    const networkLink = canvas.getByRole('link', {
      name: 'Network Visibility'
    });
    await userEvent.click(networkLink);

    // 9. Verify Vienna HQ dropdown is gone
    const viennaDropdownAfter = screen.queryByRole('button', {
      name: /Vienna HQ/
    });
    await expect(viennaDropdownAfter).not.toBeInTheDocument();

    // 10. Click Home
    const homeLink = canvas.getByRole('link', {
      name: 'Home'
    });
    await userEvent.click(homeLink);

    // 11. Reset to initial state

    act(() => {
      extendedWindow.resetBreadcrumbItems?.('/network/vienna/router-a');
    });

    // Verify we're back to initial state
    const resetLastItem = canvas.getByRole('button', {
      name: /Router A/
    });
    await expect(resetLastItem).toBeInTheDocument();
  }
}`,...Ut.parameters?.docs?.source}}};const Pr=["Default","WithDropdown"];export{Ht as Default,Ut as WithDropdown,Pr as __namedExportsOrder,Sr as default};
