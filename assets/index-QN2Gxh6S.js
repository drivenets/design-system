import{r as b,s as S,g as z,y as j,C as k,D as A,w as T,E as C,F as X,G,i as I,H as D,I as J,J as R,K,L as V,M as Q,N as Z,O as ee}from"./index-BgwgYCXy.js";function te(e){const t={each(n){for(let s=0;s<e.frames?.length;s+=1){const r=e.frames[s];r&&n(r)}},addEventListener(n,s,r){return t.each(i=>{try{i.document.addEventListener(n,s,r)}catch{}}),()=>{try{t.removeEventListener(n,s,r)}catch{}}},removeEventListener(n,s,r){t.each(i=>{try{i.document.removeEventListener(n,s,r)}catch{}})}};return t}function ne(e){const t=e.frameElement!=null?e.parent:null;return{addEventListener:(n,s,r)=>{try{t?.addEventListener(n,s,r)}catch{}return()=>{try{t?.removeEventListener(n,s,r)}catch{}}},removeEventListener:(n,s,r)=>{try{t?.removeEventListener(n,s,r)}catch{}}}}var M="pointerdown.outside",W="focus.outside";function se(e){for(const t of e)if(I(t)&&X(t))return!0;return!1}var U=e=>"clientY"in e;function re(e,t){if(!U(t)||!e)return!1;const n=e.getBoundingClientRect();return n.width===0||n.height===0?!1:n.top<=t.clientY&&t.clientY<=n.top+n.height&&n.left<=t.clientX&&t.clientX<=n.left+n.width}function ie(e,t){return e.y<=t.y&&t.y<=e.y+e.height&&e.x<=t.x&&t.x<=e.x+e.width}function _(e,t){if(!t||!U(e))return!1;const n=t.scrollHeight>t.clientHeight,s=n&&e.clientX>t.offsetLeft+t.clientWidth,r=t.scrollWidth>t.clientWidth,i=r&&e.clientY>t.offsetTop+t.clientHeight,f={x:t.offsetLeft,y:t.offsetTop,width:t.clientWidth+(n?16:0),height:t.clientHeight+(r?16:0)},l={x:e.clientX,y:e.clientY};return ie(f,l)?s||i:!1}function oe(e,t){const{exclude:n,onFocusOutside:s,onPointerDownOutside:r,onInteractOutside:i,defer:f,followControlledElements:l=!0}=t;if(!e)return;const p=S(e),w=z(e),L=te(w),v=ne(w);function x(c,d){if(!I(d)||!d.isConnected||D(e,d)||re(e,c)||l&&J(e,d))return!1;const h=p.querySelector(`[aria-controls="${e.id}"]`);if(h){const y=R(h);if(_(c,y))return!1}const m=R(e);return _(c,m)?!1:!n?.(d)}const E=new Set,P=j(e?.getRootNode());function o(c){function d(h){const m=f&&!A()?b:B=>B(),y=h??c,N=y?.composedPath?.()??[y?.target];m(()=>{const B=P?N[0]:T(c);if(!(!e||!x(c,B))){if(r||i){const $=C(r,i);e.addEventListener(M,$,{once:!0})}Y(e,M,{bubbles:!1,cancelable:!0,detail:{originalEvent:y,contextmenu:G(y),focusable:se(N),target:B}})}})}c.pointerType==="touch"?(E.forEach(h=>h()),E.add(k(p,"click",d,{once:!0})),E.add(v.addEventListener("click",d,{once:!0})),E.add(L.addEventListener("click",d,{once:!0}))):d()}const a=new Set,O=setTimeout(()=>{a.add(k(p,"pointerdown",o,!0)),a.add(v.addEventListener("pointerdown",o,!0)),a.add(L.addEventListener("pointerdown",o,!0))},0);function g(c){(f?b:h=>h())(()=>{const h=c?.composedPath?.()??[c?.target],m=P?h[0]:T(c);if(!(!e||!x(c,m))){if(s||i){const y=C(s,i);e.addEventListener(W,y,{once:!0})}Y(e,W,{bubbles:!1,cancelable:!0,detail:{originalEvent:c,contextmenu:!1,focusable:X(m),target:m}})}})}return A()||(a.add(k(p,"focusin",g,!0)),a.add(v.addEventListener("focusin",g,!0)),a.add(L.addEventListener("focusin",g,!0))),()=>{clearTimeout(O),E.forEach(c=>c()),a.forEach(c=>c())}}function ce(e,t){const{defer:n}=t,s=n?b:i=>i(),r=[];return r.push(s(()=>{const i=typeof e=="function"?e():e;r.push(oe(i,t))})),()=>{r.forEach(i=>i?.())}}function Y(e,t,n){const s=e.ownerDocument.defaultView||window,r=new s.CustomEvent(t,n);return e.dispatchEvent(r)}function ae(e,t){const n=s=>{s.key==="Escape"&&(s.isComposing||t?.(s))};return k(S(e),"keydown",n,{capture:!0})}var q="layer:request-dismiss",u={layers:[],branches:[],recentlyRemoved:new Set,count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(e=>e.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(e){const t=this.indexOf(e),n=this.topMostPointerBlockingLayer()?this.indexOf(this.topMostPointerBlockingLayer()?.node):-1;return t<n},isTopMost(e){return this.layers[this.count()-1]?.node===e},getNestedLayers(e){return Array.from(this.layers).slice(this.indexOf(e)+1)},getLayersByType(e){return this.layers.filter(t=>t.type===e)},getNestedLayersByType(e,t){const n=this.indexOf(e);return n===-1?[]:this.layers.slice(n+1).filter(s=>s.type===t)},getParentLayerOfType(e,t){const n=this.indexOf(e);if(!(n<=0))return this.layers.slice(0,n).reverse().find(s=>s.type===t)},countNestedLayersOfType(e,t){return this.getNestedLayersByType(e,t).length},isInNestedLayer(e,t){return!!(this.getNestedLayers(e).some(s=>D(s.node,t))||this.recentlyRemoved.size>0)},isInBranch(e){return Array.from(this.branches).some(t=>D(t,e))},add(e){this.layers.push(e),this.syncLayers()},addBranch(e){this.branches.push(e)},remove(e){const t=this.indexOf(e);t<0||(this.recentlyRemoved.add(e),Q(()=>this.recentlyRemoved.delete(e)),t<this.count()-1&&this.getNestedLayers(e).forEach(s=>u.dismiss(s.node,e)),this.layers.splice(t,1),this.syncLayers())},removeBranch(e){const t=this.branches.indexOf(e);t>=0&&this.branches.splice(t,1)},syncLayers(){this.layers.forEach((e,t)=>{e.node.style.setProperty("--layer-index",`${t}`),e.node.removeAttribute("data-nested"),e.node.removeAttribute("data-has-nested"),this.getParentLayerOfType(e.node,e.type)&&e.node.setAttribute("data-nested",e.type);const s=this.countNestedLayersOfType(e.node,e.type);s>0&&e.node.setAttribute("data-has-nested",e.type),e.node.style.setProperty("--nested-layer-count",`${s}`)})},indexOf(e){return this.layers.findIndex(t=>t.node===e)},dismiss(e,t){const n=this.indexOf(e);if(n===-1)return;const s=this.layers[n];le(e,q,r=>{s.requestDismiss?.(r),r.defaultPrevented||s?.dismiss()}),ue(e,q,{originalLayer:e,targetLayer:t,originalIndex:n,targetIndex:t?this.indexOf(t):-1}),this.syncLayers()},clear(){this.remove(this.layers[0].node)}};function ue(e,t,n){const s=e.ownerDocument.defaultView||window,r=new s.CustomEvent(t,{cancelable:!0,bubbles:!0,detail:n});return e.dispatchEvent(r)}function le(e,t,n){e.addEventListener(t,n,{once:!0})}var F;function H(){u.layers.forEach(({node:e})=>{e.style.pointerEvents=u.isBelowPointerBlockingLayer(e)?"none":"auto"})}function de(e){e.style.pointerEvents=""}function fe(e,t){const n=S(e),s=[];return u.hasPointerBlockingLayer()&&!n.body.hasAttribute("data-inert")&&(F=document.body.style.pointerEvents,queueMicrotask(()=>{n.body.style.pointerEvents="none",n.body.setAttribute("data-inert","")})),t?.forEach(r=>{const[i,f]=Z(()=>{const l=r();return I(l)?l:null},{timeout:1e3});i.then(l=>s.push(ee(l,{pointerEvents:"auto"}))),s.push(f)}),()=>{u.hasPointerBlockingLayer()||(queueMicrotask(()=>{n.body.style.pointerEvents=F,n.body.removeAttribute("data-inert"),n.body.style.length===0&&n.body.removeAttribute("style")}),s.forEach(r=>r()))}}function he(e,t){const{warnOnMissingNode:n=!0}=t;if(n&&!e){V("[@zag-js/dismissable] node is `null` or `undefined`");return}if(!e)return;const{onDismiss:s,onRequestDismiss:r,pointerBlocking:i,exclude:f,debug:l,type:p="dialog"}=t,w={dismiss:s,node:e,type:p,pointerBlocking:i,requestDismiss:r};u.add(w),H();function L(o){const a=T(o.detail.originalEvent);u.isBelowPointerBlockingLayer(e)||u.isInBranch(a)||(t.onPointerDownOutside?.(o),t.onInteractOutside?.(o),!o.defaultPrevented&&(l&&console.log("onPointerDownOutside:",o.detail.originalEvent),s?.()))}function v(o){const a=T(o.detail.originalEvent);u.isInBranch(a)||(t.onFocusOutside?.(o),t.onInteractOutside?.(o),!o.defaultPrevented&&(l&&console.log("onFocusOutside:",o.detail.originalEvent),s?.()))}function x(o){u.isTopMost(e)&&(t.onEscapeKeyDown?.(o),!o.defaultPrevented&&s&&(o.preventDefault(),s()))}function E(o){if(!e)return!1;const a=typeof f=="function"?f():f,O=Array.isArray(a)?a:[a],g=t.persistentElements?.map(c=>c()).filter(I);return g&&O.push(...g),O.some(c=>D(c,o))||u.isInNestedLayer(e,o)}const P=[i?fe(e,t.persistentElements):void 0,ae(e,x),ce(e,{exclude:E,onFocusOutside:v,onPointerDownOutside:L,defer:t.defer})];return()=>{u.remove(e),H(),de(e),P.forEach(o=>o?.())}}function Ee(e,t){const{defer:n}=t,s=n?b:i=>i(),r=[];return r.push(s(()=>{const i=K(e)?e():e;r.push(he(i,t))})),()=>{r.forEach(i=>i?.())}}function me(e,t={}){const{defer:n}=t,s=n?b:i=>i(),r=[];return r.push(s(()=>{const i=K(e)?e():e;if(!i){V("[@zag-js/dismissable] branch node is `null` or `undefined`");return}u.addBranch(i),r.push(()=>{u.removeBranch(i)})})),()=>{r.forEach(i=>i?.())}}export{me as a,Ee as t};
