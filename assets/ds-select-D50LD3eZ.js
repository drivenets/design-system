import{j as o}from"./jsx-runtime-u17CrQMm.js";import{r as f}from"./iframe-CElvGea5.js";import{c as Ve}from"./index-C1hHQqhM.js";import{D as j}from"./ds-icon-Cmuf6_qW.js";import{D as Ne}from"./ds-checkbox-qzsvHBt9.js";import{D as Le}from"./ds-button-ApHgQ92K.js";import{D as te}from"./ds-chip-D0eowyMj.js";import{c as ee,a as y,d as Ae,b as Ge,u as ke}from"./use-locale-context-Ce3yrVmV.js";import{D as le}from"./ds-typography-B325Y5ks.js";import{D as Fe}from"./ds-text-input-Cz4ddSKO.js";import{L as de,c as _e}from"./list-collection--HWmoM2c.js";import{P as T,H as De,w as ie,aG as xe,X as ne,aH as He,aI as Y,v as we,j as g,a8 as je,aJ as Me,o as Ue,d as qe,aK as se,r as $,aL as We,a5 as Ke,t as $e,z as Be,aM as ze,p as q,m as Ye,Q as Je,U as Qe}from"./index-Ct7KYQ5y.js";import{g as Xe,a as ae}from"./index-D07wfhPo.js";import{t as Ze}from"./index-B0Fukbpw.js";import{u as ue}from"./use-field-context-CxTo00Gd.js";import{s as et,P as tt}from"./portal-CjOdhtO-.js";import{c as ge}from"./create-split-props-u5h9OPvL.js";import{a as he,u as lt,P as it}from"./use-presence-DiLPE6Jz.js";const[nt,C]=ee({name:"SelectContext",hookName:"useSelectContext",providerName:"<SelectProvider />"}),me=f.forwardRef((e,t)=>{const l=C(),i=T(l.getClearTriggerProps(),e);return o.jsx(y.button,{...i,ref:t})});me.displayName="SelectClearTrigger";const pe=f.forwardRef((e,t)=>{const l=C(),i=he(),n=T(l.getContentProps(),i.getPresenceProps(),e);return i.unmounted?null:o.jsx(y.div,{...n,ref:Ae(i.ref,t)})});pe.displayName="SelectContent";const Ie=f.forwardRef((e,t)=>{const l=C(),i=T(l.getControlProps(),e);return o.jsx(y.div,{...i,ref:t})});Ie.displayName="SelectControl";const ve=f.forwardRef((e,t)=>{const l=C(),i=T(l.getHiddenSelectProps(),e),n=l.value.length===0,r=ue();return o.jsxs(y.select,{"aria-describedby":r?.ariaDescribedby,...i,ref:t,children:[n&&o.jsx("option",{value:""}),l.collection.items.map((d,a)=>o.jsx("option",{value:l.collection.getItemValue(d)??"",disabled:l.collection.getItemDisabled(d),children:l.collection.stringifyItem(d)},a))]})});ve.displayName="SelectHiddenSelect";const fe=f.forwardRef((e,t)=>{const l=C(),i=T(l.getIndicatorProps(),e);return o.jsx(y.div,{...i,ref:t})});fe.displayName="SelectIndicator";const[st]=ee({name:"SelectItemContext",hookName:"useSelectItemContext",providerName:"<SelectItemProvider />"}),[at,ot]=ee({name:"SelectItemPropsContext",hookName:"useSelectItemPropsContext",providerName:"<SelectItemPropsProvider />"}),rt=ge(),Ee=f.forwardRef((e,t)=>{const[l,i]=rt(e,["item","persistFocus"]),n=C(),r=T(n.getItemProps(l),i),d=n.getItemState(l);return o.jsx(at,{value:l,children:o.jsx(st,{value:d,children:o.jsx(y.div,{...r,ref:t})})})});Ee.displayName="SelectItem";const Te=f.forwardRef((e,t)=>{const l=C(),i=ot(),n=T(l.getItemTextProps(i),e);return o.jsx(y.span,{...n,ref:t})});Te.displayName="SelectItemText";const ye=f.forwardRef((e,t)=>{const l=C(),i=T(l.getPositionerProps(),e);return he().unmounted?null:o.jsx(y.div,{...i,ref:t})});ye.displayName="SelectPositioner";var ct=Ue("select").parts("label","positioner","trigger","indicator","clearTrigger","item","itemText","itemIndicator","itemGroup","itemGroupLabel","list","content","root","control","valueText"),v=ct.build(),Ce=e=>new de(e);Ce.empty=()=>new de({items:[]});var dt=e=>e.ids?.root??`select:${e.id}`,J=e=>e.ids?.content??`select:${e.id}:content`,Q=e=>e.ids?.trigger??`select:${e.id}:trigger`,Se=e=>e.ids?.clearTrigger??`select:${e.id}:clear-trigger`,M=e=>e.ids?.label??`select:${e.id}:label`,ut=e=>e.ids?.control??`select:${e.id}:control`,X=(e,t)=>e.ids?.item?.(t)??`select:${e.id}:option:${t}`,Z=e=>e.ids?.hiddenSelect??`select:${e.id}:select`,Oe=e=>e.ids?.positioner??`select:${e.id}:positioner`,gt=(e,t)=>e.ids?.itemGroup?.(t)??`select:${e.id}:optgroup:${t}`,oe=(e,t)=>e.ids?.itemGroupLabel?.(t)??`select:${e.id}:optgroup-label:${t}`,B=e=>e.getById(Z(e)),D=e=>e.getById(J(e)),L=e=>e.getById(Q(e)),ht=e=>e.getById(Se(e)),re=e=>e.getById(Oe(e)),z=(e,t)=>t==null?null:e.getById(X(e,t));function mt(e,t){const{context:l,prop:i,scope:n,state:r,computed:d,send:a}=e,h=i("disabled")||l.get("fieldsetDisabled"),I=!!i("invalid"),b=!!i("required"),m=!!i("readOnly"),S=i("composite"),P=i("collection"),O=r.hasTag("open"),A=r.matches("focused"),R=l.get("highlightedValue"),H=l.get("highlightedItem"),W=l.get("selectedItems"),_=l.get("currentPlacement"),V=d("isTypingAhead"),u=d("isInteractive"),G=R?X(n,R):void 0;function k(s){const c=P.getItemDisabled(s.item),p=P.getItemValue(s.item);return Me(p,()=>`[zag-js] No value found for item ${JSON.stringify(s.item)}`),{value:p,disabled:!!(h||c),highlighted:R===p,selected:l.get("value").includes(p)}}const w=Xe({...i("positioning"),placement:_});return{open:O,focused:A,empty:l.get("value").length===0,highlightedItem:H,highlightedValue:R,selectedItems:W,hasSelectedItems:d("hasSelectedItems"),value:l.get("value"),valueAsString:d("valueAsString"),collection:P,multiple:!!i("multiple"),disabled:!!h,reposition(s={}){a({type:"POSITIONING.SET",options:s})},focus(){L(n)?.focus({preventScroll:!0})},setOpen(s){r.hasTag("open")!==s&&a({type:s?"OPEN":"CLOSE"})},selectValue(s){a({type:"ITEM.SELECT",value:s})},setValue(s){a({type:"VALUE.SET",value:s})},selectAll(){a({type:"VALUE.SET",value:P.getValues()})},setHighlightValue(s){a({type:"HIGHLIGHTED_VALUE.SET",value:s})},clearHighlightValue(){a({type:"HIGHLIGHTED_VALUE.CLEAR"})},clearValue(s){a(s?{type:"ITEM.CLEAR",value:s}:{type:"VALUE.CLEAR"})},getItemState:k,getRootProps(){return t.element({...v.root.attrs,dir:i("dir"),id:dt(n),"data-invalid":g(I),"data-readonly":g(m)})},getLabelProps(){return t.label({dir:i("dir"),id:M(n),...v.label.attrs,"data-disabled":g(h),"data-invalid":g(I),"data-readonly":g(m),"data-required":g(b),htmlFor:Z(n),onClick(s){s.defaultPrevented||h||L(n)?.focus({preventScroll:!0})}})},getControlProps(){return t.element({...v.control.attrs,dir:i("dir"),id:ut(n),"data-state":O?"open":"closed","data-focus":g(A),"data-disabled":g(h),"data-invalid":g(I)})},getValueTextProps(){return t.element({...v.valueText.attrs,dir:i("dir"),"data-disabled":g(h),"data-invalid":g(I),"data-focus":g(A)})},getTriggerProps(){return t.button({id:Q(n),disabled:h,dir:i("dir"),type:"button",role:"combobox","aria-controls":J(n),"aria-expanded":O,"aria-haspopup":"listbox","data-state":O?"open":"closed","aria-invalid":I,"aria-required":b,"aria-labelledby":M(n),...v.trigger.attrs,"data-disabled":g(h),"data-invalid":g(I),"data-readonly":g(m),"data-placement":_,"data-placeholder-shown":g(!d("hasSelectedItems")),onClick(s){u&&(s.defaultPrevented||a({type:"TRIGGER.CLICK"}))},onFocus(){a({type:"TRIGGER.FOCUS"})},onBlur(){a({type:"TRIGGER.BLUR"})},onKeyDown(s){if(s.defaultPrevented||!u)return;const p={ArrowUp(){a({type:"TRIGGER.ARROW_UP"})},ArrowDown(F){a({type:F.altKey?"OPEN":"TRIGGER.ARROW_DOWN"})},ArrowLeft(){a({type:"TRIGGER.ARROW_LEFT"})},ArrowRight(){a({type:"TRIGGER.ARROW_RIGHT"})},Home(){a({type:"TRIGGER.HOME"})},End(){a({type:"TRIGGER.END"})},Enter(){a({type:"TRIGGER.ENTER"})},Space(F){a(V?{type:"TRIGGER.TYPEAHEAD",key:F.key}:{type:"TRIGGER.ENTER"})}}[ne(s,{dir:i("dir"),orientation:"vertical"})];if(p){p(s),s.preventDefault();return}Y.isValidEvent(s)&&(a({type:"TRIGGER.TYPEAHEAD",key:s.key}),s.preventDefault())}})},getIndicatorProps(){return t.element({...v.indicator.attrs,dir:i("dir"),"aria-hidden":!0,"data-state":O?"open":"closed","data-disabled":g(h),"data-invalid":g(I),"data-readonly":g(m)})},getItemProps(s){const c=k(s);return t.element({id:X(n,c.value),role:"option",...v.item.attrs,dir:i("dir"),"data-value":c.value,"aria-selected":c.selected,"data-state":c.selected?"checked":"unchecked","data-highlighted":g(c.highlighted),"data-disabled":g(c.disabled),"aria-disabled":je(c.disabled),onPointerMove(p){c.disabled||p.pointerType!=="mouse"||c.value!==R&&a({type:"ITEM.POINTER_MOVE",value:c.value})},onClick(p){p.defaultPrevented||c.disabled||a({type:"ITEM.CLICK",src:"pointerup",value:c.value})},onPointerLeave(p){c.disabled||s.persistFocus||p.pointerType!=="mouse"||!e.event.previous()?.type.includes("POINTER")||a({type:"ITEM.POINTER_LEAVE"})}})},getItemTextProps(s){const c=k(s);return t.element({...v.itemText.attrs,"data-state":c.selected?"checked":"unchecked","data-disabled":g(c.disabled),"data-highlighted":g(c.highlighted)})},getItemIndicatorProps(s){const c=k(s);return t.element({"aria-hidden":!0,...v.itemIndicator.attrs,"data-state":c.selected?"checked":"unchecked",hidden:!c.selected})},getItemGroupLabelProps(s){const{htmlFor:c}=s;return t.element({...v.itemGroupLabel.attrs,id:oe(n,c),dir:i("dir"),role:"presentation"})},getItemGroupProps(s){const{id:c}=s;return t.element({...v.itemGroup.attrs,"data-disabled":g(h),id:gt(n,c),"aria-labelledby":oe(n,c),role:"group",dir:i("dir")})},getClearTriggerProps(){return t.button({...v.clearTrigger.attrs,id:Se(n),type:"button","aria-label":"Clear value","data-invalid":g(I),disabled:h,hidden:!d("hasSelectedItems"),dir:i("dir"),onClick(s){s.defaultPrevented||a({type:"CLEAR.CLICK"})}})},getHiddenSelectProps(){const s=l.get("value"),c=i("multiple")?s:s?.[0];return t.select({name:i("name"),form:i("form"),disabled:h,multiple:i("multiple"),required:i("required"),"aria-hidden":!0,id:Z(n),defaultValue:c,style:we,tabIndex:-1,onFocus(){L(n)?.focus({preventScroll:!0})},"aria-labelledby":M(n)})},getPositionerProps(){return t.element({...v.positioner.attrs,dir:i("dir"),id:Oe(n),style:w.floating})},getContentProps(){return t.element({hidden:!O,dir:i("dir"),id:J(n),role:S?"listbox":"dialog",...v.content.attrs,"data-state":O?"open":"closed","data-placement":_,"data-activedescendant":G,"aria-activedescendant":S?G:void 0,"aria-multiselectable":i("multiple")&&S?!0:void 0,"aria-labelledby":M(n),tabIndex:0,onKeyDown(s){if(!u||!De(s.currentTarget,ie(s)))return;if(s.key==="Tab"&&!xe(s)){s.preventDefault();return}const c={ArrowUp(){a({type:"CONTENT.ARROW_UP"})},ArrowDown(){a({type:"CONTENT.ARROW_DOWN"})},Home(){a({type:"CONTENT.HOME"})},End(){a({type:"CONTENT.END"})},Enter(){a({type:"ITEM.CLICK",src:"keydown.enter"})},Space(K){V?a({type:"CONTENT.TYPEAHEAD",key:K.key}):c.Enter?.(K)}},p=c[ne(s)];if(p){p(s),s.preventDefault();return}const F=ie(s);He(F)||Y.isValidEvent(s)&&(a({type:"CONTENT.TYPEAHEAD",key:s.key}),s.preventDefault())}})},getListProps(){return t.element({...v.list.attrs,tabIndex:0,role:S?void 0:"listbox","aria-labelledby":Q(n),"aria-activedescendant":S?void 0:G,"aria-multiselectable":!S&&i("multiple")?!0:void 0})}}}var{and:x,not:N,or:pt}=Ye(),It=qe({props({props:e}){return{loopFocus:!1,closeOnSelect:!e.multiple,composite:!0,defaultValue:[],...e,collection:e.collection??Ce.empty(),positioning:{placement:"bottom-start",gutter:8,...e.positioning}}},context({prop:e,bindable:t}){return{value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),isEqual:Be,onChange(l){const i=e("collection").findMany(l);return e("onValueChange")?.({value:l,items:i})}})),highlightedValue:t(()=>({defaultValue:e("defaultHighlightedValue")||null,value:e("highlightedValue"),onChange(l){e("onHighlightChange")?.({highlightedValue:l,highlightedItem:e("collection").find(l),highlightedIndex:e("collection").indexOf(l)})}})),currentPlacement:t(()=>({defaultValue:void 0})),fieldsetDisabled:t(()=>({defaultValue:!1})),highlightedItem:t(()=>({defaultValue:null})),selectedItems:t(()=>{const l=e("value")??e("defaultValue")??[];return{defaultValue:e("collection").findMany(l)}})}},refs(){return{typeahead:{...Y.defaultOptions}}},computed:{hasSelectedItems:({context:e})=>e.get("value").length>0,isTypingAhead:({refs:e})=>e.get("typeahead").keysSoFar!=="",isDisabled:({prop:e,context:t})=>!!e("disabled")||!!t.get("fieldsetDisabled"),isInteractive:({prop:e})=>!(e("disabled")||e("readOnly")),valueAsString:({context:e,prop:t})=>t("collection").stringifyItems(e.get("selectedItems"))},initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"idle"},entry:["syncSelectElement"],watch({context:e,prop:t,track:l,action:i}){l([()=>e.get("value").toString()],()=>{i(["syncSelectedItems","syncSelectElement","dispatchChangeEvent"])}),l([()=>t("open")],()=>{i(["toggleVisibility"])}),l([()=>e.get("highlightedValue")],()=>{i(["syncHighlightedItem"])}),l([()=>t("collection").toString()],()=>{i(["syncCollection"])})},on:{"HIGHLIGHTED_VALUE.SET":{actions:["setHighlightedItem"]},"HIGHLIGHTED_VALUE.CLEAR":{actions:["clearHighlightedItem"]},"ITEM.SELECT":{actions:["selectItem"]},"ITEM.CLEAR":{actions:["clearItem"]},"VALUE.SET":{actions:["setSelectedItems"]},"VALUE.CLEAR":{actions:["clearSelectedItems"]},"CLEAR.CLICK":{actions:["clearSelectedItems","focusTriggerEl"]}},effects:["trackFormControlState"],states:{idle:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{target:"open",actions:["setInitialFocus"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus","highlightFirstSelectedItem"]}],"TRIGGER.FOCUS":{target:"focused"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}]}},focused:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{guard:"isTriggerArrowUpEvent",target:"open",actions:["setInitialFocus","highlightComputedLastItem"]},{guard:pt("isTriggerArrowDownEvent","isTriggerEnterEvent"),target:"open",actions:["setInitialFocus","highlightComputedFirstItem"]},{target:"open",actions:["setInitialFocus"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}],"TRIGGER.BLUR":{target:"idle"},"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightFirstSelectedItem"]}],"TRIGGER.ENTER":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_UP":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedLastItem"]}],"TRIGGER.ARROW_DOWN":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_LEFT":[{guard:x(N("multiple"),"hasSelectedItems"),actions:["selectPreviousItem"]},{guard:N("multiple"),actions:["selectLastItem"]}],"TRIGGER.ARROW_RIGHT":[{guard:x(N("multiple"),"hasSelectedItems"),actions:["selectNextItem"]},{guard:N("multiple"),actions:["selectFirstItem"]}],"TRIGGER.HOME":{guard:N("multiple"),actions:["selectFirstItem"]},"TRIGGER.END":{guard:N("multiple"),actions:["selectLastItem"]},"TRIGGER.TYPEAHEAD":{guard:N("multiple"),actions:["selectMatchingItem"]}}},open:{tags:["open"],exit:["scrollContentToTop"],effects:["trackDismissableElement","computePlacement","scrollToHighlightedItem"],on:{"CONTROLLED.CLOSE":[{guard:"restoreFocus",target:"focused",actions:["focusTriggerEl","clearHighlightedItem"]},{target:"idle",actions:["clearHighlightedItem"]}],CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{guard:"restoreFocus",target:"focused",actions:["invokeOnClose","focusTriggerEl","clearHighlightedItem"]},{target:"idle",actions:["invokeOnClose","clearHighlightedItem"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","clearHighlightedItem"]}],"ITEM.CLICK":[{guard:x("closeOnSelect","isOpenControlled"),actions:["selectHighlightedItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectHighlightedItem","invokeOnClose","focusTriggerEl","clearHighlightedItem"]},{actions:["selectHighlightedItem"]}],"CONTENT.HOME":{actions:["highlightFirstItem"]},"CONTENT.END":{actions:["highlightLastItem"]},"CONTENT.ARROW_DOWN":[{guard:x("hasHighlightedItem","loop","isLastItemHighlighted"),actions:["highlightFirstItem"]},{guard:"hasHighlightedItem",actions:["highlightNextItem"]},{actions:["highlightFirstItem"]}],"CONTENT.ARROW_UP":[{guard:x("hasHighlightedItem","loop","isFirstItemHighlighted"),actions:["highlightLastItem"]},{guard:"hasHighlightedItem",actions:["highlightPreviousItem"]},{actions:["highlightLastItem"]}],"CONTENT.TYPEAHEAD":{actions:["highlightMatchingItem"]},"ITEM.POINTER_MOVE":{actions:["highlightItem"]},"ITEM.POINTER_LEAVE":{actions:["clearHighlightedItem"]},"POSITIONING.SET":{actions:["reposition"]}}}},implementations:{guards:{loop:({prop:e})=>!!e("loopFocus"),multiple:({prop:e})=>!!e("multiple"),hasSelectedItems:({computed:e})=>!!e("hasSelectedItems"),hasHighlightedItem:({context:e})=>e.get("highlightedValue")!=null,isFirstItemHighlighted:({context:e,prop:t})=>e.get("highlightedValue")===t("collection").firstValue,isLastItemHighlighted:({context:e,prop:t})=>e.get("highlightedValue")===t("collection").lastValue,closeOnSelect:({prop:e,event:t})=>!!(t.closeOnSelect??e("closeOnSelect")),restoreFocus:({event:e})=>ce(e),isOpenControlled:({prop:e})=>e("open")!==void 0,isTriggerClickEvent:({event:e})=>e.previousEvent?.type==="TRIGGER.CLICK",isTriggerEnterEvent:({event:e})=>e.previousEvent?.type==="TRIGGER.ENTER",isTriggerArrowUpEvent:({event:e})=>e.previousEvent?.type==="TRIGGER.ARROW_UP",isTriggerArrowDownEvent:({event:e})=>e.previousEvent?.type==="TRIGGER.ARROW_DOWN"},effects:{trackFormControlState({context:e,scope:t}){return $e(B(t),{onFieldsetDisabledChange(l){e.set("fieldsetDisabled",l)},onFormReset(){const l=e.initial("value");e.set("value",l)}})},trackDismissableElement({scope:e,send:t,prop:l}){const i=()=>D(e);let n=!0;return Ze(i,{type:"listbox",defer:!0,exclude:[L(e),ht(e)],onFocusOutside:l("onFocusOutside"),onPointerDownOutside:l("onPointerDownOutside"),onInteractOutside(r){l("onInteractOutside")?.(r),n=!(r.detail.focusable||r.detail.contextmenu)},onDismiss(){t({type:"CLOSE",src:"interact-outside",restoreFocus:n})}})},computePlacement({context:e,prop:t,scope:l}){const i=t("positioning");return e.set("currentPlacement",i.placement),ae(()=>L(l),()=>re(l),{defer:!0,...i,onComplete(d){e.set("currentPlacement",d.placement)}})},scrollToHighlightedItem({context:e,prop:t,scope:l,event:i}){const n=d=>{const a=e.get("highlightedValue");if(a==null||i.current().type.includes("POINTER"))return;const h=D(l),I=t("scrollToIndexFn");if(I){const m=t("collection").indexOf(a);I?.({index:m,immediate:d,getElement:()=>z(l,a)});return}const b=z(l,a);ze(b,{rootEl:h,block:"nearest"})};return $(()=>n(!0)),Ke(()=>D(l),{defer:!0,attributes:["data-activedescendant"],callback(){n(!1)}})}},actions:{reposition({context:e,prop:t,scope:l,event:i}){const n=()=>re(l);ae(L(l),n,{...t("positioning"),...i.options,defer:!0,listeners:!1,onComplete(r){e.set("currentPlacement",r.placement)}})},toggleVisibility({send:e,prop:t,event:l}){e({type:t("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:l})},highlightPreviousItem({context:e,prop:t}){const l=e.get("highlightedValue");if(l==null)return;const i=t("collection").getPreviousValue(l,1,t("loopFocus"));i!=null&&e.set("highlightedValue",i)},highlightNextItem({context:e,prop:t}){const l=e.get("highlightedValue");if(l==null)return;const i=t("collection").getNextValue(l,1,t("loopFocus"));i!=null&&e.set("highlightedValue",i)},highlightFirstItem({context:e,prop:t}){const l=t("collection").firstValue;e.set("highlightedValue",l)},highlightLastItem({context:e,prop:t}){const l=t("collection").lastValue;e.set("highlightedValue",l)},setInitialFocus({scope:e}){$(()=>{We({root:D(e)})?.focus({preventScroll:!0})})},focusTriggerEl({event:e,scope:t}){ce(e)&&$(()=>{L(t)?.focus({preventScroll:!0})})},selectHighlightedItem({context:e,prop:t,event:l}){let i=l.value??e.get("highlightedValue");if(i==null||!t("collection").has(i))return;t("onSelect")?.({value:i}),i=t("deselectable")&&!t("multiple")&&e.get("value").includes(i)?null:i,e.set("value",r=>i==null?[]:t("multiple")?se(r,i):[i])},highlightComputedFirstItem({context:e,prop:t,computed:l}){const i=t("collection"),n=l("hasSelectedItems")?i.sort(e.get("value"))[0]:i.firstValue;e.set("highlightedValue",n)},highlightComputedLastItem({context:e,prop:t,computed:l}){const i=t("collection"),n=l("hasSelectedItems")?i.sort(e.get("value"))[0]:i.lastValue;e.set("highlightedValue",n)},highlightFirstSelectedItem({context:e,prop:t,computed:l}){if(!l("hasSelectedItems"))return;const i=t("collection").sort(e.get("value"))[0];e.set("highlightedValue",i)},highlightItem({context:e,event:t}){e.set("highlightedValue",t.value)},highlightMatchingItem({context:e,prop:t,event:l,refs:i}){const n=t("collection").search(l.key,{state:i.get("typeahead"),currentValue:e.get("highlightedValue")});n!=null&&e.set("highlightedValue",n)},setHighlightedItem({context:e,event:t}){e.set("highlightedValue",t.value)},clearHighlightedItem({context:e}){e.set("highlightedValue",null)},selectItem({context:e,prop:t,event:l}){t("onSelect")?.({value:l.value});const n=t("deselectable")&&!t("multiple")&&e.get("value").includes(l.value)?null:l.value;e.set("value",r=>n==null?[]:t("multiple")?se(r,n):[n])},clearItem({context:e,event:t}){e.set("value",l=>l.filter(i=>i!==t.value))},setSelectedItems({context:e,event:t}){e.set("value",t.value)},clearSelectedItems({context:e}){e.set("value",[])},selectPreviousItem({context:e,prop:t}){const[l]=e.get("value"),i=t("collection").getPreviousValue(l);i&&e.set("value",[i])},selectNextItem({context:e,prop:t}){const[l]=e.get("value"),i=t("collection").getNextValue(l);i&&e.set("value",[i])},selectFirstItem({context:e,prop:t}){const l=t("collection").firstValue;l&&e.set("value",[l])},selectLastItem({context:e,prop:t}){const l=t("collection").lastValue;l&&e.set("value",[l])},selectMatchingItem({context:e,prop:t,event:l,refs:i}){const n=t("collection").search(l.key,{state:i.get("typeahead"),currentValue:e.get("value")[0]});n!=null&&e.set("value",[n])},scrollContentToTop({prop:e,scope:t}){if(e("scrollToIndexFn")){const l=e("collection").firstValue;e("scrollToIndexFn")?.({index:0,immediate:!0,getElement:()=>z(t,l)})}else D(t)?.scrollTo(0,0)},invokeOnOpen({prop:e,context:t}){e("onOpenChange")?.({open:!0,value:t.get("value")})},invokeOnClose({prop:e,context:t}){e("onOpenChange")?.({open:!1,value:t.get("value")})},syncSelectElement({context:e,prop:t,scope:l}){const i=B(l);if(i){if(e.get("value").length===0&&!t("multiple")){i.selectedIndex=-1;return}for(const n of i.options)n.selected=e.get("value").includes(n.value)}},syncCollection({context:e,prop:t}){const l=t("collection"),i=l.find(e.get("highlightedValue"));i&&e.set("highlightedItem",i);const n=l.findMany(e.get("value"));e.set("selectedItems",n)},syncSelectedItems({context:e,prop:t}){const l=t("collection"),i=e.get("selectedItems"),r=e.get("value").map(d=>i.find(h=>l.getItemValue(h)===d)||l.find(d));e.set("selectedItems",r)},syncHighlightedItem({context:e,prop:t}){const l=t("collection"),i=e.get("highlightedValue"),n=i?l.find(i):null;e.set("highlightedItem",n)},dispatchChangeEvent({scope:e}){queueMicrotask(()=>{const t=B(e);if(!t)return;const l=e.getWin(),i=new l.Event("change",{bubbles:!0,composed:!0});t.dispatchEvent(i)})}}}});function ce(e){const t=e.restoreFocus??e.previousEvent?.restoreFocus;return t==null||!!t}q()(["closeOnSelect","collection","composite","defaultHighlightedValue","defaultOpen","defaultValue","deselectable","dir","disabled","form","getRootNode","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onSelect","onValueChange","open","positioning","readOnly","required","scrollToIndexFn","value"]);q()(["item","persistFocus"]);q()(["id"]);q()(["htmlFor"]);const vt=e=>{const t=f.useId(),{dir:l}=Ge(),{getRootNode:i}=ke(),n=ue(),r={id:t,ids:{label:n?.ids.label,hiddenSelect:n?.ids.control},disabled:n?.disabled,readOnly:n?.readOnly,invalid:n?.invalid,required:n?.required,dir:l,getRootNode:i,...e},d=Je(It,r);return mt(d,Qe)},ft=(e,t)=>{const[l,i]=et(e),[{value:n},r]=ge()(i,["value"]),d=lt(T({present:n.open},l)),a=T(n.getRootProps(),r);return o.jsx(nt,{value:n,children:o.jsx(it,{value:d,children:o.jsx(y.div,{...a,ref:t})})})},Et=f.forwardRef(ft),Re=f.forwardRef((e,t)=>{const l=C(),i=T(l.getTriggerProps(),e);return o.jsx(y.button,{...i,ref:t})});Re.displayName="SelectTrigger";const be=f.forwardRef((e,t)=>{const{children:l,placeholder:i,...n}=e,r=C(),d=T(r.getValueTextProps(),n);return o.jsx(y.span,{...d,ref:t,children:l||r.valueAsString||i})});be.displayName="SelectValueText";const Tt="_control_zayfb_41",yt="_triggerIcon_zayfb_54",Ct="_clearIcon_zayfb_77",St="_small_zayfb_84",Ot="_trigger_zayfb_54",Rt="_content_zayfb_129",bt="_searchInput_zayfb_177",Pt="_viewport_zayfb_221",Vt="_item_zayfb_81",Nt="_itemIcon_zayfb_245",Lt="_valueText_zayfb_249",At="_multiSelectItemsContainer_zayfb_259",E={control:Tt,triggerIcon:yt,clearIcon:Ct,small:St,trigger:Ot,content:Rt,searchInput:bt,viewport:Pt,item:Vt,itemIcon:Nt,valueText:Lt,multiSelectItemsContainer:At};function Pe({showAll:e,onShowAll:t,onValueChange:l,count:i}){const{collection:n,value:r}=C();if(!r.length)return null;const d=e?r:r.slice(0,i);return o.jsxs("div",{className:E.multiSelectItemsContainer,children:[d.map(a=>{const h=n.find(a);if(!h)return null;const I=()=>{const b=r.filter(m=>m!==h.value);l?.(b)};return o.jsx(te,{label:h.label,onDelete:I},a)}),!e&&r.length>i&&o.jsx(te,{label:`+${String(r.length-i)}`,onClick:t,size:"small"}),o.jsx(Le,{design:"v1.2",buttonType:"tertiary",variant:"ghost",size:"small",onClick:()=>l?.([]),children:"Clear All"})]})}Pe.__docgenInfo={description:"",methods:[],displayName:"SelectItemsChips",props:{showAll:{required:!0,tsType:{name:"boolean"},description:""},onValueChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: SelectOptionValue[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"SelectOptionValue[]"},name:"value"}],return:{name:"void"}}},description:""},onShowAll:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},count:{required:!0,tsType:{name:"number"},description:""}}};const Gt=13,U="__INTERNAL_SELECT_ALL_VALUE__",kt={label:"All",value:U},Ft=({id:e,options:t,value:l,style:i,size:n,clearable:r,onClear:d,onBlur:a,className:h,placeholder:I="Click to select a value",disabled:b,...m})=>{const[S,P]=f.useState(""),[O,A]=f.useState(!1),R=m.multiple?[kt,...t]:t,H=_e({items:R,itemToValue:u=>u.value}),W=R.filter(u=>u.label.toLowerCase().includes(S.toLowerCase())),_=Array.isArray(l)?l:[l].filter(u=>!!u),V=vt({collection:H,disabled:b,multiple:m.multiple,value:_,ids:{trigger:e},onOpenChange:()=>{P(""),A(!1)},onValueChange:u=>{if(!m.multiple){m.onValueChange?.(u.value[0]??"");return}if(u.value.includes(U)){const s=V.selectedItems.length===t.length?[]:t.map(c=>c.value);m.onValueChange?.(s);return}const k=u.value.filter(w=>w!==U);m.onValueChange?.(k)}});return o.jsxs(Et,{value:V,lazyMount:!0,children:[o.jsxs(Ie,{className:Ve(E.control,n==="small"&&E.small,h),style:i,onBlur:a,onKeyDown:u=>{r&&(V.open||(u.key==="Backspace"||u.key==="Delete")&&(m.multiple?m.onValueChange?.([]):m.onValueChange?.(""),d?.()))},children:[o.jsxs(Re,{id:e,className:E.trigger,"aria-labelledby":null,children:[o.jsx(le,{className:E.valueText,variant:"body-sm-reg",asChild:!0,children:o.jsx(be,{placeholder:I})}),o.jsx(fe,{className:E.triggerIcon,children:o.jsx(j,{icon:"keyboard_arrow_down",size:n==="small"?"small":"medium"})})]}),r&&o.jsx(me,{className:E.clearIcon,onClick:d,children:o.jsx(j,{icon:"close",size:n==="small"?"small":"medium"})})]}),o.jsx(tt,{children:o.jsx(ye,{className:E.viewport,children:o.jsxs(pe,{className:E.content,children:[t.length>Gt&&o.jsx("div",{className:E.searchInput,children:o.jsx(Fe,{placeholder:"Search",value:S,onChange:u=>P(u.target.value),onKeyDown:u=>{u.key===" "&&u.stopPropagation()},slots:{startAdornment:o.jsx(j,{icon:"search",size:"tiny"})}})}),m.multiple&&o.jsx(Pe,{onValueChange:m.onValueChange,showAll:O,onShowAll:()=>A(!0),count:6}),W.map(u=>{const G=_t({item:u,select:V,options:R});return o.jsx(le,{variant:"body-sm-reg",asChild:!0,className:E.item,children:o.jsxs(Ee,{item:u,children:[m.multiple&&o.jsx(Ne,{checked:G}),u.icon&&o.jsx(j,{className:E.itemIcon,icon:u.icon,"aria-hidden":"true"}),o.jsx(Te,{children:u.label})]})},H.getItemValue(u))})]})})}),o.jsx(ve,{style:{display:"none"}})]})};function _t({item:e,select:t,options:l}){return e.value!==U?t.getItemState({item:e}).selected:t.selectedItems.length===l.length-1?!0:t.hasSelectedItems?"indeterminate":!1}Ft.__docgenInfo={description:"",methods:[],displayName:"DsSelect",props:{id:{required:!1,tsType:{name:"string"},description:"Unique identifier for the select component"},options:{required:!0,tsType:{name:"Array",elements:[{name:"DsSelectOption"}],raw:"DsSelectOption[]"},description:"Options to display in the select dropdown"},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:"Additional styles to apply to the icon"},className:{required:!1,tsType:{name:"string"},description:"Additional CSS class names"},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.FocusEvent) => void",signature:{arguments:[{type:{name:"ReactFocusEvent",raw:"React.FocusEvent"},name:"event"}],return:{name:"void"}}},description:`Event handler called when the select loses focus

@param event`},placeholder:{required:!1,tsType:{name:"string"},description:"Placeholder text to display when no option is selected",defaultValue:{value:"'Click to select a value'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the select is disabled"},size:{required:!1,tsType:{name:"union",raw:"'default' | 'small'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'small'"}]},description:`The size of the select component
@default 'default'`}}};export{Ft as D};
