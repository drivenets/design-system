import{j as o}from"./jsx-runtime-u17CrQMm.js";import{r as h}from"./iframe-DaWFeW3H.js";import{r as P}from"./index-Bg5G61Kq.js";import{c as I}from"./index-BpdsuZ17.js";import{D as W}from"./ds-typography-XNs9d9js.js";import{D as q}from"./ds-tag-xxPgsPDa.js";import{D as N}from"./ds-button-jTDPKYIv.js";import{D as A}from"./ds-icon-2Kkf3LCh.js";const z="_container_1q4o9_1",G="_expanded_1q4o9_12",V="_row1_1q4o9_16",$="_row2_1q4o9_24",H="_label_1q4o9_32",M="_expandTag_1q4o9_38",U="_clearContent_1q4o9_48",J="_clearButton_1q4o9_52",K="_measurementContainer_1q4o9_58",i={container:z,expanded:G,row1:V,row2:$,label:H,expandTag:M,clearContent:U,clearButton:J,measurementContainer:K};function E(e,c,d){let s=0,a=0;for(const r of e){const n=r+(a>0?d:0);if(s+n<=c)s+=n,a++;else break}return{count:a,usedWidth:s}}function Q(e){const c=e.getBoundingClientRect(),d=getComputedStyle(e),s=parseFloat(d.paddingLeft)||0,a=parseFloat(d.paddingRight)||0;return c.width-s-a}function X(e){const c=Array.from(e.querySelectorAll("[data-measure-tag]")),d=e.querySelector("[data-measure-label]"),s=e.querySelector("[data-measure-clear]"),a=e.querySelector("[data-measure-expand]"),r=getComputedStyle(e),n=parseFloat(r.gap)||8,g=c.map(w=>w.getBoundingClientRect().width),l=d?d.getBoundingClientRect().width+n:0,p=s?s.getBoundingClientRect().width+n:0,f=a?a.getBoundingClientRect().width+n:100;return{tagWidths:g,labelWidth:l,clearButtonWidth:p,expandTagWidth:f,gap:n}}const S=20,Y=({containerRef:e,measurementRef:c,totalItems:d,expanded:s})=>{const[a,r]=h.useState({row1TagCount:0,row2TagCount:0,hasOverflow:!1}),n=h.useCallback(()=>{if(!e.current||!c.current)return;const g=e.current,l=c.current,{tagWidths:p,labelWidth:f,clearButtonWidth:w,expandTagWidth:T,gap:C}=X(l);if(p.length===0){r({row1TagCount:0,row2TagCount:0,hasOverflow:!1});return}const y=Q(g),v=y-f-w-S,u=E(p,v,C),m=p.slice(u.count);if(m.length===0){r({row1TagCount:u.count,row2TagCount:0,hasOverflow:!1});return}const j=y-T-S,b=E(m,j,C);if(m.length>b.count)r({row1TagCount:u.count,row2TagCount:b.count,hasOverflow:!0});else{const x=y-S,_=E(m,x,C);_.count<m.length?r({row1TagCount:u.count,row2TagCount:b.count,hasOverflow:!0}):r({row1TagCount:u.count,row2TagCount:_.count,hasOverflow:!1})}},[e,c]);return h.useLayoutEffect(()=>{const g=requestAnimationFrame(()=>{n()}),l=new ResizeObserver(()=>{requestAnimationFrame(()=>{n()})});return e.current&&l.observe(e.current),()=>{cancelAnimationFrame(g),l.disconnect()}},[e,c,d,s,n]),s?{row1TagCount:a.row1TagCount,row2TagCount:d-a.row1TagCount,hasOverflow:!0}:a},Z=({items:e,locale:c={},className:d,style:s,onClearAll:a,onItemDelete:r,onItemSelect:n,onExpand:g})=>{const[l,p]=h.useState(!1),f=h.useRef(null),w=h.useRef(null),{row1TagCount:T,row2TagCount:C,hasOverflow:y}=Y({containerRef:f,measurementRef:w,totalItems:e.length,expanded:l}),{label:v="Filtered by:",clearButton:u="Clear all filters",hiddenCountPlural:m="filters",hiddenCountSingular:j="filter",collapseTagLabel:b="Collapse"}=c,k=e.slice(0,T),x=e.slice(T,T+C),_=l?[]:e.slice(T+C);if(e.length===0)return null;const B=_.length,D=x.length>0||y,F=t=>{const L=t.slotProps?.tag||{};return h.createElement(q,{...L,key:t.id,label:t.label,selected:t.selected,onClick:n?()=>n(t):void 0,onDelete:r?()=>r(t):void 0})},O=()=>{const t=!l;p(t),g?.(t)},R=o.jsxs("div",{ref:w,className:i.measurementContainer,"aria-hidden":"true",children:[v&&o.jsx("span",{"data-measure-label":"",children:o.jsx(W,{variant:"body-sm-reg",className:i.label,children:v})}),e.map(t=>o.jsx(q,{"data-measure-tag":"",label:t.label,selected:t.selected,onClick:n?()=>n(t):void 0,onDelete:r?()=>r(t):void 0},t.id)),a&&o.jsxs(N,{"data-measure-clear":"",design:"v1.2",buttonType:"tertiary",variant:"ghost",className:i.clearButton,contentClassName:i.clearContent,size:"small",children:[o.jsx(A,{icon:"close"}),u]}),o.jsx(q,{"data-measure-expand":"",label:"+99 filters",className:i.expandTag})]});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{ref:f,className:I(i.container,l&&i.expanded,d),style:s,children:[o.jsxs("div",{className:i.row1,children:[v&&o.jsx(W,{variant:"body-sm-reg",className:i.label,children:v}),k.map(t=>F(t)),a&&o.jsxs(N,{design:"v1.2",buttonType:"tertiary",variant:"ghost",className:i.clearButton,contentClassName:i.clearContent,size:"small",onClick:a,children:[o.jsx(A,{icon:"close"}),u]})]}),D&&o.jsxs("div",{className:i.row2,children:[x.map(t=>F(t)),y&&o.jsx(q,{label:l?b:`+${String(B)} ${B===1?j:m}`,selected:l,className:i.expandTag,onClick:O})]})]}),P.createPortal(R,document.body)]})};Z.__docgenInfo={description:`Design system TagFilter component

A component for displaying active filters as tags with overflow handling.
Shows visible tags in up to 2 rows, with the Expand button to show hidden items.`,methods:[],displayName:"DsTagFilter",props:{items:{required:!0,tsType:{name:"Array",elements:[{name:"TagFilterItem"}],raw:"TagFilterItem[]"},description:"Array of tag items to display"},locale:{required:!1,tsType:{name:"signature",type:"object",raw:`{
	label?: string;
	clearButton?: string;
	collapseTagLabel?: string;
	hiddenCountSingular?: string;
	hiddenCountPlural?: string;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!1}},{key:"clearButton",value:{name:"string",required:!1}},{key:"collapseTagLabel",value:{name:"string",required:!1}},{key:"hiddenCountSingular",value:{name:"string",required:!1}},{key:"hiddenCountPlural",value:{name:"string",required:!1}}]}},description:"Locale object (you can pass custom strings for localization)",defaultValue:{value:"{}",computed:!1}},onClearAll:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:'Callback when "Clear all" is clicked'},onItemDelete:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: TagFilterItem) => void",signature:{arguments:[{type:{name:"TagFilterItem"},name:"item"}],return:{name:"void"}}},description:"Callback when a tag is deleted/removed"},onItemSelect:{required:!1,tsType:{name:"signature",type:"function",raw:"(item: TagFilterItem) => void",signature:{arguments:[{type:{name:"TagFilterItem"},name:"item"}],return:{name:"void"}}},description:"Callback when a tag is selected"},onExpand:{required:!1,tsType:{name:"signature",type:"function",raw:"(expanded?: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"expanded"}],return:{name:"void"}}},description:"Callback when the Expand button is clicked"},className:{required:!1,tsType:{name:"string"},description:"Additional CSS class names"},style:{required:!1,tsType:{name:"CSSProperties"},description:"Additional styles to apply to the component"}}};export{Z as D};
