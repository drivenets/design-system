import{j as r}from"./jsx-runtime-u17CrQMm.js";import{D as Y}from"./ds-icon-DCv_DkXH.js";import{c as Xe}from"./index-ZAZBTGSd.js";import{c as Ze}from"./index-DJ4NnFZ2.js";import{r as y}from"./iframe-B_ZfCBlI.js";import{c as le,a as D,d as et,b as we,u as tt}from"./use-locale-context-DFqdBch7.js";import{b as w,a as Te,u as nt,P as at}from"./use-presence-BEewmdq_.js";import{c as he,L as Pe}from"./list-collection-B22xnPKI.js";import{s as ot,P as it}from"./portal-BVagUpT_.js";import{c as J}from"./create-split-props-u5h9OPvL.js";import{Q as B,aQ as U,r as R,aw as Se,aR as st,aN as me,N as lt,a6 as rt,aS as ct,A as ut,$ as dt,p as f,aT as gt,W as pt,H as ht,a9 as ue,s as Z,Y as ve,X as mt,a0 as vt,aU as It,aP as Ie,aJ as ft,x as Ct,Z as bt,y as re,R as yt,V as xt}from"./index-Bg5ToW70.js";import{a as fe,g as Ot}from"./index-BaeZKe-S.js";import{t as Vt}from"./index-BRcDYbl8.js";import{s as Et,t as wt,g as Tt}from"./index-XIWc4Drf.js";import{u as ke}from"./use-field-context-Bclk7U6b.js";import"./preload-helper-PPVm8Dsz.js";import"./index-C1UeyiO2.js";import"./index-DQNvqSHf.js";import"./floating-ui.dom-BjS6HMTz.js";function Pt(e){const{initialItems:t=[],filter:n,limit:a,...o}=e,[i,s]=y.useState(t),[d,x]=y.useState(""),g=w(c=>{s(c),x("")}),I=y.useRef(o);I.current=o;const h=y.useCallback(c=>he({...I.current,items:c}),[]);return{collection:y.useMemo(()=>{let c=i;d&&n&&(c=h(i).filter((v,C,G)=>n(v,d,G)).items);const p=a==null?c:c.slice(0,a);return he({...I.current,items:p})},[i,d,n,a,h]),filter:w(c=>{x(c||"")}),set:w(c=>{g(c)}),reset:w(()=>{g(t)}),clear:w(()=>{g([])}),insert:w((c,...p)=>{const v=h(i).insert(c,...p).items;g(v)}),insertBefore:w((c,...p)=>{const v=h(i).insertBefore(c,...p).items;g(v)}),insertAfter:w((c,...p)=>{const v=h(i).insertAfter(c,...p).items;g(v)}),remove:w((...c)=>{const p=h(i).remove(...c).items;g(p)}),move:w((c,p)=>{const v=h(i).move(c,p).items;g(v)}),moveBefore:w((c,...p)=>{const v=h(i).moveBefore(c,...p).items;g(v)}),moveAfter:w((c,...p)=>{const v=h(i).moveAfter(c,...p).items;g(v)}),reorder:w((c,p)=>{const v=h(i).reorder(c,p).items;g(v)}),append:w((...c)=>{const p=h(i).append(...c).items;g(p)}),upsert:w((c,p,v="append")=>{const C=h(i).upsert(c,p,v).items;g(C)}),prepend:w((...c)=>{const p=h(i).prepend(...c).items;g(p)}),update:w((c,p)=>{const v=h(i).update(c,p).items;g(v)})}}const[St,F]=le({name:"ComboboxContext",hookName:"useComboboxContext",providerName:"<ComboboxProvider />"}),Ne=y.forwardRef((e,t)=>{const n=F(),a=B(n.getClearTriggerProps(),e);return r.jsx(D.button,{...a,ref:t})});Ne.displayName="ComboboxClearTrigger";const Le=y.forwardRef((e,t)=>{const n=F(),a=Te(),o=B(n.getContentProps(),a.getPresenceProps(),e);return a.unmounted?null:r.jsx(D.div,{...o,ref:et(a.ref,t)})});Le.displayName="ComboboxContent";var kt=Ct("combobox").parts("root","clearTrigger","content","control","input","item","itemGroup","itemGroupLabel","itemIndicator","itemText","label","list","positioner","trigger"),S=kt.build(),Be=e=>new Pe(e);Be.empty=()=>new Pe({items:[]});var Nt=e=>e.ids?.root??`combobox:${e.id}`,de=e=>e.ids?.label??`combobox:${e.id}:label`,Ae=e=>e.ids?.control??`combobox:${e.id}:control`,ie=e=>e.ids?.input??`combobox:${e.id}:input`,se=e=>e.ids?.content??`combobox:${e.id}:content`,Re=e=>e.ids?.positioner??`combobox:${e.id}:popper`,He=e=>e.ids?.trigger??`combobox:${e.id}:toggle-btn`,De=e=>e.ids?.clearTrigger??`combobox:${e.id}:clear-btn`,Lt=(e,t)=>e.ids?.itemGroup?.(t)??`combobox:${e.id}:optgroup:${t}`,Ce=(e,t)=>e.ids?.itemGroupLabel?.(t)??`combobox:${e.id}:optgroup-label:${t}`,be=(e,t)=>e.ids?.item?.(t)??`combobox:${e.id}:option:${t}`,W=e=>e.getById(se(e)),z=e=>e.getById(ie(e)),ye=e=>e.getById(Re(e)),xe=e=>e.getById(Ae(e)),Q=e=>e.getById(He(e)),Bt=e=>e.getById(De(e)),q=(e,t)=>{if(t==null)return null;const n=`[role=option][data-value="${CSS.escape(t)}"]`;return It(W(e),n)},ge=e=>{const t=z(e);e.isActiveElement(t)||t?.focus({preventScroll:!0}),Se(t)},At=e=>{const t=Q(e);e.isActiveElement(t)||t?.focus({preventScroll:!0})};function Rt(e,t){const{context:n,prop:a,state:o,send:i,scope:s,computed:d,event:x}=e,g=a("translations"),I=a("collection"),h=!!a("disabled"),V=d("isInteractive"),c=!!a("invalid"),p=!!a("required"),v=!!a("readOnly"),C=o.hasTag("open"),G=o.hasTag("focused"),_=a("composite"),b=n.get("highlightedValue"),L=Ot({...a("positioning"),placement:n.get("currentPlacement")});function A(l){const u=I.getItemDisabled(l.item),P=I.getItemValue(l.item);return ft(P,()=>`[zag-js] No value found for item ${JSON.stringify(l.item)}`),{value:P,disabled:!!(h||u),highlighted:b===P,selected:n.get("value").includes(P)}}return{focused:G,open:C,inputValue:n.get("inputValue"),highlightedValue:b,highlightedItem:n.get("highlightedItem"),value:n.get("value"),valueAsString:d("valueAsString"),hasSelectedItems:d("hasSelectedItems"),selectedItems:n.get("selectedItems"),collection:a("collection"),multiple:!!a("multiple"),disabled:!!h,syncSelectedItems(){i({type:"SELECTED_ITEMS.SYNC"})},reposition(l={}){i({type:"POSITIONING.SET",options:l})},setHighlightValue(l){i({type:"HIGHLIGHTED_VALUE.SET",value:l})},clearHighlightValue(){i({type:"HIGHLIGHTED_VALUE.CLEAR"})},selectValue(l){i({type:"ITEM.SELECT",value:l})},setValue(l){i({type:"VALUE.SET",value:l})},setInputValue(l,u="script"){i({type:"INPUT_VALUE.SET",value:l,src:u})},clearValue(l){l!=null?i({type:"ITEM.CLEAR",value:l}):i({type:"VALUE.CLEAR"})},focus(){z(s)?.focus()},setOpen(l,u="script"){o.hasTag("open")!==l&&i({type:l?"OPEN":"CLOSE",src:u})},getRootProps(){return t.element({...S.root.attrs,dir:a("dir"),id:Nt(s),"data-invalid":f(c),"data-readonly":f(v)})},getLabelProps(){return t.label({...S.label.attrs,dir:a("dir"),htmlFor:ie(s),id:de(s),"data-readonly":f(v),"data-disabled":f(h),"data-invalid":f(c),"data-required":f(p),"data-focus":f(G),onClick(l){_||(l.preventDefault(),Q(s)?.focus({preventScroll:!0}))}})},getControlProps(){return t.element({...S.control.attrs,dir:a("dir"),id:Ae(s),"data-state":C?"open":"closed","data-focus":f(G),"data-disabled":f(h),"data-invalid":f(c)})},getPositionerProps(){return t.element({...S.positioner.attrs,dir:a("dir"),id:Re(s),style:L.floating})},getInputProps(){return t.input({...S.input.attrs,dir:a("dir"),"aria-invalid":ue(c),"data-invalid":f(c),"data-autofocus":f(a("autoFocus")),name:a("name"),form:a("form"),disabled:h,required:a("required"),autoComplete:"off",autoCorrect:"off",autoCapitalize:"none",spellCheck:"false",readOnly:v,placeholder:a("placeholder"),id:ie(s),type:"text",role:"combobox",defaultValue:n.get("inputValue"),"aria-autocomplete":d("autoComplete")?"both":"list","aria-controls":se(s),"aria-expanded":C,"data-state":C?"open":"closed","aria-activedescendant":b?be(s,b):void 0,onClick(l){l.defaultPrevented||a("openOnClick")&&V&&i({type:"INPUT.CLICK",src:"input-click"})},onFocus(){h||i({type:"INPUT.FOCUS"})},onBlur(){h||i({type:"INPUT.BLUR"})},onChange(l){i({type:"INPUT.CHANGE",value:l.currentTarget.value,src:"input-change"})},onKeyDown(l){if(l.defaultPrevented||!V||l.ctrlKey||l.shiftKey||mt(l))return;const u=a("openOnKeyPress"),P=l.ctrlKey||l.metaKey||l.shiftKey,k=!0,$={ArrowDown(M){!u&&!C||(i({type:M.altKey?"OPEN":"INPUT.ARROW_DOWN",keypress:k,src:"arrow-key"}),M.preventDefault())},ArrowUp(){!u&&!C||(i({type:l.altKey?"CLOSE":"INPUT.ARROW_UP",keypress:k,src:"arrow-key"}),l.preventDefault())},Home(M){P||(i({type:"INPUT.HOME",keypress:k}),C&&M.preventDefault())},End(M){P||(i({type:"INPUT.END",keypress:k}),C&&M.preventDefault())},Enter(M){i({type:"INPUT.ENTER",keypress:k,src:"item-select"});const Ye=d("isCustomValue")&&a("allowCustomValue"),Qe=b!=null,Je=a("alwaysSubmitOnEnter");if(C&&!Ye&&!Je&&Qe&&M.preventDefault(),b==null)return;const ce=q(s,b);bt(ce)&&a("navigate")?.({value:b,node:ce,href:ce.href})},Escape(){i({type:"INPUT.ESCAPE",keypress:k,src:"escape-key"}),l.preventDefault()}},Ke=ve(l,{dir:a("dir")}),$e=$[Ke];$e?.(l)}})},getTriggerProps(l={}){return t.button({...S.trigger.attrs,dir:a("dir"),id:He(s),"aria-haspopup":_?"listbox":"dialog",type:"button",tabIndex:l.focusable?void 0:-1,"aria-label":g.triggerLabel,"aria-expanded":C,"data-state":C?"open":"closed","aria-controls":C?se(s):void 0,disabled:h,"data-invalid":f(c),"data-focusable":f(l.focusable),"data-readonly":f(v),"data-disabled":f(h),onFocus(){l.focusable&&i({type:"INPUT.FOCUS",src:"trigger"})},onClick(u){u.defaultPrevented||V&&Z(u)&&i({type:"TRIGGER.CLICK",src:"trigger-click"})},onPointerDown(u){V&&u.pointerType!=="touch"&&Z(u)&&(u.preventDefault(),queueMicrotask(()=>{ge(s)}))},onKeyDown(u){if(u.defaultPrevented||_)return;const P={ArrowDown(){i({type:"INPUT.ARROW_DOWN",src:"arrow-key"})},ArrowUp(){i({type:"INPUT.ARROW_UP",src:"arrow-key"})}},k=ve(u,{dir:a("dir")}),$=P[k];$&&($(u),u.preventDefault())}})},getContentProps(){return t.element({...S.content.attrs,dir:a("dir"),id:se(s),role:_?"listbox":"dialog",tabIndex:-1,hidden:!C,"data-state":C?"open":"closed","data-placement":n.get("currentPlacement"),"aria-labelledby":de(s),"aria-multiselectable":a("multiple")&&_?!0:void 0,"data-empty":f(I.size===0),onPointerDown(l){Z(l)&&l.preventDefault()}})},getListProps(){return t.element({...S.list.attrs,role:_?void 0:"listbox","data-empty":f(I.size===0),"aria-labelledby":de(s),"aria-multiselectable":a("multiple")&&!_?!0:void 0})},getClearTriggerProps(){return t.button({...S.clearTrigger.attrs,dir:a("dir"),id:De(s),type:"button",tabIndex:-1,disabled:h,"data-invalid":f(c),"aria-label":g.clearTriggerLabel,"aria-controls":ie(s),hidden:!n.get("value").length,onPointerDown(l){Z(l)&&l.preventDefault()},onClick(l){l.defaultPrevented||V&&i({type:"VALUE.CLEAR",src:"clear-trigger"})}})},getItemState:A,getItemProps(l){const u=A(l),P=u.value;return t.element({...S.item.attrs,dir:a("dir"),id:be(s,P),role:"option",tabIndex:-1,"data-highlighted":f(u.highlighted),"data-state":u.selected?"checked":"unchecked","aria-selected":ue(u.selected),"aria-disabled":ue(u.disabled),"data-disabled":f(u.disabled),"data-value":u.value,onPointerMove(){u.disabled||u.highlighted||i({type:"ITEM.POINTER_MOVE",value:P})},onPointerLeave(){l.persistFocus||u.disabled||!x.previous()?.type.includes("POINTER")||i({type:"ITEM.POINTER_LEAVE",value:P})},onClick(k){gt(k)||pt(k)||ht(k)||u.disabled||i({type:"ITEM.CLICK",src:"item-select",value:P})}})},getItemTextProps(l){const u=A(l);return t.element({...S.itemText.attrs,dir:a("dir"),"data-state":u.selected?"checked":"unchecked","data-disabled":f(u.disabled),"data-highlighted":f(u.highlighted)})},getItemIndicatorProps(l){const u=A(l);return t.element({"aria-hidden":!0,...S.itemIndicator.attrs,dir:a("dir"),"data-state":u.selected?"checked":"unchecked",hidden:!u.selected})},getItemGroupProps(l){const{id:u}=l;return t.element({...S.itemGroup.attrs,dir:a("dir"),id:Lt(s,u),"aria-labelledby":Ce(s,u),"data-empty":f(I.size===0),role:"group"})},getItemGroupLabelProps(l){const{htmlFor:u}=l;return t.element({...S.itemGroupLabel.attrs,dir:a("dir"),id:Ce(s,u),role:"presentation"})}}}var{guards:Ht,createMachine:Dt,choose:Ft}=vt(),{and:O,not:N}=Ht,_t=Dt({props({props:e}){return{loopFocus:!0,openOnClick:!1,defaultValue:[],defaultInputValue:"",closeOnSelect:!e.multiple,allowCustomValue:!1,alwaysSubmitOnEnter:!1,inputBehavior:"none",selectionBehavior:e.multiple?"clear":"replace",openOnKeyPress:!0,openOnChange:!0,composite:!0,navigate({node:t}){dt(t)},collection:Be.empty(),...e,positioning:{placement:"bottom",sameWidth:!0,...e.positioning},translations:{triggerLabel:"Toggle suggestions",clearTriggerLabel:"Clear value",...e.translations}}},initialState({prop:e}){return e("open")||e("defaultOpen")?"suggesting":"idle"},context({prop:e,bindable:t,getContext:n,getEvent:a}){return{currentPlacement:t(()=>({defaultValue:void 0})),value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),isEqual:ut,hash(o){return o.join(",")},onChange(o){const i=n(),s=i.get("selectedItems"),d=e("collection"),g=(e("value")||o).map(I=>s.find(V=>d.getItemValue(V)===I)||d.find(I));i.set("selectedItems",g),e("onValueChange")?.({value:o,items:g})}})),highlightedValue:t(()=>({defaultValue:e("defaultHighlightedValue")||null,value:e("highlightedValue"),onChange(o){const i=e("collection").find(o);e("onHighlightChange")?.({highlightedValue:o,highlightedItem:i})}})),inputValue:t(()=>{let o=e("inputValue")||e("defaultInputValue");const i=e("value")||e("defaultValue");if(!o.trim()&&!e("multiple")){const s=e("collection").stringifyMany(i);o=U(e("selectionBehavior"),{preserve:o||s,replace:s,clear:""})}return{defaultValue:o,value:e("inputValue"),onChange(s){const d=a(),x=(d.previousEvent||d).src;e("onInputValueChange")?.({inputValue:s,reason:x})}}}),highlightedItem:t(()=>{const o=e("highlightedValue");return{defaultValue:e("collection").find(o)}}),selectedItems:t(()=>{const o=e("value")||e("defaultValue")||[];return{defaultValue:e("collection").findMany(o)}})}},computed:{isInputValueEmpty:({context:e})=>e.get("inputValue").length===0,isInteractive:({prop:e})=>!(e("readOnly")||e("disabled")),autoComplete:({prop:e})=>e("inputBehavior")==="autocomplete",autoHighlight:({prop:e})=>e("inputBehavior")==="autohighlight",hasSelectedItems:({context:e})=>e.get("value").length>0,valueAsString:({context:e,prop:t})=>t("collection").stringifyItems(e.get("selectedItems")),isCustomValue:({context:e,computed:t})=>e.get("inputValue")!==t("valueAsString")},watch({context:e,prop:t,track:n,action:a,send:o}){n([()=>e.hash("value")],()=>{a(["syncSelectedItems"])}),n([()=>e.get("inputValue")],()=>{a(["syncInputValue"])}),n([()=>e.get("highlightedValue")],()=>{a(["syncHighlightedItem","autofillInputValue"])}),n([()=>t("open")],()=>{a(["toggleVisibility"])}),n([()=>t("collection").toString()],()=>{o({type:"CHILDREN_CHANGE"})})},on:{"SELECTED_ITEMS.SYNC":{actions:["syncSelectedItems"]},"HIGHLIGHTED_VALUE.SET":{actions:["setHighlightedValue"]},"HIGHLIGHTED_VALUE.CLEAR":{actions:["clearHighlightedValue"]},"ITEM.SELECT":{actions:["selectItem"]},"ITEM.CLEAR":{actions:["clearItem"]},"VALUE.SET":{actions:["setValue"]},"INPUT_VALUE.SET":{actions:["setInputValue"]},"POSITIONING.SET":{actions:["reposition"]}},entry:Ft([{guard:"autoFocus",actions:["setInitialFocus"]}]),states:{idle:{tags:["idle","closed"],entry:["scrollContentToTop","clearHighlightedValue"],on:{"CONTROLLED.OPEN":{target:"interacting"},"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["setInitialFocus","highlightFirstSelectedItem","invokeOnOpen"]},{target:"interacting",actions:["setInitialFocus","highlightFirstSelectedItem","invokeOnOpen"]}],"INPUT.CLICK":[{guard:"isOpenControlled",actions:["highlightFirstSelectedItem","invokeOnOpen"]},{target:"interacting",actions:["highlightFirstSelectedItem","invokeOnOpen"]}],"INPUT.FOCUS":{target:"focused"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"interacting",actions:["invokeOnOpen"]}],"VALUE.CLEAR":{target:"focused",actions:["clearInputValue","clearSelectedItems","setInitialFocus"]}}},focused:{tags:["focused","closed"],entry:["scrollContentToTop","clearHighlightedValue"],on:{"CONTROLLED.OPEN":[{guard:"isChangeEvent",target:"suggesting"},{target:"interacting"}],"INPUT.CHANGE":[{guard:O("isOpenControlled","openOnChange"),actions:["setInputValue","invokeOnOpen","highlightFirstItemIfNeeded"]},{guard:"openOnChange",target:"suggesting",actions:["setInputValue","invokeOnOpen","highlightFirstItemIfNeeded"]},{actions:["setInputValue"]}],"LAYER.INTERACT_OUTSIDE":{target:"idle"},"INPUT.ESCAPE":{guard:O("isCustomValue",N("allowCustomValue")),actions:["revertInputValue"]},"INPUT.BLUR":{target:"idle"},"INPUT.CLICK":[{guard:"isOpenControlled",actions:["highlightFirstSelectedItem","invokeOnOpen"]},{target:"interacting",actions:["highlightFirstSelectedItem","invokeOnOpen"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["setInitialFocus","highlightFirstSelectedItem","invokeOnOpen"]},{target:"interacting",actions:["setInitialFocus","highlightFirstSelectedItem","invokeOnOpen"]}],"INPUT.ARROW_DOWN":[{guard:O("isOpenControlled","autoComplete"),actions:["invokeOnOpen"]},{guard:"autoComplete",target:"interacting",actions:["invokeOnOpen"]},{guard:"isOpenControlled",actions:["highlightFirstOrSelectedItem","invokeOnOpen"]},{target:"interacting",actions:["highlightFirstOrSelectedItem","invokeOnOpen"]}],"INPUT.ARROW_UP":[{guard:O("isOpenControlled","autoComplete"),actions:["invokeOnOpen"]},{guard:"autoComplete",target:"interacting",actions:["invokeOnOpen"]},{guard:"isOpenControlled",actions:["highlightLastOrSelectedItem","invokeOnOpen"]},{target:"interacting",actions:["highlightLastOrSelectedItem","invokeOnOpen"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"interacting",actions:["invokeOnOpen"]}],"VALUE.CLEAR":{actions:["clearInputValue","clearSelectedItems"]}}},interacting:{tags:["open","focused"],entry:["setInitialFocus"],effects:["trackFocusVisible","scrollToHighlightedItem","trackDismissableLayer","trackPlacement"],on:{"CONTROLLED.CLOSE":[{guard:"restoreFocus",target:"focused",actions:["setFinalFocus"]},{target:"idle"}],CHILDREN_CHANGE:[{guard:"isHighlightedItemRemoved",actions:["clearHighlightedValue"]},{actions:["scrollToHighlightedItem"]}],"INPUT.HOME":{actions:["highlightFirstItem"]},"INPUT.END":{actions:["highlightLastItem"]},"INPUT.ARROW_DOWN":[{guard:O("autoComplete","isLastItemHighlighted"),actions:["clearHighlightedValue","scrollContentToTop"]},{actions:["highlightNextItem"]}],"INPUT.ARROW_UP":[{guard:O("autoComplete","isFirstItemHighlighted"),actions:["clearHighlightedValue"]},{actions:["highlightPrevItem"]}],"INPUT.ENTER":[{guard:O("isOpenControlled","isCustomValue",N("hasHighlightedItem"),N("allowCustomValue")),actions:["revertInputValue","invokeOnClose"]},{guard:O("isCustomValue",N("hasHighlightedItem"),N("allowCustomValue")),target:"focused",actions:["revertInputValue","invokeOnClose"]},{guard:O("isOpenControlled","closeOnSelect"),actions:["selectHighlightedItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectHighlightedItem","invokeOnClose","setFinalFocus"]},{actions:["selectHighlightedItem"]}],"INPUT.CHANGE":[{guard:"autoComplete",target:"suggesting",actions:["setInputValue"]},{target:"suggesting",actions:["clearHighlightedValue","setInputValue"]}],"ITEM.POINTER_MOVE":{actions:["setHighlightedValue"]},"ITEM.POINTER_LEAVE":{actions:["clearHighlightedValue"]},"ITEM.CLICK":[{guard:O("isOpenControlled","closeOnSelect"),actions:["selectItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectItem","invokeOnClose","setFinalFocus"]},{actions:["selectItem"]}],"LAYER.ESCAPE":[{guard:O("isOpenControlled","autoComplete"),actions:["syncInputValue","invokeOnClose"]},{guard:"autoComplete",target:"focused",actions:["syncInputValue","invokeOnClose"]},{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","setFinalFocus"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose"]}],"LAYER.INTERACT_OUTSIDE":[{guard:O("isOpenControlled","isCustomValue",N("allowCustomValue")),actions:["revertInputValue","invokeOnClose"]},{guard:O("isCustomValue",N("allowCustomValue")),target:"idle",actions:["revertInputValue","invokeOnClose"]},{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"idle",actions:["invokeOnClose"]}],CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","setFinalFocus"]}],"VALUE.CLEAR":[{guard:"isOpenControlled",actions:["clearInputValue","clearSelectedItems","invokeOnClose"]},{target:"focused",actions:["clearInputValue","clearSelectedItems","invokeOnClose","setFinalFocus"]}]}},suggesting:{tags:["open","focused"],effects:["trackFocusVisible","trackDismissableLayer","scrollToHighlightedItem","trackPlacement"],entry:["setInitialFocus"],on:{"CONTROLLED.CLOSE":[{guard:"restoreFocus",target:"focused",actions:["setFinalFocus"]},{target:"idle"}],CHILDREN_CHANGE:[{guard:O("isHighlightedItemRemoved","hasCollectionItems","autoHighlight"),actions:["clearHighlightedValue","highlightFirstItem"]},{guard:"isHighlightedItemRemoved",actions:["clearHighlightedValue"]},{guard:"autoHighlight",actions:["highlightFirstItem"]}],"INPUT.ARROW_DOWN":{target:"interacting",actions:["highlightNextItem"]},"INPUT.ARROW_UP":{target:"interacting",actions:["highlightPrevItem"]},"INPUT.HOME":{target:"interacting",actions:["highlightFirstItem"]},"INPUT.END":{target:"interacting",actions:["highlightLastItem"]},"INPUT.ENTER":[{guard:O("isOpenControlled","isCustomValue",N("hasHighlightedItem"),N("allowCustomValue")),actions:["revertInputValue","invokeOnClose"]},{guard:O("isCustomValue",N("hasHighlightedItem"),N("allowCustomValue")),target:"focused",actions:["revertInputValue","invokeOnClose"]},{guard:O("isOpenControlled","closeOnSelect"),actions:["selectHighlightedItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectHighlightedItem","invokeOnClose","setFinalFocus"]},{actions:["selectHighlightedItem"]}],"INPUT.CHANGE":{actions:["setInputValue"]},"LAYER.ESCAPE":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose"]}],"ITEM.POINTER_MOVE":{target:"interacting",actions:["setHighlightedValue"]},"ITEM.POINTER_LEAVE":{actions:["clearHighlightedValue"]},"LAYER.INTERACT_OUTSIDE":[{guard:O("isOpenControlled","isCustomValue",N("allowCustomValue")),actions:["revertInputValue","invokeOnClose"]},{guard:O("isCustomValue",N("allowCustomValue")),target:"idle",actions:["revertInputValue","invokeOnClose"]},{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"idle",actions:["invokeOnClose"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose"]}],"ITEM.CLICK":[{guard:O("isOpenControlled","closeOnSelect"),actions:["selectItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectItem","invokeOnClose","setFinalFocus"]},{actions:["selectItem"]}],CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","setFinalFocus"]}],"VALUE.CLEAR":[{guard:"isOpenControlled",actions:["clearInputValue","clearSelectedItems","invokeOnClose"]},{target:"focused",actions:["clearInputValue","clearSelectedItems","invokeOnClose","setFinalFocus"]}]}}},implementations:{guards:{isInputValueEmpty:({computed:e})=>e("isInputValueEmpty"),autoComplete:({computed:e,prop:t})=>e("autoComplete")&&!t("multiple"),autoHighlight:({computed:e})=>e("autoHighlight"),isFirstItemHighlighted:({prop:e,context:t})=>e("collection").firstValue===t.get("highlightedValue"),isLastItemHighlighted:({prop:e,context:t})=>e("collection").lastValue===t.get("highlightedValue"),isCustomValue:({computed:e})=>e("isCustomValue"),allowCustomValue:({prop:e})=>!!e("allowCustomValue"),hasHighlightedItem:({context:e})=>e.get("highlightedValue")!=null,closeOnSelect:({prop:e})=>!!e("closeOnSelect"),isOpenControlled:({prop:e})=>e("open")!=null,openOnChange:({prop:e,context:t})=>{const n=e("openOnChange");return ct(n)?n:!!n?.({inputValue:t.get("inputValue")})},restoreFocus:({event:e})=>{const t=e.restoreFocus??e.previousEvent?.restoreFocus;return t==null?!0:!!t},isChangeEvent:({event:e})=>e.previousEvent?.type==="INPUT.CHANGE",autoFocus:({prop:e})=>!!e("autoFocus"),isHighlightedItemRemoved:({prop:e,context:t})=>!e("collection").has(t.get("highlightedValue")),hasCollectionItems:({prop:e})=>e("collection").size>0},effects:{trackFocusVisible({scope:e}){return wt({root:e.getRootNode?.()})},trackDismissableLayer({send:e,prop:t,scope:n}){return t("disableLayer")?void 0:Vt(()=>W(n),{type:"listbox",defer:!0,exclude:()=>[z(n),Q(n),Bt(n)],onFocusOutside:t("onFocusOutside"),onPointerDownOutside:t("onPointerDownOutside"),onInteractOutside:t("onInteractOutside"),onEscapeKeyDown(o){o.preventDefault(),o.stopPropagation(),e({type:"LAYER.ESCAPE",src:"escape-key"})},onDismiss(){e({type:"LAYER.INTERACT_OUTSIDE",src:"interact-outside",restoreFocus:!1})}})},trackPlacement({context:e,prop:t,scope:n}){const a=()=>xe(n)||Q(n),o=()=>ye(n);return e.set("currentPlacement",t("positioning").placement),fe(a,o,{...t("positioning"),defer:!0,onComplete(i){e.set("currentPlacement",i.placement)}})},scrollToHighlightedItem({context:e,prop:t,scope:n}){const a=z(n);let o=[];const i=x=>{if(Tt()==="pointer")return;const I=e.get("highlightedValue");if(!I)return;const h=W(n),V=t("scrollToIndexFn");if(V){const v=t("collection").indexOf(I);V({index:v,immediate:x,getElement:()=>q(n,I)});return}const c=q(n,I),p=R(()=>{Ie(c,{rootEl:h,block:"nearest"})});o.push(p)},s=R(()=>{Et("virtual"),i(!0)});o.push(s);const d=rt(a,{attributes:["aria-activedescendant"],callback:()=>i(!1)});return o.push(d),()=>{o.forEach(x=>x())}}},actions:{reposition({context:e,prop:t,scope:n,event:a}){fe(()=>xe(n),()=>ye(n),{...t("positioning"),...a.options,defer:!0,listeners:!1,onComplete(s){e.set("currentPlacement",s.placement)}})},setHighlightedValue({context:e,event:t}){t.value!=null&&e.set("highlightedValue",t.value)},clearHighlightedValue({context:e}){e.set("highlightedValue",null)},selectHighlightedItem(e){const{context:t,prop:n}=e,a=n("collection"),o=t.get("highlightedValue");if(!o||!a.has(o))return;const i=n("multiple")?me(t.get("value"),o):[o];n("onSelect")?.({value:i,itemValue:o}),t.set("value",i);const s=U(n("selectionBehavior"),{preserve:t.get("inputValue"),replace:a.stringifyMany(i),clear:""});t.set("inputValue",s)},scrollToHighlightedItem({context:e,prop:t,scope:n}){lt(()=>{const a=e.get("highlightedValue");if(a==null)return;const o=q(n,a),i=W(n),s=t("scrollToIndexFn");if(s){const d=t("collection").indexOf(a);s({index:d,immediate:!0,getElement:()=>q(n,a)});return}Ie(o,{rootEl:i,block:"nearest"})})},selectItem(e){const{context:t,event:n,flush:a,prop:o}=e;n.value!=null&&a(()=>{const i=o("multiple")?me(t.get("value"),n.value):[n.value];o("onSelect")?.({value:i,itemValue:n.value}),t.set("value",i);const s=U(o("selectionBehavior"),{preserve:t.get("inputValue"),replace:o("collection").stringifyMany(i),clear:""});t.set("inputValue",s)})},clearItem(e){const{context:t,event:n,flush:a,prop:o}=e;n.value!=null&&a(()=>{const i=st(t.get("value"),n.value);t.set("value",i);const s=U(o("selectionBehavior"),{preserve:t.get("inputValue"),replace:o("collection").stringifyMany(i),clear:""});t.set("inputValue",s)})},setInitialFocus({scope:e}){R(()=>{ge(e)})},setFinalFocus({scope:e}){R(()=>{Q(e)?.dataset.focusable==null?ge(e):At(e)})},syncInputValue({context:e,scope:t,event:n}){const a=z(t);a&&(a.value=e.get("inputValue"),queueMicrotask(()=>{n.current().type!=="INPUT.CHANGE"&&Se(a)}))},setInputValue({context:e,event:t}){e.set("inputValue",t.value)},clearInputValue({context:e}){e.set("inputValue","")},revertInputValue({context:e,prop:t,computed:n}){const a=t("selectionBehavior"),o=U(a,{replace:n("hasSelectedItems")?n("valueAsString"):"",preserve:e.get("inputValue"),clear:""});e.set("inputValue",o)},setValue(e){const{context:t,flush:n,event:a,prop:o}=e;n(()=>{t.set("value",a.value);const i=U(o("selectionBehavior"),{preserve:t.get("inputValue"),replace:o("collection").stringifyMany(a.value),clear:""});t.set("inputValue",i)})},clearSelectedItems(e){const{context:t,flush:n,prop:a}=e;n(()=>{t.set("value",[]);const o=U(a("selectionBehavior"),{preserve:t.get("inputValue"),replace:a("collection").stringifyMany([]),clear:""});t.set("inputValue",o)})},scrollContentToTop({prop:e,scope:t}){const n=e("scrollToIndexFn");if(n){const a=e("collection").firstValue;n({index:0,immediate:!0,getElement:()=>q(t,a)})}else{const a=W(t);if(!a)return;a.scrollTop=0}},invokeOnOpen({prop:e,event:t,context:n}){const a=Oe(t);e("onOpenChange")?.({open:!0,reason:a,value:n.get("value")})},invokeOnClose({prop:e,event:t,context:n}){const a=Oe(t);e("onOpenChange")?.({open:!1,reason:a,value:n.get("value")})},highlightFirstItem({context:e,prop:t,scope:n}){(W(n)?queueMicrotask:R)(()=>{const o=t("collection").firstValue;o&&e.set("highlightedValue",o)})},highlightFirstItemIfNeeded({computed:e,action:t}){e("autoHighlight")&&t(["highlightFirstItem"])},highlightLastItem({context:e,prop:t,scope:n}){(W(n)?queueMicrotask:R)(()=>{const o=t("collection").lastValue;o&&e.set("highlightedValue",o)})},highlightNextItem({context:e,prop:t}){let n=null;const a=e.get("highlightedValue"),o=t("collection");a?(n=o.getNextValue(a),!n&&t("loopFocus")&&(n=o.firstValue)):n=o.firstValue,n&&e.set("highlightedValue",n)},highlightPrevItem({context:e,prop:t}){let n=null;const a=e.get("highlightedValue"),o=t("collection");a?(n=o.getPreviousValue(a),!n&&t("loopFocus")&&(n=o.lastValue)):n=o.lastValue,n&&e.set("highlightedValue",n)},highlightFirstSelectedItem({context:e,prop:t}){R(()=>{const[n]=t("collection").sort(e.get("value"));n&&e.set("highlightedValue",n)})},highlightFirstOrSelectedItem({context:e,prop:t,computed:n}){R(()=>{let a=null;n("hasSelectedItems")?a=t("collection").sort(e.get("value"))[0]:a=t("collection").firstValue,a&&e.set("highlightedValue",a)})},highlightLastOrSelectedItem({context:e,prop:t,computed:n}){R(()=>{const a=t("collection");let o=null;n("hasSelectedItems")?o=a.sort(e.get("value"))[0]:o=a.lastValue,o&&e.set("highlightedValue",o)})},autofillInputValue({context:e,computed:t,prop:n,event:a,scope:o}){const i=z(o),s=n("collection");if(!t("autoComplete")||!i||!a.keypress)return;const d=s.stringify(e.get("highlightedValue"));R(()=>{i.value=d||e.get("inputValue")})},syncSelectedItems(e){queueMicrotask(()=>{const{context:t,prop:n}=e,a=n("collection"),o=t.get("value"),i=o.map(d=>t.get("selectedItems").find(g=>a.getItemValue(g)===d)||a.find(d));t.set("selectedItems",i);const s=U(n("selectionBehavior"),{preserve:t.get("inputValue"),replace:a.stringifyMany(o),clear:""});t.set("inputValue",s)})},syncHighlightedItem({context:e,prop:t}){const n=t("collection").find(e.get("highlightedValue"));e.set("highlightedItem",n)},toggleVisibility({event:e,send:t,prop:n}){t({type:n("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:e})}}}});function Oe(e){return(e.previousEvent||e).src}re()(["allowCustomValue","autoFocus","closeOnSelect","collection","composite","defaultHighlightedValue","defaultInputValue","defaultOpen","defaultValue","dir","disabled","disableLayer","form","getRootNode","highlightedValue","id","ids","inputBehavior","inputValue","invalid","loopFocus","multiple","name","navigate","onFocusOutside","onHighlightChange","onInputValueChange","onInteractOutside","onOpenChange","onOpenChange","onPointerDownOutside","onSelect","onValueChange","open","openOnChange","openOnClick","openOnKeyPress","placeholder","positioning","readOnly","required","scrollToIndexFn","selectionBehavior","translations","value","alwaysSubmitOnEnter"]);re()(["htmlFor"]);re()(["id"]);re()(["item","persistFocus"]);const Ve=e=>e.children(F()),Fe=y.forwardRef((e,t)=>{const n=F(),a=B(n.getControlProps(),e);return r.jsx(D.div,{...a,ref:t})});Fe.displayName="ComboboxControl";const _e=y.forwardRef((e,t)=>{const n=F(),a=B(n.getInputProps(),e),o=ke();return r.jsx(D.input,{"aria-describedby":o?.ariaDescribedby,...a,ref:t})});_e.displayName="ComboboxInput";const[Mt]=le({name:"ComboboxItemContext",hookName:"useComboboxItemContext",providerName:"<ComboboxItemProvider />"}),[Ut,jt]=le({name:"ComboboxItemPropsContext",hookName:"useComboboxItemPropsContext",providerName:"<ComboboxItemPropsProvider />"}),Gt=J(),Me=y.forwardRef((e,t)=>{const[n,a]=Gt(e,["item","persistFocus"]),o=F(),i=B(o.getItemProps(n),a),s=o.getItemState(n);return r.jsx(Ut,{value:n,children:r.jsx(Mt,{value:s,children:r.jsx(D.div,{...i,ref:t})})})});Me.displayName="ComboboxItem";const[Wt]=le({name:"ComboboxItemGroupPropsContext",hookName:"useComboboxItemGroupPropsContext",providerName:"<ComboboxItemGroupPropsProvider />"}),qt=J(),Ue=y.forwardRef((e,t)=>{const n=y.useId(),[a,o]=qt(e,["id"]),i={id:n,...a},s=F(),d=B(s.getItemGroupProps(i),o);return r.jsx(Wt,{value:i,children:r.jsx(D.div,{...d,ref:t})})});Ue.displayName="ComboboxItemGroup";const je=y.forwardRef((e,t)=>{const n=F(),a=jt(),o=B(n.getItemTextProps(a),e);return r.jsx(D.span,{...o,ref:t})});je.displayName="ComboboxItemText";const Ge=y.forwardRef((e,t)=>{const n=F(),a=Te(),o=B(n.getPositionerProps(),e);return a.unmounted?null:r.jsx(D.div,{...o,ref:t})});Ge.displayName="ComboboxPositioner";const zt=e=>{const t=y.useId(),{dir:n}=we(),{getRootNode:a}=tt(),o=ke(),i={id:t,ids:{label:o?.ids.label,input:o?.ids.control},disabled:o?.disabled,readOnly:o?.readOnly,required:o?.required,invalid:o?.invalid,dir:n,getRootNode:a,...e},s=yt(_t,i);return Rt(s,xt)},Kt=(e,t)=>{const[n,a]=ot(e),[o,i]=J()(a,["allowCustomValue","alwaysSubmitOnEnter","autoFocus","closeOnSelect","collection","composite","defaultHighlightedValue","defaultInputValue","defaultOpen","defaultValue","disabled","disableLayer","form","highlightedValue","id","ids","inputBehavior","inputValue","invalid","loopFocus","multiple","name","navigate","onFocusOutside","onHighlightChange","onInputValueChange","onInteractOutside","onOpenChange","onPointerDownOutside","onSelect","onValueChange","open","openOnChange","openOnClick","openOnKeyPress","placeholder","positioning","readOnly","required","scrollToIndexFn","selectionBehavior","translations","value"]),s=zt(o),d=nt(B({present:s.open},n)),x=B(s.getRootProps(),i);return r.jsx(St,{value:s,children:r.jsx(at,{value:d,children:r.jsx(D.div,{...x,ref:t})})})},$t=y.forwardRef(Kt),Yt=J(),We=y.forwardRef((e,t)=>{const[n,a]=Yt(e,["focusable"]),o=F(),i=B(o.getTriggerProps(n),a);return r.jsx(D.button,{...i,ref:t})});We.displayName="ComboboxTrigger";function Qt(e){const t=we(),n=e.locale??t.locale;return y.useMemo(()=>Ze({...e,locale:n}),[n,e])}var pe=(e,t)=>{const n=[],a=(o,i,s)=>{i-o>0&&n.push({start:o,end:i,match:s})};if(e.length===0)a(0,t,!1);else{let o=0;for(const i of e)a(o,i.start,!1),a(i.start,i.end,!0),o=i.end;a(o,t,!1)}return n},qe=e=>e.replace(/[|\\{}()[\]^$+*?.-]/g,t=>`\\${t}`);function Jt(e){const{text:t,query:n,ignoreCase:a,exactMatch:o}=e;if(o){const I=qe(n),h=new RegExp(`\\b(${I})\\b`,a?"i":""),V=t.match(h);if(!V||V.index===void 0)return[{text:t,match:!1}];const c=V.index,p=c+V[0].length;return pe([{start:c,end:p}],t.length).map(C=>({text:t.slice(C.start,C.end),match:!!C.match}))}const i=a?t.toLowerCase():t,s=a&&typeof n=="string"?n.toLowerCase():n,d=typeof i=="string"?i.indexOf(s):-1;if(d===-1)return[{text:t,match:!1}];const x=d+s.length;return pe([{start:d,end:x}],t.length).map(I=>({text:t.slice(I.start,I.end),match:!!I.match}))}var Xt=(e,t,n)=>{const a=e.filter(Boolean).map(i=>qe(i)),o=n?`\\b(${a.join("|")})\\b`:`(${a.join("|")})`;return new RegExp(o,t)},Zt=(e,t=!0)=>`${e?"i":""}${t?"g":""}`;function en(e){const{text:t,query:n,ignoreCase:a,matchAll:o,exactMatch:i}=e;if(n.length===0)return[{text:t,match:!1}];const s=Zt(a,o),d=Xt(Array.isArray(n)?n:[n],s,i),x=[...t.matchAll(d)].map(g=>({start:g.index||0,end:(g.index||0)+g[0].length}));return pe(x,e.text.length).map(g=>({text:e.text.slice(g.start,g.end),match:!!g.match}))}var tn=e=>{if(e.matchAll==null&&(e.matchAll=Array.isArray(e.query)),!e.matchAll&&Array.isArray(e.query))throw new Error("matchAll must be true when using multiple queries");return e.matchAll?en(e):Jt(e)};const nn=e=>y.useMemo(()=>tn(e),[e]),an=J(),on=e=>{if(typeof e.text!="string")throw new Error("[ark-ui/highlight] text must be a string");const[t,n]=an(e,["query","text","ignoreCase","matchAll","exactMatch"]),a=nn(t);return r.jsx(y.Fragment,{children:a.map(({text:o,match:i},s)=>i?r.jsx("mark",{...n,children:o},s):r.jsx(y.Fragment,{children:o},s))})},sn="_root_z8zhg_41",ln="_control_z8zhg_48",rn="_input_z8zhg_59",cn="_startAdornment_z8zhg_130",un="_iconContainer_z8zhg_138",dn="_clearButton_z8zhg_145",gn="_trigger_z8zhg_173",pn="_positioner_z8zhg_206",hn="_content_z8zhg_211",mn="_itemGroup_z8zhg_272",vn="_item_z8zhg_272",In="_itemIcon_z8zhg_294",fn="_itemText_z8zhg_324",Cn="_noMatches_z8zhg_338",bn="_disabled_z8zhg_345",yn="_invalid_z8zhg_365",T={root:sn,control:ln,input:rn,startAdornment:cn,iconContainer:un,clearButton:dn,trigger:gn,positioner:pn,content:hn,itemGroup:mn,item:vn,itemIcon:In,itemText:fn,noMatches:Cn,disabled:bn,invalid:yn},H=({id:e,options:t,style:n,className:a,placeholder:o="Start typing to search...",disabled:i=!1,invalid:s=!1,onValueChange:d,onInputValueChange:x,noMatchesMessage:g="No matches found",highlightMatch:I=!0,showTrigger:h=!0,startAdornment:V})=>{const c=Qt({sensitivity:"base"}),{collection:p,filter:v}=Pt({initialItems:t.map(b=>b.label),filter:(b,L)=>c.contains(b,L)}),C=b=>{v(b.inputValue),x?.(b.inputValue)},G=b=>{const L=b.value[0];if(!L)return;const A=t.find(l=>l.label===L);A&&d?.(A.value)},_=Xe(T.root,{[T.disabled]:i,[T.invalid]:s},a);return r.jsxs($t,{id:e,collection:p,className:_,style:n,disabled:i,invalid:s,onInputValueChange:C,onValueChange:G,closeOnSelect:!0,children:[r.jsxs(Fe,{className:T.control,children:[V&&r.jsx("span",{className:T.startAdornment,children:V}),r.jsx(_e,{className:T.input,placeholder:o}),r.jsx(Ve,{children:b=>r.jsxs("div",{className:T.iconContainer,children:[b.inputValue&&!i&&r.jsx(Ne,{className:T.clearButton,"aria-label":"Clear",children:r.jsx(Y,{icon:"close",size:"medium"})}),h&&r.jsx(We,{className:T.trigger,"aria-label":"Toggle dropdown",children:r.jsx(Y,{icon:"keyboard_arrow_down",size:"medium"})})]})})]}),r.jsx(it,{children:r.jsx(Ge,{className:T.positioner,children:r.jsx(Le,{className:T.content,children:p.items.length===0?r.jsx("div",{className:T.noMatches,children:g}):r.jsx(Ue,{className:T.itemGroup,children:r.jsx(Ve,{children:b=>p.items.map(L=>{const A=t.find(l=>l.label===L);return r.jsxs(Me,{item:L,className:T.item,children:[A?.icon&&r.jsx(Y,{className:T.itemIcon,icon:A.icon,"aria-hidden":"true"}),r.jsx(je,{className:T.itemText,children:I?r.jsx(on,{query:b.inputValue,text:L,ignoreCase:!0}):L})]},L)})})})})})})]})};H.__docgenInfo={description:"",methods:[],displayName:"DsAutocomplete",props:{id:{required:!1,tsType:{name:"string"},description:"Unique identifier for the autocomplete component"},options:{required:!0,tsType:{name:"Array",elements:[{name:"DsAutocompleteOption"}],raw:"DsAutocompleteOption[]"},description:"Options to display in the dropdown"},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:"Additional styles to apply to the component"},className:{required:!1,tsType:{name:"string"},description:"Additional CSS class names"},placeholder:{required:!1,tsType:{name:"string"},description:"Placeholder text to display when input is empty",defaultValue:{value:"'Start typing to search...'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the autocomplete is disabled",defaultValue:{value:"false",computed:!1}},invalid:{required:!1,tsType:{name:"boolean"},description:"Whether the autocomplete is in an invalid state",defaultValue:{value:"false",computed:!1}},onValueChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:"Event handler called when the value changes (when an option is selected or custom value is entered)"},onInputValueChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:"Event handler called when the input value changes (on every keystroke)"},noMatchesMessage:{required:!1,tsType:{name:"string"},description:`Message to display when no options match the input
@default 'No matches found'`,defaultValue:{value:"'No matches found'",computed:!1}},highlightMatch:{required:!1,tsType:{name:"boolean"},description:`Whether to highlight the matching text in the dropdown options
@default true`,defaultValue:{value:"true",computed:!1}},showTrigger:{required:!1,tsType:{name:"boolean"},description:`Whether to show the dropdown trigger (arrow) button.
If false, the dropdown will only open on typing.
@default true`,defaultValue:{value:"true",computed:!1}},startAdornment:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"Content to display at the start of the input (e.g., a search icon)."}}};const{expect:m,fn:Ee,screen:j,userEvent:E,within:X}=__STORYBOOK_MODULE_TEST__,Un={title:"Design System/Autocomplete",component:H,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{options:{control:"object",description:"Options to display in the autocomplete dropdown"},placeholder:{control:"text",description:"Placeholder text when input is empty"},highlightMatch:{control:"boolean",description:"Whether to highlight the matching text in the dropdown options"},showTrigger:{control:"boolean",description:"Whether to show the dropdown trigger (arrow) button"},startAdornment:{control:"object",description:"Content to display at the start of the input (e.g., a search icon)"},noMatchesMessage:{control:"text",description:"Message to display when no options match the input"}},args:{onValueChange:Ee(),onInputValueChange:Ee()}},K=[{value:"apple",label:"Apple"},{value:"banana",label:"Banana"},{value:"cherry",label:"Cherry"},{value:"date",label:"Date"},{value:"elderberry",label:"Elderberry"},{value:"fig",label:"Fig"},{value:"grape",label:"Grape"},{value:"honeydew",label:"Honeydew"},{value:"kiwi",label:"Kiwi"},{value:"lemon",label:"Lemon"},{value:"mango",label:"Mango"},{value:"nectarine",label:"Nectarine"}],ze=[{value:"us",label:"United States"},{value:"uk",label:"United Kingdom"},{value:"ca",label:"Canada"},{value:"au",label:"Australia"},{value:"de",label:"Germany"},{value:"fr",label:"France"},{value:"it",label:"Italy"},{value:"es",label:"Spain"},{value:"jp",label:"Japan"},{value:"cn",label:"China"}],ee={render:e=>r.jsx(H,{...e}),args:{options:K,showTrigger:!0,placeholder:"Select or type to search...",style:{width:"300px"}},play:async({args:e,canvasElement:t})=>{const n=X(t),a=n.getByRole("combobox"),o=n.getByLabelText("Toggle dropdown");await m(o).toBeInTheDocument(),await E.click(o);const i=await j.findByRole("option",{name:/Apple/i});await m(i).toBeInTheDocument(),await E.click(a),await m(a).toHaveFocus(),await E.type(a,"b"),await m(j.queryByRole("option",{name:/Apple/i})).not.toBeInTheDocument(),await m(j.getByRole("option",{name:/Banana/i})).toBeInTheDocument(),await m(e.onInputValueChange).toHaveBeenLastCalledWith("b"),await E.click(j.getByRole("option",{name:/Banana/i})),await m(e.onInputValueChange).toHaveBeenLastCalledWith("Banana"),await m(e.onValueChange).toHaveBeenCalledWith("banana");const s=n.getByLabelText("Clear");await E.click(s),await m(e.onInputValueChange).toHaveBeenCalledWith("")}},te={render:e=>r.jsx(H,{...e}),args:{options:K,showTrigger:!1,placeholder:"Start typing to search...",style:{width:"300px"}},play:async({args:e,canvasElement:t})=>{const n=X(t),a=n.getByRole("combobox"),o=n.queryByLabelText("Toggle dropdown");await m(o).not.toBeInTheDocument(),await E.click(a),await m(a).toHaveFocus(),await m(n.queryByRole("listbox")).not.toBeInTheDocument(),await E.type(a,"a"),await m(e.onInputValueChange).toHaveBeenLastCalledWith("a");const i=await j.findByRole("option",{name:/Apple/i});await m(i).toBeInTheDocument(),await E.click(i),await m(e.onInputValueChange).toHaveBeenLastCalledWith("Apple"),await m(e.onValueChange).toHaveBeenCalledWith("apple");const s=n.getByLabelText("Clear");await E.click(s),await m(e.onInputValueChange).toHaveBeenCalledWith("")}},ne={render:e=>r.jsx(H,{...e}),args:{options:ze,showTrigger:!1,startAdornment:r.jsx(Y,{icon:"search",size:"medium","aria-label":"search icon"}),placeholder:"Search countries...",style:{width:"300px"}},play:async({args:e,canvasElement:t})=>{const n=X(t),a=n.getByRole("combobox"),o=n.getByLabelText("search icon");await m(o).toBeInTheDocument(),await E.type(a,"Sta"),await m(e.onInputValueChange).toHaveBeenLastCalledWith("Sta");const i=await j.findByRole("option",{name:/United States/i});await m(i).toBeInTheDocument(),await E.click(i),await m(e.onInputValueChange).toHaveBeenCalledWith("United States"),await m(e.onValueChange).toHaveBeenCalledWith("us")}},ae={render:()=>r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[r.jsxs("div",{style:{width:"300px"},children:[r.jsx("p",{children:"Default (with trigger)"}),r.jsx(H,{options:K,showTrigger:!0,placeholder:"Select or type..."})]}),r.jsxs("div",{style:{width:"300px"},children:[r.jsx("p",{children:"Search Mode (no trigger)"}),r.jsx(H,{options:K,showTrigger:!1,placeholder:"Start typing..."})]}),r.jsxs("div",{style:{width:"300px"},children:[r.jsx("p",{children:"Search with Icon"}),r.jsx(H,{options:ze,showTrigger:!1,startAdornment:r.jsx(Y,{icon:"search",size:"medium","aria-label":"search icon"}),placeholder:"Search countries..."})]})]}),play:async({canvasElement:e})=>{const n=X(e).getAllByRole("combobox");await m(n).toHaveLength(3);const a=n[0];await E.click(a),await m(a).toHaveFocus(),await E.type(a,"ap");const o=await j.findByText("Apple");await m(o).toBeInTheDocument(),await E.clear(a),await E.keyboard("{Escape}");const i=n[1];await E.click(i),await E.type(i,"ban");const s=await j.findByText("Banana");await m(s).toBeInTheDocument(),await E.clear(i),await E.keyboard("{Escape}")}},oe={render:()=>r.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[r.jsxs("div",{style:{width:"300px"},children:[r.jsx("p",{children:"Disabled"}),r.jsx(H,{options:K,disabled:!0,placeholder:"Disabled autocomplete..."})]}),r.jsxs("div",{style:{width:"300px"},children:[r.jsx("p",{children:"Invalid"}),r.jsx(H,{options:K,invalid:!0,placeholder:"Invalid autocomplete..."})]})]}),play:async({canvasElement:e})=>{const n=X(e).getAllByRole("combobox");await m(n).toHaveLength(2);const a=n[0];await m(a).toBeDisabled();const o=n[1];await m(o).toBeInTheDocument(),await m(o).not.toBeDisabled()}};ee.parameters={...ee.parameters,docs:{...ee.parameters?.docs,source:{originalSource:`{
  render: args => <DsAutocomplete {...args} />,
  args: {
    options: mockOptions,
    showTrigger: true,
    placeholder: 'Select or type to search...',
    style: {
      width: '300px'
    }
  },
  play: async ({
    args,
    canvasElement
  }) => {
    const canvas = within(canvasElement);
    const input = canvas.getByRole('combobox');
    const trigger = canvas.getByLabelText('Toggle dropdown');
    await expect(trigger).toBeInTheDocument();
    await userEvent.click(trigger);
    const appleOption = await screen.findByRole('option', {
      name: /Apple/i
    });
    await expect(appleOption).toBeInTheDocument();
    await userEvent.click(input);
    await expect(input).toHaveFocus();
    await userEvent.type(input, 'b');
    await expect(screen.queryByRole('option', {
      name: /Apple/i
    })).not.toBeInTheDocument();
    await expect(screen.getByRole('option', {
      name: /Banana/i
    })).toBeInTheDocument();
    await expect(args.onInputValueChange).toHaveBeenLastCalledWith('b');
    await userEvent.click(screen.getByRole('option', {
      name: /Banana/i
    }));
    await expect(args.onInputValueChange).toHaveBeenLastCalledWith('Banana');
    await expect(args.onValueChange).toHaveBeenCalledWith('banana');
    const clearButton = canvas.getByLabelText('Clear');
    await userEvent.click(clearButton);
    await expect(args.onInputValueChange).toHaveBeenCalledWith('');
  }
}`,...ee.parameters?.docs?.source}}};te.parameters={...te.parameters,docs:{...te.parameters?.docs,source:{originalSource:`{
  render: args => <DsAutocomplete {...args} />,
  args: {
    options: mockOptions,
    showTrigger: false,
    placeholder: 'Start typing to search...',
    style: {
      width: '300px'
    }
  },
  play: async ({
    args,
    canvasElement
  }) => {
    const canvas = within(canvasElement);
    const input = canvas.getByRole('combobox');
    const trigger = canvas.queryByLabelText('Toggle dropdown');
    await expect(trigger).not.toBeInTheDocument();
    await userEvent.click(input);
    await expect(input).toHaveFocus();
    await expect(canvas.queryByRole('listbox')).not.toBeInTheDocument();
    await userEvent.type(input, 'a');
    await expect(args.onInputValueChange).toHaveBeenLastCalledWith('a');
    const appleOption = await screen.findByRole('option', {
      name: /Apple/i
    });
    await expect(appleOption).toBeInTheDocument();
    await userEvent.click(appleOption);
    await expect(args.onInputValueChange).toHaveBeenLastCalledWith('Apple');
    await expect(args.onValueChange).toHaveBeenCalledWith('apple');
    const clearButton = canvas.getByLabelText('Clear');
    await userEvent.click(clearButton);
    await expect(args.onInputValueChange).toHaveBeenCalledWith('');
  }
}`,...te.parameters?.docs?.source}}};ne.parameters={...ne.parameters,docs:{...ne.parameters?.docs,source:{originalSource:`{
  render: args => <DsAutocomplete {...args} />,
  args: {
    options: countries,
    showTrigger: false,
    startAdornment: <DsIcon icon="search" size="medium" aria-label="search icon" />,
    placeholder: 'Search countries...',
    style: {
      width: '300px'
    }
  },
  play: async ({
    args,
    canvasElement
  }) => {
    const canvas = within(canvasElement);
    const input = canvas.getByRole('combobox');
    const searchIcon = canvas.getByLabelText('search icon');
    await expect(searchIcon).toBeInTheDocument();
    await userEvent.type(input, 'Sta');
    await expect(args.onInputValueChange).toHaveBeenLastCalledWith('Sta');
    const usOption = await screen.findByRole('option', {
      name: /United States/i
    });
    await expect(usOption).toBeInTheDocument();
    await userEvent.click(usOption);
    await expect(args.onInputValueChange).toHaveBeenCalledWith('United States');
    await expect(args.onValueChange).toHaveBeenCalledWith('us');
  }
}`,...ne.parameters?.docs?.source}}};ae.parameters={...ae.parameters,docs:{...ae.parameters?.docs,source:{originalSource:`{
  render: () => <div style={{
    display: 'flex',
    flexDirection: 'column',
    gap: '20px'
  }}>
            <div style={{
      width: '300px'
    }}>
                <p>Default (with trigger)</p>
                <DsAutocomplete options={mockOptions} showTrigger placeholder="Select or type..." />
            </div>
            <div style={{
      width: '300px'
    }}>
                <p>Search Mode (no trigger)</p>
                <DsAutocomplete options={mockOptions} showTrigger={false} placeholder="Start typing..." />
            </div>
            <div style={{
      width: '300px'
    }}>
                <p>Search with Icon</p>
                <DsAutocomplete options={countries} showTrigger={false} startAdornment={<DsIcon icon="search" size="medium" aria-label="search icon" />} placeholder="Search countries..." />
            </div>
        </div>,
  play: async ({
    canvasElement
  }) => {
    const canvas = within(canvasElement);
    const inputs = canvas.getAllByRole('combobox');
    await expect(inputs).toHaveLength(3);
    const defaultInput = inputs[0] as HTMLInputElement;
    await userEvent.click(defaultInput);
    await expect(defaultInput).toHaveFocus();
    await userEvent.type(defaultInput, 'ap');
    const appleOption = await screen.findByText('Apple');
    await expect(appleOption).toBeInTheDocument();
    await userEvent.clear(defaultInput);
    await userEvent.keyboard('{Escape}');
    const searchModeInput = inputs[1] as HTMLInputElement;
    await userEvent.click(searchModeInput);
    await userEvent.type(searchModeInput, 'ban');
    const bananaOption = await screen.findByText('Banana');
    await expect(bananaOption).toBeInTheDocument();
    await userEvent.clear(searchModeInput);
    await userEvent.keyboard('{Escape}');
  }
}`,...ae.parameters?.docs?.source}}};oe.parameters={...oe.parameters,docs:{...oe.parameters?.docs,source:{originalSource:`{
  render: () => <div style={{
    display: 'flex',
    flexDirection: 'column',
    gap: '20px'
  }}>
            <div style={{
      width: '300px'
    }}>
                <p>Disabled</p>
                <DsAutocomplete options={mockOptions} disabled placeholder="Disabled autocomplete..." />
            </div>
            <div style={{
      width: '300px'
    }}>
                <p>Invalid</p>
                <DsAutocomplete options={mockOptions} invalid placeholder="Invalid autocomplete..." />
            </div>
        </div>,
  play: async ({
    canvasElement
  }) => {
    const canvas = within(canvasElement);
    const inputs = canvas.getAllByRole('combobox');
    await expect(inputs).toHaveLength(2);
    const disabledInput = inputs[0] as HTMLInputElement;
    await expect(disabledInput).toBeDisabled();
    const invalidInput = inputs[1] as HTMLInputElement;
    await expect(invalidInput).toBeInTheDocument();
    await expect(invalidInput).not.toBeDisabled();
  }
}`,...oe.parameters?.docs?.source}}};const jn=["Default","SearchMode","SearchWithIcon","AllVariants","States"];export{ae as AllVariants,ee as Default,te as SearchMode,ne as SearchWithIcon,oe as States,jn as __namedExportsOrder,Un as default};
