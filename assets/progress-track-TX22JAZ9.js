import{j as p}from"./jsx-runtime-u17CrQMm.js";import{r as f}from"./iframe-JBeCcR5A.js";import{c as N,a as h,u as S,b as I}from"./use-locale-context-Bhv3rwrO.js";import{Q as V,d as $,R as O,S as C,T as M,o as A,p as L,P as j,U}from"./index-DtYWorBG.js";import{c as z}from"./create-split-props-u5h9OPvL.js";const[D,b]=N({name:"ProgressContext",hookName:"useProgressContext",providerName:"<ProgressProvider />"}),H=f.forwardRef((e,t)=>{const r=b(),s=V(r.getRangeProps(),e);return p.jsx(h.div,{...s,ref:t})});H.displayName="ProgressRange";var F=A("progress").parts("root","label","track","range","valueText","view","circle","circleTrack","circleRange"),n=F.build(),Q=e=>e.ids?.root??`progress-${e.id}`,W=e=>e.ids?.track??`progress-${e.id}-track`,q=e=>e.ids?.label??`progress-${e.id}-label`,B=e=>e.ids?.circle??`progress-${e.id}-circle`;function G(e,t){const{context:r,computed:s,prop:a,send:o,scope:i}=e,l=s("percent"),w=s("isIndeterminate")?"":s("formatter").format(l/100),c=a("max"),g=a("min"),d=a("orientation"),E=a("translations"),P=s("isIndeterminate"),u=r.get("value"),T=E?.value({value:u,max:c,percent:l,min:g,formatter:s("formatter")})??"",m=J(u,c),y={role:"progressbar","aria-label":T,"data-max":c,"aria-valuemin":g,"aria-valuemax":c,"aria-valuenow":u??void 0,"data-orientation":d,"data-state":m},x=X(e);return{value:u,valueAsString:T,min:g,max:c,percent:l,percentAsString:w,indeterminate:P,setValue(v){o({type:"VALUE.SET",value:v})},setToMax(){o({type:"VALUE.SET",value:c})},setToMin(){o({type:"VALUE.SET",value:g})},getRootProps(){return t.element({dir:a("dir"),...n.root.attrs,id:Q(i),"data-max":c,"data-value":u??void 0,"data-state":m,"data-orientation":d,style:{"--percent":P?void 0:l}})},getLabelProps(){return t.element({dir:a("dir"),id:q(i),...n.label.attrs,"data-orientation":d})},getValueTextProps(){return t.element({dir:a("dir"),"aria-live":"polite",...n.valueText.attrs})},getTrackProps(){return t.element({dir:a("dir"),id:W(i),...n.track.attrs,...y})},getRangeProps(){return t.element({dir:a("dir"),...n.range.attrs,"data-orientation":d,"data-state":m,style:{[s("isHorizontal")?"width":"height"]:P?void 0:`${l}%`}})},getCircleProps(){return t.element({dir:a("dir"),id:B(i),...n.circle.attrs,...y,...x.root})},getCircleTrackProps(){return t.element({dir:a("dir"),"data-orientation":d,...n.circleTrack.attrs,...x.track})},getCircleRangeProps(){return t.element({dir:a("dir"),...n.circleRange.attrs,...x.range,"data-state":m})},getViewProps(v){return t.element({dir:a("dir"),...n.view.attrs,"data-state":v.state,hidden:v.state!==m})}}}function J(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}var R={style:{"--radius":"calc(var(--size) / 2 - var(--thickness) / 2)",cx:"calc(var(--size) / 2)",cy:"calc(var(--size) / 2)",r:"var(--radius)",fill:"transparent",strokeWidth:"var(--thickness)"}},K={style:{width:"var(--size)",height:"var(--size)"}};function X(e){const{context:t,computed:r}=e;return{root:K,track:R,range:{opacity:t.get("value")===0?0:void 0,style:{...R.style,"--percent":r("percent"),"--circumference":"calc(2 * 3.14159 * var(--radius))","--offset":"calc(var(--circumference) * (100 - var(--percent)) / 100)",strokeDashoffset:"calc(var(--circumference) * ((100 - var(--percent)) / 100))",strokeDasharray:r("isIndeterminate")?void 0:"var(--circumference)",transformOrigin:"center",transform:"rotate(-90deg)"}}}}var Y=$({props({props:e}){const t=e.min??0,r=e.max??100;return{orientation:"horizontal",...e,max:r,min:t,defaultValue:e.defaultValue!==void 0?e.defaultValue:ee(t,r),formatOptions:{style:"percent",...e.formatOptions},translations:{value:({value:s,percent:a,formatter:o})=>{if(s===null)return"loading...";if(o){const l=o.resolvedOptions().style==="percent"?a/100:s;return o.format(l)}return s.toString()},...e.translations}}},initialState(){return"idle"},entry:["validateContext"],context({bindable:e,prop:t}){return{value:e(()=>({defaultValue:t("defaultValue"),value:t("value"),onChange(r){t("onValueChange")?.({value:r})}}))}},computed:{isIndeterminate:({context:e})=>e.get("value")===null,percent({context:e,prop:t}){const r=e.get("value");return C(r)?M(r,t("min"),t("max"))*100:-1},formatter:O(({prop:e})=>[e("locale"),e("formatOptions")],([e,t])=>new Intl.NumberFormat(e,t)),isHorizontal:({prop:e})=>e("orientation")==="horizontal"},states:{idle:{on:{"VALUE.SET":{actions:["setValue"]}}}},implementations:{actions:{setValue:({context:e,event:t,prop:r})=>{const s=t.value===null?null:Math.max(0,Math.min(t.value,r("max")));e.set("value",s)},validateContext:({context:e,prop:t})=>{const r=t("max"),s=t("min"),a=e.get("value");if(a!=null){if(!k(r))throw new Error(`[progress] The max value passed \`${r}\` is not a valid number`);if(!Z(a,r))throw new Error(`[progress] The value passed \`${a}\` exceeds the max value \`${r}\``);if(!_(a,s))throw new Error(`[progress] The value passed \`${a}\` exceeds the min value \`${s}\``)}}}}}),k=e=>C(e)&&!isNaN(e),Z=(e,t)=>k(e)&&e<=t,_=(e,t)=>k(e)&&e>=t,ee=(e,t)=>e+(t-e)/2;L()(["dir","getRootNode","id","ids","max","min","orientation","translations","value","onValueChange","defaultValue","formatOptions","locale"]);const te=e=>{const t=f.useId(),{getRootNode:r}=S(),{dir:s,locale:a}=I(),o={id:t,dir:s,locale:a,getRootNode:r,...e},i=j(Y,o);return G(i,U)},re=z(),ae=f.forwardRef((e,t)=>{const[r,s]=re(e,["defaultValue","formatOptions","id","ids","locale","max","min","onValueChange","orientation","translations","value"]),a=te(r),o=V(a.getRootProps(),s);return p.jsx(D,{value:a,children:p.jsx(h.div,{...o,ref:t})})});ae.displayName="ProgressRoot";const se=f.forwardRef((e,t)=>{const r=b(),s=V(r.getTrackProps(),e);return p.jsx(h.div,{...s,ref:t})});se.displayName="ProgressTrack";export{ae as P,se as a,H as b,b as u};
