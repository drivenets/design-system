import{j as u}from"./jsx-runtime-u17CrQMm.js";import{r as E}from"./iframe-Dd1XyJiR.js";import{c as _e}from"./index-CEcfwOnM.js";import{D as q}from"./ds-icon-BXvd3ovm.js";import{D as we}from"./ds-checkbox-2x0z1_uZ.js";import{D as ke}from"./ds-button-CpD5UZZC.js";import{D as ae}from"./ds-chip-0Ba_SFpG.js";import{c as re,a as O,d as He,b as Me,u as je}from"./use-locale-context-GkyAkSTB.js";import{D as ce}from"./ds-typography-CGEkpxWa.js";import{D as qe}from"./ds-text-input-BYC5lgb6.js";import{a1 as Ie,aC as J,N as Q,O as C,d as Ue,E as Be,w as ue,aD as We,U as de,aE as Ke,aF as te,v as $e,l as m,a4 as ze,aG as Ye,e as Je,f as Qe,aH as he,r as X,aI as Xe,P as Ze,t as et,aJ as tt,p as $,M as it,R as st}from"./index-M7ONd_Nt.js";import{g as lt,a as ge}from"./index-D2Rt1hEI.js";import{t as nt}from"./index-Bu3zNFyU.js";import{u as ve}from"./use-field-context-_ctLfjXD.js";import{s as rt,P as ot}from"./portal-DlzNYFtZ.js";import{c as ye}from"./create-split-props-u5h9OPvL.js";import{a as Ee,u as at,P as ct}from"./use-presence-Cdsvx3eD.js";var ut=Object.defineProperty,dt=(e,s,t)=>s in e?ut(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,c=(e,s,t)=>dt(e,typeof s!="symbol"?s+"":s,t),W={itemToValue(e){return typeof e=="string"?e:J(e)&&Q(e,"value")?e.value:""},itemToString(e){return typeof e=="string"?e:J(e)&&Q(e,"label")?e.label:W.itemToValue(e)},isItemDisabled(e){return J(e)&&Q(e,"disabled")?!!e.disabled:!1}},oe=class Te{constructor(s){this.options=s,c(this,"items"),c(this,"indexMap",null),c(this,"copy",t=>new Te({...this.options,items:t??[...this.items]})),c(this,"isEqual",t=>Ie(this.items,t.items)),c(this,"setItems",t=>this.copy(t)),c(this,"getValues",(t=this.items)=>{const i=[];for(const l of t){const n=this.getItemValue(l);n!=null&&i.push(n)}return i}),c(this,"find",t=>{if(t==null)return null;const i=this.indexOf(t);return i!==-1?this.at(i):null}),c(this,"findMany",t=>{const i=[];for(const l of t){const n=this.find(l);n!=null&&i.push(n)}return i}),c(this,"at",t=>{if(!this.options.groupBy&&!this.options.groupSort)return this.items[t]??null;let i=0;const l=this.group();for(const[,n]of l)for(const o of n){if(i===t)return o;i++}return null}),c(this,"sortFn",(t,i)=>{const l=this.indexOf(t),n=this.indexOf(i);return(l??0)-(n??0)}),c(this,"sort",t=>[...t].sort(this.sortFn.bind(this))),c(this,"getItemValue",t=>t==null?null:this.options.itemToValue?.(t)??W.itemToValue(t)),c(this,"getItemDisabled",t=>t==null?!1:this.options.isItemDisabled?.(t)??W.isItemDisabled(t)),c(this,"stringifyItem",t=>t==null?null:this.options.itemToString?.(t)??W.itemToString(t)),c(this,"stringify",t=>t==null?null:this.stringifyItem(this.find(t))),c(this,"stringifyItems",(t,i=", ")=>{const l=[];for(const n of t){const o=this.stringifyItem(n);o!=null&&l.push(o)}return l.join(i)}),c(this,"stringifyMany",(t,i)=>this.stringifyItems(this.findMany(t),i)),c(this,"has",t=>this.indexOf(t)!==-1),c(this,"hasItem",t=>t==null?!1:this.has(this.getItemValue(t))),c(this,"group",()=>{const{groupBy:t,groupSort:i}=this.options;if(!t)return[["",[...this.items]]];const l=new Map;this.items.forEach((o,r)=>{const h=t(o,r);l.has(h)||l.set(h,[]),l.get(h).push(o)});let n=Array.from(l.entries());return i&&n.sort(([o],[r])=>{if(typeof i=="function")return i(o,r);if(Array.isArray(i)){const h=i.indexOf(o),f=i.indexOf(r);return h===-1?1:f===-1?-1:h-f}return i==="asc"?o.localeCompare(r):i==="desc"?r.localeCompare(o):0}),n}),c(this,"getNextValue",(t,i=1,l=!1)=>{let n=this.indexOf(t);if(n===-1)return null;for(n=l?Math.min(n+i,this.size-1):n+i;n<=this.size&&this.getItemDisabled(this.at(n));)n++;return this.getItemValue(this.at(n))}),c(this,"getPreviousValue",(t,i=1,l=!1)=>{let n=this.indexOf(t);if(n===-1)return null;for(n=l?Math.max(n-i,0):n-i;n>=0&&this.getItemDisabled(this.at(n));)n--;return this.getItemValue(this.at(n))}),c(this,"indexOf",t=>{if(t==null)return-1;if(!this.options.groupBy&&!this.options.groupSort)return this.items.findIndex(i=>this.getItemValue(i)===t);if(!this.indexMap){this.indexMap=new Map;let i=0;const l=this.group();for(const[,n]of l)for(const o of n){const r=this.getItemValue(o);r!=null&&this.indexMap.set(r,i),i++}}return this.indexMap.get(t)??-1}),c(this,"getByText",(t,i)=>{const l=i!=null?this.indexOf(i):-1,n=t.length===1;for(let o=0;o<this.items.length;o++){const r=this.items[(l+o+1)%this.items.length];if(!(n&&this.getItemValue(r)===i)&&!this.getItemDisabled(r)&&ht(this.stringifyItem(r),t))return r}}),c(this,"search",(t,i)=>{const{state:l,currentValue:n,timeout:o=350}=i,r=l.keysSoFar+t,f=r.length>1&&Array.from(r).every(y=>y===r[0])?r[0]:r,b=this.getByText(f,n),p=this.getItemValue(b);function T(){clearTimeout(l.timer),l.timer=-1}function V(y){l.keysSoFar=y,T(),y!==""&&(l.timer=+setTimeout(()=>{V(""),T()},o))}return V(r),p}),c(this,"update",(t,i)=>{let l=this.indexOf(t);return l===-1?this:this.copy([...this.items.slice(0,l),i,...this.items.slice(l+1)])}),c(this,"upsert",(t,i,l="append")=>{let n=this.indexOf(t);return n===-1?(l==="append"?this.append:this.prepend)(i):this.copy([...this.items.slice(0,n),i,...this.items.slice(n+1)])}),c(this,"insert",(t,...i)=>this.copy(w(this.items,t,...i))),c(this,"insertBefore",(t,...i)=>{let l=this.indexOf(t);if(l===-1)if(this.items.length===0)l=0;else return this;return this.copy(w(this.items,l,...i))}),c(this,"insertAfter",(t,...i)=>{let l=this.indexOf(t);if(l===-1)if(this.items.length===0)l=0;else return this;return this.copy(w(this.items,l+1,...i))}),c(this,"prepend",(...t)=>this.copy(w(this.items,0,...t))),c(this,"append",(...t)=>this.copy(w(this.items,this.items.length,...t))),c(this,"filter",t=>{const i=this.items.filter((l,n)=>t(this.stringifyItem(l),n,l));return this.copy(i)}),c(this,"remove",(...t)=>{const i=t.map(l=>typeof l=="string"?l:this.getItemValue(l));return this.copy(this.items.filter(l=>{const n=this.getItemValue(l);return n==null?!1:!i.includes(n)}))}),c(this,"move",(t,i)=>{const l=this.indexOf(t);return l===-1?this:this.copy(U(this.items,[l],i))}),c(this,"moveBefore",(t,...i)=>{let l=this.items.findIndex(o=>this.getItemValue(o)===t);if(l===-1)return this;let n=i.map(o=>this.items.findIndex(r=>this.getItemValue(r)===o)).sort((o,r)=>o-r);return this.copy(U(this.items,n,l))}),c(this,"moveAfter",(t,...i)=>{let l=this.items.findIndex(o=>this.getItemValue(o)===t);if(l===-1)return this;let n=i.map(o=>this.items.findIndex(r=>this.getItemValue(r)===o)).sort((o,r)=>o-r);return this.copy(U(this.items,n,l+1))}),c(this,"reorder",(t,i)=>this.copy(U(this.items,[t],i))),c(this,"compareValue",(t,i)=>{const l=this.indexOf(t),n=this.indexOf(i);return l<n?-1:l>n?1:0}),c(this,"range",(t,i)=>{let l=[],n=t;for(;n!=null;){if(this.find(n)&&l.push(n),n===i)return l;n=this.getNextValue(n)}return[]}),c(this,"getValueRange",(t,i)=>t&&i?this.compareValue(t,i)<=0?this.range(t,i):this.range(i,t):[]),c(this,"toString",()=>{let t="";for(const i of this.items){const l=this.getItemValue(i),n=this.stringifyItem(i),o=this.getItemDisabled(i),r=[l,n,o].filter(Boolean).join(":");t+=r+","}return t}),c(this,"toJSON",()=>({size:this.size,first:this.firstValue,last:this.lastValue})),this.items=[...s.items]}get size(){return this.items.length}get firstValue(){let s=0;for(;this.getItemDisabled(this.at(s));)s++;return this.getItemValue(this.at(s))}get lastValue(){let s=this.size-1;for(;this.getItemDisabled(this.at(s));)s--;return this.getItemValue(this.at(s))}*[Symbol.iterator](){yield*this.items}},ht=(e,s)=>!!e?.toLowerCase().startsWith(s.toLowerCase());function w(e,s,...t){return[...e.slice(0,s),...t,...e.slice(s)]}function U(e,s,t){s=[...s].sort((l,n)=>l-n);const i=s.map(l=>e[l]);for(let l=s.length-1;l>=0;l--)e=[...e.slice(0,s[l]),...e.slice(s[l]+1)];return t=Math.max(0,t-s.filter(l=>l<t).length),[...e.slice(0,t),...i,...e.slice(t)]}const gt=e=>new oe(e),[mt,R]=re({name:"SelectContext",hookName:"useSelectContext",providerName:"<SelectProvider />"}),Se=E.forwardRef((e,s)=>{const t=R(),i=C(t.getClearTriggerProps(),e);return u.jsx(O.button,{...i,ref:s})});Se.displayName="SelectClearTrigger";const Ce=E.forwardRef((e,s)=>{const t=R(),i=Ee(),l=C(t.getContentProps(),i.getPresenceProps(),e);return i.unmounted?null:u.jsx(O.div,{...l,ref:He(i.ref,s)})});Ce.displayName="SelectContent";const Oe=E.forwardRef((e,s)=>{const t=R(),i=C(t.getControlProps(),e);return u.jsx(O.div,{...i,ref:s})});Oe.displayName="SelectControl";const Re=E.forwardRef((e,s)=>{const t=R(),i=C(t.getHiddenSelectProps(),e),l=t.value.length===0,n=ve();return u.jsxs(O.select,{"aria-describedby":n?.ariaDescribedby,...i,ref:s,children:[l&&u.jsx("option",{value:""}),t.collection.items.map((o,r)=>u.jsx("option",{value:t.collection.getItemValue(o)??"",disabled:t.collection.getItemDisabled(o),children:t.collection.stringifyItem(o)},r))]})});Re.displayName="SelectHiddenSelect";const be=E.forwardRef((e,s)=>{const t=R(),i=C(t.getIndicatorProps(),e);return u.jsx(O.div,{...i,ref:s})});be.displayName="SelectIndicator";const[pt]=re({name:"SelectItemContext",hookName:"useSelectItemContext",providerName:"<SelectItemProvider />"}),[ft,It]=re({name:"SelectItemPropsContext",hookName:"useSelectItemPropsContext",providerName:"<SelectItemPropsProvider />"}),vt=ye(),Ve=E.forwardRef((e,s)=>{const[t,i]=vt(e,["item","persistFocus"]),l=R(),n=C(l.getItemProps(t),i),o=l.getItemState(t);return u.jsx(ft,{value:t,children:u.jsx(pt,{value:o,children:u.jsx(O.div,{...n,ref:s})})})});Ve.displayName="SelectItem";const Pe=E.forwardRef((e,s)=>{const t=R(),i=It(),l=C(t.getItemTextProps(i),e);return u.jsx(O.span,{...l,ref:s})});Pe.displayName="SelectItemText";const xe=E.forwardRef((e,s)=>{const t=R(),i=C(t.getPositionerProps(),e);return Ee().unmounted?null:u.jsx(O.div,{...i,ref:s})});xe.displayName="SelectPositioner";var yt=Ue("select").parts("label","positioner","trigger","indicator","clearTrigger","item","itemText","itemIndicator","itemGroup","itemGroupLabel","list","content","root","control","valueText"),v=yt.build(),Ne=e=>new oe(e);Ne.empty=()=>new oe({items:[]});var Et=e=>e.ids?.root??`select:${e.id}`,ie=e=>e.ids?.content??`select:${e.id}:content`,se=e=>e.ids?.trigger??`select:${e.id}:trigger`,Ae=e=>e.ids?.clearTrigger??`select:${e.id}:clear-trigger`,B=e=>e.ids?.label??`select:${e.id}:label`,Tt=e=>e.ids?.control??`select:${e.id}:control`,le=(e,s)=>e.ids?.item?.(s)??`select:${e.id}:option:${s}`,ne=e=>e.ids?.hiddenSelect??`select:${e.id}:select`,Le=e=>e.ids?.positioner??`select:${e.id}:positioner`,St=(e,s)=>e.ids?.itemGroup?.(s)??`select:${e.id}:optgroup:${s}`,me=(e,s)=>e.ids?.itemGroupLabel?.(s)??`select:${e.id}:optgroup-label:${s}`,Z=e=>e.getById(ne(e)),k=e=>e.getById(ie(e)),A=e=>e.getById(se(e)),Ct=e=>e.getById(Ae(e)),pe=e=>e.getById(Le(e)),ee=(e,s)=>s==null?null:e.getById(le(e,s));function Ot(e,s){const{context:t,prop:i,scope:l,state:n,computed:o,send:r}=e,h=i("disabled")||t.get("fieldsetDisabled"),f=!!i("invalid"),b=!!i("required"),p=!!i("readOnly"),T=i("composite"),V=i("collection"),y=n.hasTag("open"),L=n.matches("focused"),P=t.get("highlightedValue"),M=t.get("highlightedItem"),z=t.get("selectedItems"),_=t.get("currentPlacement"),x=o("isTypingAhead"),g=o("isInteractive"),D=P?le(l,P):void 0;function G(a){const d=V.getItemDisabled(a.item),I=V.getItemValue(a.item);return Ye(I,()=>`[zag-js] No value found for item ${JSON.stringify(a.item)}`),{value:I,disabled:!!(h||d),highlighted:P===I,selected:t.get("value").includes(I)}}const j=lt({...i("positioning"),placement:_});return{open:y,focused:L,empty:t.get("value").length===0,highlightedItem:M,highlightedValue:P,selectedItems:z,hasSelectedItems:o("hasSelectedItems"),value:t.get("value"),valueAsString:o("valueAsString"),collection:V,multiple:!!i("multiple"),disabled:!!h,reposition(a={}){r({type:"POSITIONING.SET",options:a})},focus(){A(l)?.focus({preventScroll:!0})},setOpen(a){n.hasTag("open")!==a&&r({type:a?"OPEN":"CLOSE"})},selectValue(a){r({type:"ITEM.SELECT",value:a})},setValue(a){r({type:"VALUE.SET",value:a})},selectAll(){r({type:"VALUE.SET",value:V.getValues()})},setHighlightValue(a){r({type:"HIGHLIGHTED_VALUE.SET",value:a})},clearHighlightValue(){r({type:"HIGHLIGHTED_VALUE.CLEAR"})},clearValue(a){r(a?{type:"ITEM.CLEAR",value:a}:{type:"VALUE.CLEAR"})},getItemState:G,getRootProps(){return s.element({...v.root.attrs,dir:i("dir"),id:Et(l),"data-invalid":m(f),"data-readonly":m(p)})},getLabelProps(){return s.label({dir:i("dir"),id:B(l),...v.label.attrs,"data-disabled":m(h),"data-invalid":m(f),"data-readonly":m(p),"data-required":m(b),htmlFor:ne(l),onClick(a){a.defaultPrevented||h||A(l)?.focus({preventScroll:!0})}})},getControlProps(){return s.element({...v.control.attrs,dir:i("dir"),id:Tt(l),"data-state":y?"open":"closed","data-focus":m(L),"data-disabled":m(h),"data-invalid":m(f)})},getValueTextProps(){return s.element({...v.valueText.attrs,dir:i("dir"),"data-disabled":m(h),"data-invalid":m(f),"data-focus":m(L)})},getTriggerProps(){return s.button({id:se(l),disabled:h,dir:i("dir"),type:"button",role:"combobox","aria-controls":ie(l),"aria-expanded":y,"aria-haspopup":"listbox","data-state":y?"open":"closed","aria-invalid":f,"aria-required":b,"aria-labelledby":B(l),...v.trigger.attrs,"data-disabled":m(h),"data-invalid":m(f),"data-readonly":m(p),"data-placement":_,"data-placeholder-shown":m(!o("hasSelectedItems")),onClick(a){g&&(a.defaultPrevented||r({type:"TRIGGER.CLICK"}))},onFocus(){r({type:"TRIGGER.FOCUS"})},onBlur(){r({type:"TRIGGER.BLUR"})},onKeyDown(a){if(a.defaultPrevented||!g)return;const I={ArrowUp(){r({type:"TRIGGER.ARROW_UP"})},ArrowDown(F){r({type:F.altKey?"OPEN":"TRIGGER.ARROW_DOWN"})},ArrowLeft(){r({type:"TRIGGER.ARROW_LEFT"})},ArrowRight(){r({type:"TRIGGER.ARROW_RIGHT"})},Home(){r({type:"TRIGGER.HOME"})},End(){r({type:"TRIGGER.END"})},Enter(){r({type:"TRIGGER.ENTER"})},Space(F){r(x?{type:"TRIGGER.TYPEAHEAD",key:F.key}:{type:"TRIGGER.ENTER"})}}[de(a,{dir:i("dir"),orientation:"vertical"})];if(I){I(a),a.preventDefault();return}te.isValidEvent(a)&&(r({type:"TRIGGER.TYPEAHEAD",key:a.key}),a.preventDefault())}})},getIndicatorProps(){return s.element({...v.indicator.attrs,dir:i("dir"),"aria-hidden":!0,"data-state":y?"open":"closed","data-disabled":m(h),"data-invalid":m(f),"data-readonly":m(p)})},getItemProps(a){const d=G(a);return s.element({id:le(l,d.value),role:"option",...v.item.attrs,dir:i("dir"),"data-value":d.value,"aria-selected":d.selected,"data-state":d.selected?"checked":"unchecked","data-highlighted":m(d.highlighted),"data-disabled":m(d.disabled),"aria-disabled":ze(d.disabled),onPointerMove(I){d.disabled||I.pointerType!=="mouse"||d.value!==P&&r({type:"ITEM.POINTER_MOVE",value:d.value})},onClick(I){I.defaultPrevented||d.disabled||r({type:"ITEM.CLICK",src:"pointerup",value:d.value})},onPointerLeave(I){d.disabled||a.persistFocus||I.pointerType!=="mouse"||!e.event.previous()?.type.includes("POINTER")||r({type:"ITEM.POINTER_LEAVE"})}})},getItemTextProps(a){const d=G(a);return s.element({...v.itemText.attrs,"data-state":d.selected?"checked":"unchecked","data-disabled":m(d.disabled),"data-highlighted":m(d.highlighted)})},getItemIndicatorProps(a){const d=G(a);return s.element({"aria-hidden":!0,...v.itemIndicator.attrs,"data-state":d.selected?"checked":"unchecked",hidden:!d.selected})},getItemGroupLabelProps(a){const{htmlFor:d}=a;return s.element({...v.itemGroupLabel.attrs,id:me(l,d),dir:i("dir"),role:"presentation"})},getItemGroupProps(a){const{id:d}=a;return s.element({...v.itemGroup.attrs,"data-disabled":m(h),id:St(l,d),"aria-labelledby":me(l,d),role:"group",dir:i("dir")})},getClearTriggerProps(){return s.button({...v.clearTrigger.attrs,id:Ae(l),type:"button","aria-label":"Clear value","data-invalid":m(f),disabled:h,hidden:!o("hasSelectedItems"),dir:i("dir"),onClick(a){a.defaultPrevented||r({type:"CLEAR.CLICK"})}})},getHiddenSelectProps(){const a=t.get("value"),d=i("multiple")?a:a?.[0];return s.select({name:i("name"),form:i("form"),disabled:h,multiple:i("multiple"),required:i("required"),"aria-hidden":!0,id:ne(l),defaultValue:d,style:$e,tabIndex:-1,onFocus(){A(l)?.focus({preventScroll:!0})},"aria-labelledby":B(l)})},getPositionerProps(){return s.element({...v.positioner.attrs,dir:i("dir"),id:Le(l),style:j.floating})},getContentProps(){return s.element({hidden:!y,dir:i("dir"),id:ie(l),role:T?"listbox":"dialog",...v.content.attrs,"data-state":y?"open":"closed","data-placement":_,"data-activedescendant":D,"aria-activedescendant":T?D:void 0,"aria-multiselectable":i("multiple")&&T?!0:void 0,"aria-labelledby":B(l),tabIndex:0,onKeyDown(a){if(!g||!Be(a.currentTarget,ue(a)))return;if(a.key==="Tab"&&!We(a)){a.preventDefault();return}const d={ArrowUp(){r({type:"CONTENT.ARROW_UP"})},ArrowDown(){r({type:"CONTENT.ARROW_DOWN"})},Home(){r({type:"CONTENT.HOME"})},End(){r({type:"CONTENT.END"})},Enter(){r({type:"ITEM.CLICK",src:"keydown.enter"})},Space(Y){x?r({type:"CONTENT.TYPEAHEAD",key:Y.key}):d.Enter?.(Y)}},I=d[de(a)];if(I){I(a),a.preventDefault();return}const F=ue(a);Ke(F)||te.isValidEvent(a)&&(r({type:"CONTENT.TYPEAHEAD",key:a.key}),a.preventDefault())}})},getListProps(){return s.element({...v.list.attrs,tabIndex:0,role:T?void 0:"listbox","aria-labelledby":se(l),"aria-activedescendant":T?void 0:D,"aria-multiselectable":!T&&i("multiple")?!0:void 0})}}}var{and:H,not:N,or:Rt}=Qe(),bt=Je({props({props:e}){return{loopFocus:!1,closeOnSelect:!e.multiple,composite:!0,defaultValue:[],...e,collection:e.collection??Ne.empty(),positioning:{placement:"bottom-start",gutter:8,...e.positioning}}},context({prop:e,bindable:s}){return{value:s(()=>({defaultValue:e("defaultValue"),value:e("value"),isEqual:Ie,onChange(t){const i=e("collection").findMany(t);return e("onValueChange")?.({value:t,items:i})}})),highlightedValue:s(()=>({defaultValue:e("defaultHighlightedValue")||null,value:e("highlightedValue"),onChange(t){e("onHighlightChange")?.({highlightedValue:t,highlightedItem:e("collection").find(t),highlightedIndex:e("collection").indexOf(t)})}})),currentPlacement:s(()=>({defaultValue:void 0})),fieldsetDisabled:s(()=>({defaultValue:!1})),highlightedItem:s(()=>({defaultValue:null})),selectedItems:s(()=>{const t=e("value")??e("defaultValue")??[];return{defaultValue:e("collection").findMany(t)}})}},refs(){return{typeahead:{...te.defaultOptions}}},computed:{hasSelectedItems:({context:e})=>e.get("value").length>0,isTypingAhead:({refs:e})=>e.get("typeahead").keysSoFar!=="",isDisabled:({prop:e,context:s})=>!!e("disabled")||!!s.get("fieldsetDisabled"),isInteractive:({prop:e})=>!(e("disabled")||e("readOnly")),valueAsString:({context:e,prop:s})=>s("collection").stringifyItems(e.get("selectedItems"))},initialState({prop:e}){return e("open")||e("defaultOpen")?"open":"idle"},entry:["syncSelectElement"],watch({context:e,prop:s,track:t,action:i}){t([()=>e.get("value").toString()],()=>{i(["syncSelectedItems","syncSelectElement","dispatchChangeEvent"])}),t([()=>s("open")],()=>{i(["toggleVisibility"])}),t([()=>e.get("highlightedValue")],()=>{i(["syncHighlightedItem"])}),t([()=>s("collection").toString()],()=>{i(["syncCollection"])})},on:{"HIGHLIGHTED_VALUE.SET":{actions:["setHighlightedItem"]},"HIGHLIGHTED_VALUE.CLEAR":{actions:["clearHighlightedItem"]},"ITEM.SELECT":{actions:["selectItem"]},"ITEM.CLEAR":{actions:["clearItem"]},"VALUE.SET":{actions:["setSelectedItems"]},"VALUE.CLEAR":{actions:["clearSelectedItems"]},"CLEAR.CLICK":{actions:["clearSelectedItems","focusTriggerEl"]}},effects:["trackFormControlState"],states:{idle:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{target:"open",actions:["setInitialFocus"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus","highlightFirstSelectedItem"]}],"TRIGGER.FOCUS":{target:"focused"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}]}},focused:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{guard:"isTriggerArrowUpEvent",target:"open",actions:["setInitialFocus","highlightComputedLastItem"]},{guard:Rt("isTriggerArrowDownEvent","isTriggerEnterEvent"),target:"open",actions:["setInitialFocus","highlightComputedFirstItem"]},{target:"open",actions:["setInitialFocus"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}],"TRIGGER.BLUR":{target:"idle"},"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightFirstSelectedItem"]}],"TRIGGER.ENTER":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_UP":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedLastItem"]}],"TRIGGER.ARROW_DOWN":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_LEFT":[{guard:H(N("multiple"),"hasSelectedItems"),actions:["selectPreviousItem"]},{guard:N("multiple"),actions:["selectLastItem"]}],"TRIGGER.ARROW_RIGHT":[{guard:H(N("multiple"),"hasSelectedItems"),actions:["selectNextItem"]},{guard:N("multiple"),actions:["selectFirstItem"]}],"TRIGGER.HOME":{guard:N("multiple"),actions:["selectFirstItem"]},"TRIGGER.END":{guard:N("multiple"),actions:["selectLastItem"]},"TRIGGER.TYPEAHEAD":{guard:N("multiple"),actions:["selectMatchingItem"]}}},open:{tags:["open"],exit:["scrollContentToTop"],effects:["trackDismissableElement","computePlacement","scrollToHighlightedItem"],on:{"CONTROLLED.CLOSE":[{guard:"restoreFocus",target:"focused",actions:["focusTriggerEl","clearHighlightedItem"]},{target:"idle",actions:["clearHighlightedItem"]}],CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{guard:"restoreFocus",target:"focused",actions:["invokeOnClose","focusTriggerEl","clearHighlightedItem"]},{target:"idle",actions:["invokeOnClose","clearHighlightedItem"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","clearHighlightedItem"]}],"ITEM.CLICK":[{guard:H("closeOnSelect","isOpenControlled"),actions:["selectHighlightedItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectHighlightedItem","invokeOnClose","focusTriggerEl","clearHighlightedItem"]},{actions:["selectHighlightedItem"]}],"CONTENT.HOME":{actions:["highlightFirstItem"]},"CONTENT.END":{actions:["highlightLastItem"]},"CONTENT.ARROW_DOWN":[{guard:H("hasHighlightedItem","loop","isLastItemHighlighted"),actions:["highlightFirstItem"]},{guard:"hasHighlightedItem",actions:["highlightNextItem"]},{actions:["highlightFirstItem"]}],"CONTENT.ARROW_UP":[{guard:H("hasHighlightedItem","loop","isFirstItemHighlighted"),actions:["highlightLastItem"]},{guard:"hasHighlightedItem",actions:["highlightPreviousItem"]},{actions:["highlightLastItem"]}],"CONTENT.TYPEAHEAD":{actions:["highlightMatchingItem"]},"ITEM.POINTER_MOVE":{actions:["highlightItem"]},"ITEM.POINTER_LEAVE":{actions:["clearHighlightedItem"]},"POSITIONING.SET":{actions:["reposition"]}}}},implementations:{guards:{loop:({prop:e})=>!!e("loopFocus"),multiple:({prop:e})=>!!e("multiple"),hasSelectedItems:({computed:e})=>!!e("hasSelectedItems"),hasHighlightedItem:({context:e})=>e.get("highlightedValue")!=null,isFirstItemHighlighted:({context:e,prop:s})=>e.get("highlightedValue")===s("collection").firstValue,isLastItemHighlighted:({context:e,prop:s})=>e.get("highlightedValue")===s("collection").lastValue,closeOnSelect:({prop:e,event:s})=>!!(s.closeOnSelect??e("closeOnSelect")),restoreFocus:({event:e})=>fe(e),isOpenControlled:({prop:e})=>e("open")!==void 0,isTriggerClickEvent:({event:e})=>e.previousEvent?.type==="TRIGGER.CLICK",isTriggerEnterEvent:({event:e})=>e.previousEvent?.type==="TRIGGER.ENTER",isTriggerArrowUpEvent:({event:e})=>e.previousEvent?.type==="TRIGGER.ARROW_UP",isTriggerArrowDownEvent:({event:e})=>e.previousEvent?.type==="TRIGGER.ARROW_DOWN"},effects:{trackFormControlState({context:e,scope:s}){return et(Z(s),{onFieldsetDisabledChange(t){e.set("fieldsetDisabled",t)},onFormReset(){const t=e.initial("value");e.set("value",t)}})},trackDismissableElement({scope:e,send:s,prop:t}){const i=()=>k(e);let l=!0;return nt(i,{type:"listbox",defer:!0,exclude:[A(e),Ct(e)],onFocusOutside:t("onFocusOutside"),onPointerDownOutside:t("onPointerDownOutside"),onInteractOutside(n){t("onInteractOutside")?.(n),l=!(n.detail.focusable||n.detail.contextmenu)},onDismiss(){s({type:"CLOSE",src:"interact-outside",restoreFocus:l})}})},computePlacement({context:e,prop:s,scope:t}){const i=s("positioning");return e.set("currentPlacement",i.placement),ge(()=>A(t),()=>pe(t),{defer:!0,...i,onComplete(o){e.set("currentPlacement",o.placement)}})},scrollToHighlightedItem({context:e,prop:s,scope:t,event:i}){const l=o=>{const r=e.get("highlightedValue");if(r==null||i.current().type.includes("POINTER"))return;const h=k(t),f=s("scrollToIndexFn");if(f){const p=s("collection").indexOf(r);f?.({index:p,immediate:o,getElement:()=>ee(t,r)});return}const b=ee(t,r);tt(b,{rootEl:h,block:"nearest"})};return X(()=>l(!0)),Ze(()=>k(t),{defer:!0,attributes:["data-activedescendant"],callback(){l(!1)}})}},actions:{reposition({context:e,prop:s,scope:t,event:i}){const l=()=>pe(t);ge(A(t),l,{...s("positioning"),...i.options,defer:!0,listeners:!1,onComplete(n){e.set("currentPlacement",n.placement)}})},toggleVisibility({send:e,prop:s,event:t}){e({type:s("open")?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:t})},highlightPreviousItem({context:e,prop:s}){const t=e.get("highlightedValue");if(t==null)return;const i=s("collection").getPreviousValue(t,1,s("loopFocus"));i!=null&&e.set("highlightedValue",i)},highlightNextItem({context:e,prop:s}){const t=e.get("highlightedValue");if(t==null)return;const i=s("collection").getNextValue(t,1,s("loopFocus"));i!=null&&e.set("highlightedValue",i)},highlightFirstItem({context:e,prop:s}){const t=s("collection").firstValue;e.set("highlightedValue",t)},highlightLastItem({context:e,prop:s}){const t=s("collection").lastValue;e.set("highlightedValue",t)},setInitialFocus({scope:e}){X(()=>{Xe({root:k(e)})?.focus({preventScroll:!0})})},focusTriggerEl({event:e,scope:s}){fe(e)&&X(()=>{A(s)?.focus({preventScroll:!0})})},selectHighlightedItem({context:e,prop:s,event:t}){let i=t.value??e.get("highlightedValue");if(i==null||!s("collection").has(i))return;s("onSelect")?.({value:i}),i=s("deselectable")&&!s("multiple")&&e.get("value").includes(i)?null:i,e.set("value",n=>i==null?[]:s("multiple")?he(n,i):[i])},highlightComputedFirstItem({context:e,prop:s,computed:t}){const i=s("collection"),l=t("hasSelectedItems")?i.sort(e.get("value"))[0]:i.firstValue;e.set("highlightedValue",l)},highlightComputedLastItem({context:e,prop:s,computed:t}){const i=s("collection"),l=t("hasSelectedItems")?i.sort(e.get("value"))[0]:i.lastValue;e.set("highlightedValue",l)},highlightFirstSelectedItem({context:e,prop:s,computed:t}){if(!t("hasSelectedItems"))return;const i=s("collection").sort(e.get("value"))[0];e.set("highlightedValue",i)},highlightItem({context:e,event:s}){e.set("highlightedValue",s.value)},highlightMatchingItem({context:e,prop:s,event:t,refs:i}){const l=s("collection").search(t.key,{state:i.get("typeahead"),currentValue:e.get("highlightedValue")});l!=null&&e.set("highlightedValue",l)},setHighlightedItem({context:e,event:s}){e.set("highlightedValue",s.value)},clearHighlightedItem({context:e}){e.set("highlightedValue",null)},selectItem({context:e,prop:s,event:t}){s("onSelect")?.({value:t.value});const l=s("deselectable")&&!s("multiple")&&e.get("value").includes(t.value)?null:t.value;e.set("value",n=>l==null?[]:s("multiple")?he(n,l):[l])},clearItem({context:e,event:s}){e.set("value",t=>t.filter(i=>i!==s.value))},setSelectedItems({context:e,event:s}){e.set("value",s.value)},clearSelectedItems({context:e}){e.set("value",[])},selectPreviousItem({context:e,prop:s}){const[t]=e.get("value"),i=s("collection").getPreviousValue(t);i&&e.set("value",[i])},selectNextItem({context:e,prop:s}){const[t]=e.get("value"),i=s("collection").getNextValue(t);i&&e.set("value",[i])},selectFirstItem({context:e,prop:s}){const t=s("collection").firstValue;t&&e.set("value",[t])},selectLastItem({context:e,prop:s}){const t=s("collection").lastValue;t&&e.set("value",[t])},selectMatchingItem({context:e,prop:s,event:t,refs:i}){const l=s("collection").search(t.key,{state:i.get("typeahead"),currentValue:e.get("value")[0]});l!=null&&e.set("value",[l])},scrollContentToTop({prop:e,scope:s}){if(e("scrollToIndexFn")){const t=e("collection").firstValue;e("scrollToIndexFn")?.({index:0,immediate:!0,getElement:()=>ee(s,t)})}else k(s)?.scrollTo(0,0)},invokeOnOpen({prop:e,context:s}){e("onOpenChange")?.({open:!0,value:s.get("value")})},invokeOnClose({prop:e,context:s}){e("onOpenChange")?.({open:!1,value:s.get("value")})},syncSelectElement({context:e,prop:s,scope:t}){const i=Z(t);if(i){if(e.get("value").length===0&&!s("multiple")){i.selectedIndex=-1;return}for(const l of i.options)l.selected=e.get("value").includes(l.value)}},syncCollection({context:e,prop:s}){const t=s("collection"),i=t.find(e.get("highlightedValue"));i&&e.set("highlightedItem",i);const l=t.findMany(e.get("value"));e.set("selectedItems",l)},syncSelectedItems({context:e,prop:s}){const t=s("collection"),i=e.get("selectedItems"),n=e.get("value").map(o=>i.find(h=>t.getItemValue(h)===o)||t.find(o));e.set("selectedItems",n)},syncHighlightedItem({context:e,prop:s}){const t=s("collection"),i=e.get("highlightedValue"),l=i?t.find(i):null;e.set("highlightedItem",l)},dispatchChangeEvent({scope:e}){queueMicrotask(()=>{const s=Z(e);if(!s)return;const t=e.getWin(),i=new t.Event("change",{bubbles:!0,composed:!0});s.dispatchEvent(i)})}}}});function fe(e){const s=e.restoreFocus??e.previousEvent?.restoreFocus;return s==null||!!s}$()(["closeOnSelect","collection","composite","defaultHighlightedValue","defaultOpen","defaultValue","deselectable","dir","disabled","form","getRootNode","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onSelect","onValueChange","open","positioning","readOnly","required","scrollToIndexFn","value"]);$()(["item","persistFocus"]);$()(["id"]);$()(["htmlFor"]);const Vt=e=>{const s=E.useId(),{dir:t}=Me(),{getRootNode:i}=je(),l=ve(),n={id:s,ids:{label:l?.ids.label,hiddenSelect:l?.ids.control},disabled:l?.disabled,readOnly:l?.readOnly,invalid:l?.invalid,required:l?.required,dir:t,getRootNode:i,...e},o=it(bt,n);return Ot(o,st)},Pt=(e,s)=>{const[t,i]=rt(e),[{value:l},n]=ye()(i,["value"]),o=at(C({present:l.open},t)),r=C(l.getRootProps(),n);return u.jsx(mt,{value:l,children:u.jsx(ct,{value:o,children:u.jsx(O.div,{...r,ref:s})})})},xt=E.forwardRef(Pt),De=E.forwardRef((e,s)=>{const t=R(),i=C(t.getTriggerProps(),e);return u.jsx(O.button,{...i,ref:s})});De.displayName="SelectTrigger";const Ge=E.forwardRef((e,s)=>{const{children:t,placeholder:i,...l}=e,n=R(),o=C(n.getValueTextProps(),l);return u.jsx(O.span,{...o,ref:s,children:t||n.valueAsString||i})});Ge.displayName="SelectValueText";const Nt="_control_zayfb_41",At="_triggerIcon_zayfb_54",Lt="_clearIcon_zayfb_77",Dt="_small_zayfb_84",Gt="_trigger_zayfb_54",Ft="_content_zayfb_129",_t="_searchInput_zayfb_177",wt="_viewport_zayfb_221",kt="_item_zayfb_81",Ht="_itemIcon_zayfb_245",Mt="_valueText_zayfb_249",jt="_multiSelectItemsContainer_zayfb_259",S={control:Nt,triggerIcon:At,clearIcon:Lt,small:Dt,trigger:Gt,content:Ft,searchInput:_t,viewport:wt,item:kt,itemIcon:Ht,valueText:Mt,multiSelectItemsContainer:jt};function Fe({showAll:e,onShowAll:s,onValueChange:t,count:i}){const{collection:l,value:n}=R();if(!n.length)return null;const o=e?n:n.slice(0,i);return u.jsxs("div",{className:S.multiSelectItemsContainer,children:[o.map(r=>{const h=l.find(r);if(!h)return null;const f=()=>{const b=n.filter(p=>p!==h.value);t?.(b)};return u.jsx(ae,{label:h.label,onDelete:f},r)}),!e&&n.length>i&&u.jsx(ae,{label:`+${String(n.length-i)}`,onClick:s,size:"small"}),u.jsx(ke,{design:"v1.2",buttonType:"tertiary",variant:"ghost",size:"small",onClick:()=>t?.([]),children:"Clear All"})]})}Fe.__docgenInfo={description:"",methods:[],displayName:"SelectItemsChips",props:{showAll:{required:!0,tsType:{name:"boolean"},description:""},onValueChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: SelectOptionValue[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"SelectOptionValue[]"},name:"value"}],return:{name:"void"}}},description:""},onShowAll:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},count:{required:!0,tsType:{name:"number"},description:""}}};const qt=13,K="__INTERNAL_SELECT_ALL_VALUE__",Ut={label:"All",value:K},Bt=({id:e,options:s,value:t,style:i,size:l,clearable:n,onClear:o,onBlur:r,className:h,placeholder:f="Click to select a value",disabled:b,...p})=>{const[T,V]=E.useState(""),[y,L]=E.useState(!1),P=p.multiple?[Ut,...s]:s,M=gt({items:P,itemToValue:g=>g.value}),z=P.filter(g=>g.label.toLowerCase().includes(T.toLowerCase())),_=Array.isArray(t)?t:[t].filter(g=>!!g),x=Vt({collection:M,disabled:b,multiple:p.multiple,value:_,ids:{trigger:e},onOpenChange:()=>{V(""),L(!1)},onValueChange:g=>{if(!p.multiple){p.onValueChange?.(g.value[0]);return}if(g.value.includes(K)){const a=x.selectedItems.length===s.length?[]:s.map(d=>d.value);p.onValueChange?.(a);return}const G=g.value.filter(j=>j!==K);p.onValueChange?.(G)}});return u.jsxs(xt,{value:x,lazyMount:!0,children:[u.jsxs(Oe,{className:_e(S.control,l==="small"&&S.small,h),style:i,onBlur:r,onKeyDown:g=>{n&&(x.open||(g.key==="Backspace"||g.key==="Delete")&&(p.multiple?p.onValueChange?.([]):p.onValueChange?.(""),o?.()))},children:[u.jsxs(De,{id:e,className:S.trigger,"aria-labelledby":null,children:[u.jsx(ce,{className:S.valueText,variant:"body-sm-reg",asChild:!0,children:u.jsx(Ge,{placeholder:f})}),u.jsx(be,{className:S.triggerIcon,children:u.jsx(q,{icon:"keyboard_arrow_down",size:l==="small"?"small":"medium"})})]}),n&&u.jsx(Se,{className:S.clearIcon,onClick:o,children:u.jsx(q,{icon:"close",size:l==="small"?"small":"medium"})})]}),u.jsx(ot,{children:u.jsx(xe,{className:S.viewport,children:u.jsxs(Ce,{className:S.content,children:[s.length>qt&&u.jsx("div",{className:S.searchInput,children:u.jsx(qe,{placeholder:"Search",value:T,onChange:g=>V(g.target.value),onKeyDown:g=>{g.key===" "&&g.stopPropagation()},slots:{startAdornment:u.jsx(q,{icon:"search",size:"tiny"})}})}),p.multiple&&u.jsx(Fe,{onValueChange:p.onValueChange,showAll:y,onShowAll:()=>L(!0),count:6}),z.map(g=>{const D=Wt({item:g,select:x,options:P});return u.jsx(ce,{variant:"body-sm-reg",asChild:!0,className:S.item,children:u.jsxs(Ve,{item:g,children:[p.multiple&&u.jsx(we,{checked:D}),g.icon&&u.jsx(q,{className:S.itemIcon,icon:g.icon,"aria-hidden":"true"}),u.jsx(Pe,{children:g.label})]})},M.getItemValue(g))})]})})}),u.jsx(Re,{style:{display:"none"}})]})};function Wt({item:e,select:s,options:t}){return e.value!==K?s.getItemState({item:e}).selected:s.selectedItems.length===t.length-1?!0:s.hasSelectedItems?"indeterminate":!1}Bt.__docgenInfo={description:"",methods:[],displayName:"DsSelect",props:{id:{required:!1,tsType:{name:"string"},description:"Unique identifier for the select component"},options:{required:!0,tsType:{name:"Array",elements:[{name:"DsSelectOption"}],raw:"DsSelectOption[]"},description:"Options to display in the select dropdown"},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:"Additional styles to apply to the icon"},className:{required:!1,tsType:{name:"string"},description:"Additional CSS class names"},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.FocusEvent) => void",signature:{arguments:[{type:{name:"ReactFocusEvent",raw:"React.FocusEvent"},name:"event"}],return:{name:"void"}}},description:`Event handler called when the select loses focus

@param event`},placeholder:{required:!1,tsType:{name:"string"},description:"Placeholder text to display when no option is selected",defaultValue:{value:"'Click to select a value'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the select is disabled"},size:{required:!1,tsType:{name:"union",raw:"'default' | 'small'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'small'"}]},description:`The size of the select component
@default 'default'`}}};export{Bt as D};
