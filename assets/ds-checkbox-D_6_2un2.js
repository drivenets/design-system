import{j as n}from"./jsx-runtime-u17CrQMm.js";import{r as a}from"./iframe-DutI-9Gs.js";import{u as w}from"./index-DSUi8HgI.js";import{c as O,b as z,P as g,a as H,e as P}from"./index-CcMeazed.js";import{u as G}from"./index-eQyot5kG.js";import{c as K}from"./index-CQzTICg9.js";import{D as U}from"./ds-icon-BZ22McKQ.js";function X(e){const o=a.useRef({value:e,previous:e});return a.useMemo(()=>(o.current.value!==e&&(o.current.previous=o.current.value,o.current.value=e),o.current.previous),[e])}var R="Checkbox",[J]=O(R),[Q,E]=J(R);function V(e){const{__scopeCheckbox:o,checked:c,children:l,defaultChecked:r,disabled:t,form:u,name:h,onCheckedChange:i,required:p,value:k="on",internal_do_not_use_render:f}=e,[m,v]=H({prop:c,defaultProp:r??!1,onChange:i,caller:R}),[x,C]=a.useState(null),[I,s]=a.useState(null),d=a.useRef(!1),y=x?!!u||!!x.closest("form"):!0,j={checked:m,disabled:t,setChecked:v,control:x,setControl:C,name:h,form:u,value:k,hasConsumerStoppedPropagationRef:d,required:p,defaultChecked:b(r)?!1:r,isFormControl:y,bubbleInput:I,setBubbleInput:s};return n.jsx(Q,{scope:o,...j,children:Y(f)?f(j):l})}var T="CheckboxTrigger",S=a.forwardRef(({__scopeCheckbox:e,onKeyDown:o,onClick:c,...l},r)=>{const{control:t,value:u,disabled:h,checked:i,required:p,setControl:k,setChecked:f,hasConsumerStoppedPropagationRef:m,isFormControl:v,bubbleInput:x}=E(T,e),C=w(r,k),I=a.useRef(i);return a.useEffect(()=>{const s=t?.form;if(s){const d=()=>f(I.current);return s.addEventListener("reset",d),()=>s.removeEventListener("reset",d)}},[t,f]),n.jsx(g.button,{type:"button",role:"checkbox","aria-checked":b(i)?"mixed":i,"aria-required":p,"data-state":F(i),"data-disabled":h?"":void 0,disabled:h,value:u,...l,ref:C,onKeyDown:P(o,s=>{s.key==="Enter"&&s.preventDefault()}),onClick:P(c,s=>{f(d=>b(d)?!0:!d),x&&v&&(m.current=s.isPropagationStopped(),m.current||s.stopPropagation())})})});S.displayName=T;var q=a.forwardRef((e,o)=>{const{__scopeCheckbox:c,name:l,checked:r,defaultChecked:t,required:u,disabled:h,value:i,onCheckedChange:p,form:k,...f}=e;return n.jsx(V,{__scopeCheckbox:c,checked:r,defaultChecked:t,disabled:h,required:u,onCheckedChange:p,name:l,form:k,value:i,internal_do_not_use_render:({isFormControl:m})=>n.jsxs(n.Fragment,{children:[n.jsx(S,{...f,ref:o,__scopeCheckbox:c}),m&&n.jsx(A,{__scopeCheckbox:c})]})})});q.displayName=R;var D="CheckboxIndicator",B=a.forwardRef((e,o)=>{const{__scopeCheckbox:c,forceMount:l,...r}=e,t=E(D,c);return n.jsx(z,{present:l||b(t.checked)||t.checked===!0,children:n.jsx(g.span,{"data-state":F(t.checked),"data-disabled":t.disabled?"":void 0,...r,ref:o,style:{pointerEvents:"none",...e.style}})})});B.displayName=D;var M="CheckboxBubbleInput",A=a.forwardRef(({__scopeCheckbox:e,...o},c)=>{const{control:l,hasConsumerStoppedPropagationRef:r,checked:t,defaultChecked:u,required:h,disabled:i,name:p,value:k,form:f,bubbleInput:m,setBubbleInput:v}=E(M,e),x=w(c,v),C=X(t),I=G(l);a.useEffect(()=>{const d=m;if(!d)return;const y=window.HTMLInputElement.prototype,N=Object.getOwnPropertyDescriptor(y,"checked").set,L=!r.current;if(C!==t&&N){const W=new Event("click",{bubbles:L});d.indeterminate=b(t),N.call(d,b(t)?!1:t),d.dispatchEvent(W)}},[m,C,t,r]);const s=a.useRef(b(t)?!1:t);return n.jsx(g.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??s.current,required:h,disabled:i,name:p,value:k,form:f,...o,tabIndex:-1,ref:x,style:{...o.style,...I,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});A.displayName=M;function Y(e){return typeof e=="function"}function b(e){return e==="indeterminate"}function F(e){return b(e)?"indeterminate":e?"checked":"unchecked"}const Z="_container_xf4aj_1",$="_labelInfo_xf4aj_14",ee="_checkboxRoot_xf4aj_17",te="_checkboxWrapper_xf4aj_38",oe="_checkboxIndicator_xf4aj_77",ne="_label_xf4aj_14",_={container:Z,labelInfo:$,checkboxRoot:ee,checkboxWrapper:te,checkboxIndicator:oe,label:ne},re=({id:e,label:o,labelInfo:c,className:l,checked:r,defaultChecked:t,onCheckedChange:u,...h})=>{const i=a.useId(),p=e||i;return n.jsxs("div",{className:K(_.container,l),children:[n.jsx(q,{className:_.checkboxRoot,id:p,checked:r,defaultChecked:t,onCheckedChange:u,...h,children:n.jsx("div",{className:_.checkboxWrapper,children:n.jsx(B,{className:_.checkboxIndicator,children:n.jsx(U,{icon:r==="indeterminate"?"check_indeterminate_small":"check_small",size:"small",variant:"outlined"})})})}),o&&n.jsxs("label",{className:_.label,htmlFor:p,children:[o,c&&n.jsx("div",{className:_.labelInfo,children:c})]})]})};re.__docgenInfo={description:"Design system Checkbox component",methods:[],displayName:"DsCheckbox",props:{label:{required:!1,tsType:{name:"ReactNode"},description:"Label for the checkbox"},labelInfo:{required:!1,tsType:{name:"ReactNode"},description:"Additional label info for the checkbox"},checked:{required:!1,tsType:{name:"union",raw:"boolean | 'indeterminate'",elements:[{name:"boolean"},{name:"literal",value:"'indeterminate'"}]},description:"The controlled checked state of the checkbox"},defaultChecked:{required:!1,tsType:{name:"union",raw:"boolean | 'indeterminate'",elements:[{name:"boolean"},{name:"literal",value:"'indeterminate'"}]},description:"The default checked state of the checkbox"},onCheckedChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(checked: boolean | 'indeterminate') => void",signature:{arguments:[{type:{name:"union",raw:"boolean | 'indeterminate'",elements:[{name:"boolean"},{name:"literal",value:"'indeterminate'"}]},name:"checked"}],return:{name:"void"}}},description:`Event handler called when the checked state of the checkbox changes.

@param checked`}},composes:["ComponentPropsWithoutRef"]};export{re as D};
