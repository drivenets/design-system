import{j as f}from"./jsx-runtime-u17CrQMm.js";import{c as L}from"./index-CMjPrJCW.js";import{D as Y}from"./ds-icon-BH94ZUSb.js";import{r as w}from"./iframe-foGZe_Iu.js";import{c as Ie}from"./create-split-props-u5h9OPvL.js";import{c as Pe,a as M,u as Te,b as Re}from"./use-locale-context-D3iUicfk.js";import{Q as F,r as _,ak as U,al as xe,am as Ce,F as Se,D as k,q as oe,an as we,a6 as De,t as Ve,S as z,ao as Oe,ap as $e,aq as Ae,s as G,ar as Me,g as Fe,p as m,X as Le,as as Ue,a9 as K,a0 as _e,at as J,au as Be,x as He,av as A,aw as Q,ax as ke,y as Ge,ay as je,R as We,V as qe}from"./index-YmNYY-wR.js";import{u as le}from"./use-field-context-aPJPp5Xn.js";const[Xe,H]=Pe({name:"NumberInputContext",hookName:"useNumberInputContext",providerName:"<NumberInputProvider />"}),ue=w.forwardRef((e,t)=>{const n=H(),r=F(n.getControlProps(),e);return f.jsx(M.div,{...r,ref:t})});ue.displayName="NumberInputControl";const ce=w.forwardRef((e,t)=>{const n=H(),r=F(n.getDecrementTriggerProps(),e);return f.jsx(M.button,{...r,ref:t})});ce.displayName="NumberInputDecrementTrigger";const me=w.forwardRef((e,t)=>{const n=H(),r=F(n.getIncrementTriggerProps(),e);return f.jsx(M.button,{...r,ref:t})});me.displayName="NumberInputIncrementTrigger";const de=w.forwardRef((e,t)=>{const n=H(),r=F(n.getInputProps(),e),i=le();return f.jsx(M.input,{"aria-describedby":i?.ariaDescribedby,...r,ref:t})});de.displayName="NumberInputInput";let j=new Map,X=!1;try{X=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let B=!1;try{B=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const pe={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class Ze{format(t){let n="";if(!X&&this.options.signDisplay!=null?n=ze(this.numberFormatter,this.options.signDisplay,t):n=this.numberFormatter.format(t),this.options.style==="unit"&&!B){var r;let{unit:i,unitDisplay:a="short",locale:s}=this.resolvedOptions();if(!i)return n;let l=(r=pe[i])===null||r===void 0?void 0:r[a];n+=l[s]||l.default}return n}formatToParts(t){return this.numberFormatter.formatToParts(t)}formatRange(t,n){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(t,n);if(n<t)throw new RangeError("End date must be >= start date");return`${this.format(t)} – ${this.format(n)}`}formatRangeToParts(t,n){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(t,n);if(n<t)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(t),i=this.numberFormatter.formatToParts(n);return[...r.map(a=>({...a,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...i.map(a=>({...a,source:"endRange"}))]}resolvedOptions(){let t=this.numberFormatter.resolvedOptions();return!X&&this.options.signDisplay!=null&&(t={...t,signDisplay:this.options.signDisplay}),!B&&this.options.style==="unit"&&(t={...t,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),t}constructor(t,n={}){this.numberFormatter=Ye(t,n),this.options=n}}function Ye(e,t={}){let{numberingSystem:n}=t;if(n&&e.includes("-nu-")&&(e.includes("-u-")||(e+="-u-"),e+=`-nu-${n}`),t.style==="unit"&&!B){var r;let{unit:s,unitDisplay:l="short"}=t;if(!s)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=pe[s])===null||r===void 0)&&r[l]))throw new Error(`Unsupported unit ${s} with unitDisplay = ${l}`);t={...t,style:"decimal"}}let i=e+(t?Object.entries(t).sort((s,l)=>s[0]<l[0]?-1:1).join():"");if(j.has(i))return j.get(i);let a=new Intl.NumberFormat(e,t);return j.set(i,a),a}function ze(e,t,n){if(t==="auto")return e.format(n);if(t==="never")return e.format(Math.abs(n));{let r=!1;if(t==="always"?r=n>0||Object.is(n,0):t==="exceptZero"&&(Object.is(n,-0)||Object.is(n,0)?n=Math.abs(n):r=n>0),r){let i=e.format(-n),a=e.format(n),s=i.replace(a,"").replace(/\u200e|\u061C/,"");return[...s].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(a,"!!!").replace(s,"+").replace("!!!",a)}else return e.format(n)}}const Ke=new RegExp("^.*\\(.*\\).*$"),Je=["latn","arab","hanidec","deva","beng","fullwide"];class fe{parse(t){return W(this.locale,this.options,t).parse(t)}isValidPartialNumber(t,n,r){return W(this.locale,this.options,t).isValidPartialNumber(t,n,r)}getNumberingSystem(t){return W(this.locale,this.options,t).options.numberingSystem}constructor(t,n={}){this.locale=t,this.options=n}}const ee=new Map;function W(e,t,n){let r=te(e,t);if(!e.includes("-nu-")&&!r.isValidPartialNumber(n)){for(let i of Je)if(i!==r.options.numberingSystem){let a=te(e+(e.includes("-u-")?"-nu-":"-u-nu-")+i,t);if(a.isValidPartialNumber(n))return a}}return r}function te(e,t){let n=e+(t?Object.entries(t).sort((i,a)=>i[0]<a[0]?-1:1).join():""),r=ee.get(n);return r||(r=new Qe(e,t),ee.set(n,r)),r}class Qe{parse(t){let n=this.sanitize(t);if(this.symbols.group&&(n=C(n,this.symbols.group,"")),this.symbols.decimal&&(n=n.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(n=n.replace(this.symbols.minusSign,"-")),n=n.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let s=n.indexOf("-");n=n.replace("-",""),n=n.replace("+","");let l=n.indexOf(".");l===-1&&(l=n.length),n=n.replace(".",""),l-2===0?n=`0.${n}`:l-2===-1?n=`0.0${n}`:l-2===-2?n="0.00":n=`${n.slice(0,l-2)}.${n.slice(l-2)}`,s>-1&&(n=`-${n}`)}let r=n?+n:NaN;if(isNaN(r))return NaN;if(this.options.style==="percent"){var i,a;let s={...this.options,style:"decimal",minimumFractionDigits:Math.min(((i=this.options.minimumFractionDigits)!==null&&i!==void 0?i:0)+2,20),maximumFractionDigits:Math.min(((a=this.options.maximumFractionDigits)!==null&&a!==void 0?a:0)+2,20)};return new fe(this.locale,s).parse(new Ze(this.locale,s).format(r))}return this.options.currencySign==="accounting"&&Ke.test(t)&&(r=-1*r),r}sanitize(t){return t=t.replace(this.symbols.literals,""),this.symbols.minusSign&&(t=t.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(t=t.replace(",",this.symbols.decimal),t=t.replace("،",this.symbols.decimal)),this.symbols.group&&(t=C(t,".",this.symbols.group))),this.symbols.group==="’"&&t.includes("'")&&(t=C(t,"'",this.symbols.group)),this.options.locale==="fr-FR"&&this.symbols.group&&(t=C(t," ",this.symbols.group),t=C(t,/\u00A0/g,this.symbols.group)),t}isValidPartialNumber(t,n=-1/0,r=1/0){return t=this.sanitize(t),this.symbols.minusSign&&t.startsWith(this.symbols.minusSign)&&n<0?t=t.slice(this.symbols.minusSign.length):this.symbols.plusSign&&t.startsWith(this.symbols.plusSign)&&r>0&&(t=t.slice(this.symbols.plusSign.length)),this.symbols.group&&t.startsWith(this.symbols.group)||this.symbols.decimal&&t.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(t=C(t,this.symbols.group,"")),t=t.replace(this.symbols.numeral,""),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,"")),t.length===0)}constructor(t,n={}){this.locale=t,n.roundingIncrement!==1&&n.roundingIncrement!=null&&(n.maximumFractionDigits==null&&n.minimumFractionDigits==null?(n.maximumFractionDigits=0,n.minimumFractionDigits=0):n.maximumFractionDigits==null?n.maximumFractionDigits=n.minimumFractionDigits:n.minimumFractionDigits==null&&(n.minimumFractionDigits=n.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(t,n),this.options=this.formatter.resolvedOptions(),this.symbols=tt(t,this.formatter,this.options,n);var r,i;this.options.style==="percent"&&(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)>18||((i=this.options.maximumFractionDigits)!==null&&i!==void 0?i:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const ne=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),et=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function tt(e,t,n,r){var i,a,s,l;let c=new Intl.NumberFormat(e,{...n,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),u=c.formatToParts(-10000.111),g=c.formatToParts(10000.111),p=et.map(d=>c.formatToParts(d));var I;let h=(I=(i=u.find(d=>d.type==="minusSign"))===null||i===void 0?void 0:i.value)!==null&&I!==void 0?I:"-",v=(a=g.find(d=>d.type==="plusSign"))===null||a===void 0?void 0:a.value;!v&&(r?.signDisplay==="exceptZero"||r?.signDisplay==="always")&&(v="+");let x=(s=new Intl.NumberFormat(e,{...n,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(d=>d.type==="decimal"))===null||s===void 0?void 0:s.value,o=(l=u.find(d=>d.type==="group"))===null||l===void 0?void 0:l.value,b=u.filter(d=>!ne.has(d.type)).map(d=>re(d.value)),D=p.flatMap(d=>d.filter(P=>!ne.has(P.type)).map(P=>re(P.value))),y=[...new Set([...b,...D])].sort((d,P)=>P.length-d.length),V=y.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${y.join("|")}|[\\p{White_Space}]`,"gu"),O=[...new Intl.NumberFormat(n.locale,{useGrouping:!1}).format(9876543210)].reverse(),Ne=new Map(O.map((d,P)=>[d,P])),Ee=new RegExp(`[${O.join("")}]`,"g");return{minusSign:h,plusSign:v,decimal:x,group:o,literals:V,numeral:Ee,index:d=>String(Ne.get(d))}}function C(e,t,n){return e.replaceAll?e.replaceAll(t,n):e.split(t).join(n)}function re(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var nt=He("numberInput").parts("root","label","input","control","valueText","incrementTrigger","decrementTrigger","scrubber"),E=nt.build();function Z(e,t){if(!(!e||!t.isActiveElement(e)))try{const{selectionStart:n,selectionEnd:r,value:i}=e;return n==null||r==null?void 0:{start:n,end:r,value:i}}catch{return}}function rt(e,t,n){if(!(!e||!n.isActiveElement(e))){if(!t){const r=e.value.length;e.setSelectionRange(r,r);return}try{const r=e.value,{start:i,end:a,value:s}=t;if(r===s){e.setSelectionRange(i,a);return}const l=ie(s,r,i),c=i===a?l:ie(s,r,a),u=Math.max(0,Math.min(l,r.length)),g=Math.max(u,Math.min(c,r.length));e.setSelectionRange(u,g)}catch{const r=e.value.length;e.setSelectionRange(r,r)}}}function ie(e,t,n){const r=e.slice(0,n),i=e.slice(n);let a=0;const s=Math.min(r.length,t.length);for(let u=0;u<s&&r[u]===t[u];u++)a=u+1;let l=0;const c=Math.min(i.length,t.length-a);for(let u=0;u<c;u++){const g=i.length-1-u,p=t.length-1-u;if(i[g]===t[p])l=u+1;else break}if(r.length>0&&a>=r.length)return a;if(l>=i.length)return t.length-l;if(a>0)return a;if(l>0)return t.length-l;if(n===0&&a===0&&l===0)return t.length;if(e.length>0){const u=n/e.length;return Math.round(u*t.length)}return t.length}var it=e=>e.ids?.root??`number-input:${e.id}`,$=e=>e.ids?.input??`number-input:${e.id}:input`,ge=e=>e.ids?.incrementTrigger??`number-input:${e.id}:inc`,be=e=>e.ids?.decrementTrigger??`number-input:${e.id}:dec`,at=e=>e.ids?.scrubber??`number-input:${e.id}:scrubber`,he=e=>`number-input:${e.id}:cursor`,st=e=>e.ids?.label??`number-input:${e.id}:label`,R=e=>e.getById($(e)),ot=e=>e.getById(ge(e)),lt=e=>e.getById(be(e)),ve=e=>e.getDoc().getElementById(he(e)),ut=(e,t)=>{let n=null;return t==="increment"&&(n=ot(e)),t==="decrement"&&(n=lt(e)),n},ct=(e,t)=>{if(!oe())return pt(e,t),()=>{ve(e)?.remove()}},mt=e=>{const t=e.getDoc(),n=t.documentElement,r=t.body;return r.style.pointerEvents="none",n.style.userSelect="none",n.style.cursor="ew-resize",()=>{r.style.pointerEvents="",n.style.userSelect="",n.style.cursor="",n.style.length||n.removeAttribute("style"),r.style.length||r.removeAttribute("style")}},dt=(e,t)=>{const{point:n,isRtl:r,event:i}=t,a=e.getWin(),s=A(i.movementX,a.devicePixelRatio),l=A(i.movementY,a.devicePixelRatio);let c=s>0?"increment":s<0?"decrement":null;r&&c==="increment"&&(c="decrement"),r&&c==="decrement"&&(c="increment");const u={x:n.x+s,y:n.y+l},g=a.innerWidth,p=A(7.5,a.devicePixelRatio);return u.x=je(u.x+p,g)-p,{hint:c,point:u}},pt=(e,t)=>{const n=e.getDoc(),r=n.createElement("div");r.className="scrubber--cursor",r.id=he(e),Object.assign(r.style,{width:"15px",height:"15px",position:"fixed",pointerEvents:"none",left:"0px",top:"0px",zIndex:Be,transform:t?`translate3d(${t.x}px, ${t.y}px, 0px)`:void 0,willChange:"transform"}),r.innerHTML=`
      <svg width="46" height="15" style="left: -15.5px; position: absolute; top: 0; filter: drop-shadow(rgba(0, 0, 0, 0.4) 0px 1px 1.1px);">
        <g transform="translate(2 3)">
          <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z" style="stroke-width: 2px; stroke: white;"></path>
          <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z"></path>
        </g>
      </svg>`,n.body.appendChild(r)};function ft(e,t){const{state:n,send:r,prop:i,scope:a,computed:s}=e,l=n.hasTag("focus"),c=s("isDisabled"),u=!!i("readOnly"),g=!!i("required"),p=n.matches("scrubbing"),I=s("isValueEmpty"),h=i("invalid")!==void 0?!!i("invalid"):s("isOutOfRange"),v=c||!s("canIncrement")||u,N=c||!s("canDecrement")||u,x=i("translations");return{focused:l,invalid:h,empty:I,value:s("formattedValue"),valueAsNumber:s("valueAsNumber"),setValue(o){r({type:"VALUE.SET",value:o})},clearValue(){r({type:"VALUE.CLEAR"})},increment(){r({type:"VALUE.INCREMENT"})},decrement(){r({type:"VALUE.DECREMENT"})},setToMax(){r({type:"VALUE.SET",value:i("max")})},setToMin(){r({type:"VALUE.SET",value:i("min")})},focus(){R(a)?.focus()},getRootProps(){return t.element({id:it(a),...E.root.attrs,dir:i("dir"),"data-disabled":m(c),"data-focus":m(l),"data-invalid":m(h),"data-scrubbing":m(p)})},getLabelProps(){return t.label({...E.label.attrs,dir:i("dir"),"data-disabled":m(c),"data-focus":m(l),"data-invalid":m(h),"data-required":m(g),"data-scrubbing":m(p),id:st(a),htmlFor:$(a),onClick(){_(()=>{Q(R(a))})}})},getControlProps(){return t.element({...E.control.attrs,dir:i("dir"),role:"group","aria-disabled":c,"data-focus":m(l),"data-disabled":m(c),"data-invalid":m(h),"data-scrubbing":m(p),"aria-invalid":K(h)})},getValueTextProps(){return t.element({...E.valueText.attrs,dir:i("dir"),"data-disabled":m(c),"data-invalid":m(h),"data-focus":m(l),"data-scrubbing":m(p)})},getInputProps(){return t.input({...E.input.attrs,dir:i("dir"),name:i("name"),form:i("form"),id:$(a),role:"spinbutton",defaultValue:s("formattedValue"),pattern:i("formatOptions")?void 0:i("pattern"),inputMode:i("inputMode"),"aria-invalid":K(h),"data-invalid":m(h),disabled:c,"data-disabled":m(c),readOnly:u,required:i("required"),autoComplete:"off",autoCorrect:"off",spellCheck:"false",type:"text","aria-roledescription":"numberfield","aria-valuemin":i("min"),"aria-valuemax":i("max"),"aria-valuenow":Number.isNaN(s("valueAsNumber"))?void 0:s("valueAsNumber"),"aria-valuetext":s("valueText"),"data-scrubbing":m(p),onFocus(){r({type:"INPUT.FOCUS"})},onBlur(){r({type:"INPUT.BLUR"})},onInput(o){const b=Z(o.currentTarget,a);r({type:"INPUT.CHANGE",target:o.currentTarget,hint:"set",selection:b})},onBeforeInput(o){try{const{selectionStart:b,selectionEnd:D,value:y}=o.currentTarget,V=y.slice(0,b)+(o.data??"")+y.slice(D);s("parser").isValidPartialNumber(V)||o.preventDefault()}catch{}},onKeyDown(o){if(o.defaultPrevented||u||Le(o))return;const b=Ue(o)*i("step"),y={ArrowUp(){r({type:"INPUT.ARROW_UP",step:b}),o.preventDefault()},ArrowDown(){r({type:"INPUT.ARROW_DOWN",step:b}),o.preventDefault()},Home(){J(o)||(r({type:"INPUT.HOME"}),o.preventDefault())},End(){J(o)||(r({type:"INPUT.END"}),o.preventDefault())},Enter(V){const O=Z(V.currentTarget,a);r({type:"INPUT.ENTER",selection:O})}}[o.key];y?.(o)}})},getDecrementTriggerProps(){return t.button({...E.decrementTrigger.attrs,dir:i("dir"),id:be(a),disabled:N,"data-disabled":m(N),"aria-label":x.decrementLabel,type:"button",tabIndex:-1,"aria-controls":$(a),"data-scrubbing":m(p),onPointerDown(o){N||G(o)&&(r({type:"TRIGGER.PRESS_DOWN",hint:"decrement",pointerType:o.pointerType}),o.pointerType==="mouse"&&o.preventDefault(),o.pointerType==="touch"&&o.currentTarget?.focus({preventScroll:!0}))},onPointerUp(o){r({type:"TRIGGER.PRESS_UP",hint:"decrement",pointerType:o.pointerType})},onPointerLeave(){N||r({type:"TRIGGER.PRESS_UP",hint:"decrement"})}})},getIncrementTriggerProps(){return t.button({...E.incrementTrigger.attrs,dir:i("dir"),id:ge(a),disabled:v,"data-disabled":m(v),"aria-label":x.incrementLabel,type:"button",tabIndex:-1,"aria-controls":$(a),"data-scrubbing":m(p),onPointerDown(o){v||!G(o)||(r({type:"TRIGGER.PRESS_DOWN",hint:"increment",pointerType:o.pointerType}),o.pointerType==="mouse"&&o.preventDefault(),o.pointerType==="touch"&&o.currentTarget?.focus({preventScroll:!0}))},onPointerUp(o){r({type:"TRIGGER.PRESS_UP",hint:"increment",pointerType:o.pointerType})},onPointerLeave(o){r({type:"TRIGGER.PRESS_UP",hint:"increment",pointerType:o.pointerType})}})},getScrubberProps(){return t.element({...E.scrubber.attrs,dir:i("dir"),"data-disabled":m(c),id:at(a),role:"presentation","data-scrubbing":m(p),onMouseDown(o){if(c||!G(o))return;const b=Me(o),y=Fe(o.currentTarget).devicePixelRatio;b.x=b.x-A(7.5,y),b.y=b.y-A(7.5,y),r({type:"SCRUBBER.PRESS_DOWN",point:b}),o.preventDefault(),_(()=>{Q(R(a))})},style:{cursor:c?void 0:"ew-resize"}})}}}var gt=(e,t={})=>new Intl.NumberFormat(e,t),bt=(e,t={})=>new fe(e,t),q=(e,t)=>{const{prop:n,computed:r}=t;return n("formatOptions")?e===""?Number.NaN:r("parser").parse(e):parseFloat(e)},T=(e,t)=>{const{prop:n,computed:r}=t;return Number.isNaN(e)?"":n("formatOptions")?r("formatter").format(e):e.toString()},ht=(e,t)=>{let n=e!==void 0&&!Number.isNaN(e)?e:1;return t?.style==="percent"&&(e===void 0||Number.isNaN(e))&&(n=.01),n},{choose:vt,guards:yt,createMachine:Nt}=_e(),{not:ae,and:se}=yt,Et=Nt({props({props:e}){const t=ht(e.step,e.formatOptions);return{dir:"ltr",locale:"en-US",focusInputOnChange:!0,clampValueOnBlur:!e.allowOverflow,allowOverflow:!1,inputMode:"decimal",pattern:"-?[0-9]*(.[0-9]+)?",defaultValue:"",step:t,min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,spinOnPress:!0,...e,translations:{incrementLabel:"increment value",decrementLabel:"decrease value",...e.translations}}},initialState(){return"idle"},context({prop:e,bindable:t,getComputed:n}){return{value:t(()=>({defaultValue:e("defaultValue"),value:e("value"),onChange(r){const i=n(),a=q(r,{computed:i,prop:e});e("onValueChange")?.({value:r,valueAsNumber:a})}})),hint:t(()=>({defaultValue:null})),scrubberCursorPoint:t(()=>({defaultValue:null,hash(r){return r?`x:${r.x}, y:${r.y}`:""}})),fieldsetDisabled:t(()=>({defaultValue:!1}))}},computed:{isRtl:({prop:e})=>e("dir")==="rtl",valueAsNumber:({context:e,computed:t,prop:n})=>q(e.get("value"),{computed:t,prop:n}),formattedValue:({computed:e,prop:t})=>T(e("valueAsNumber"),{computed:e,prop:t}),isAtMin:({computed:e,prop:t})=>Ae(e("valueAsNumber"),t("min")),isAtMax:({computed:e,prop:t})=>$e(e("valueAsNumber"),t("max")),isOutOfRange:({computed:e,prop:t})=>!Oe(e("valueAsNumber"),t("min"),t("max")),isValueEmpty:({context:e})=>e.get("value")==="",isDisabled:({prop:e,context:t})=>!!e("disabled")||t.get("fieldsetDisabled"),canIncrement:({prop:e,computed:t})=>e("allowOverflow")||!t("isAtMax"),canDecrement:({prop:e,computed:t})=>e("allowOverflow")||!t("isAtMin"),valueText:({prop:e,context:t})=>e("translations").valueText?.(t.get("value")),formatter:z(({prop:e})=>[e("locale"),e("formatOptions")],([e,t])=>gt(e,t)),parser:z(({prop:e})=>[e("locale"),e("formatOptions")],([e,t])=>bt(e,t))},watch({track:e,action:t,context:n,computed:r,prop:i}){e([()=>n.get("value"),()=>i("locale"),()=>JSON.stringify(i("formatOptions"))],()=>{t(["syncInputElement"])}),e([()=>r("isOutOfRange")],()=>{t(["invokeOnInvalid"])}),e([()=>n.hash("scrubberCursorPoint")],()=>{t(["setVirtualCursorPosition"])})},effects:["trackFormControl"],on:{"VALUE.SET":{actions:["setRawValue"]},"VALUE.CLEAR":{actions:["clearValue"]},"VALUE.INCREMENT":{actions:["increment"]},"VALUE.DECREMENT":{actions:["decrement"]}},states:{idle:{on:{"TRIGGER.PRESS_DOWN":[{guard:"isTouchPointer",target:"before:spin",actions:["setHint"]},{target:"before:spin",actions:["focusInput","invokeOnFocus","setHint"]}],"SCRUBBER.PRESS_DOWN":{target:"scrubbing",actions:["focusInput","invokeOnFocus","setHint","setCursorPoint"]},"INPUT.FOCUS":{target:"focused",actions:["focusInput","invokeOnFocus"]}}},focused:{tags:["focus"],effects:["attachWheelListener"],on:{"TRIGGER.PRESS_DOWN":[{guard:"isTouchPointer",target:"before:spin",actions:["setHint"]},{target:"before:spin",actions:["focusInput","setHint"]}],"SCRUBBER.PRESS_DOWN":{target:"scrubbing",actions:["focusInput","setHint","setCursorPoint"]},"INPUT.ARROW_UP":{actions:["increment"]},"INPUT.ARROW_DOWN":{actions:["decrement"]},"INPUT.HOME":{actions:["decrementToMin"]},"INPUT.END":{actions:["incrementToMax"]},"INPUT.CHANGE":{actions:["setValue","setHint"]},"INPUT.BLUR":[{guard:se("clampValueOnBlur",ae("isInRange")),target:"idle",actions:["setClampedValue","clearHint","invokeOnBlur","invokeOnValueCommit"]},{guard:ae("isInRange"),target:"idle",actions:["setFormattedValue","clearHint","invokeOnBlur","invokeOnInvalid","invokeOnValueCommit"]},{target:"idle",actions:["setFormattedValue","clearHint","invokeOnBlur","invokeOnValueCommit"]}],"INPUT.ENTER":{actions:["setFormattedValue","clearHint","invokeOnBlur","invokeOnValueCommit"]}}},"before:spin":{tags:["focus"],effects:["trackButtonDisabled","waitForChangeDelay"],entry:vt([{guard:"isIncrementHint",actions:["increment"]},{guard:"isDecrementHint",actions:["decrement"]}]),on:{CHANGE_DELAY:{target:"spinning",guard:se("isInRange","spinOnPress")},"TRIGGER.PRESS_UP":[{guard:"isTouchPointer",target:"focused",actions:["clearHint"]},{target:"focused",actions:["focusInput","clearHint"]}]}},spinning:{tags:["focus"],effects:["trackButtonDisabled","spinValue"],on:{SPIN:[{guard:"isIncrementHint",actions:["increment"]},{guard:"isDecrementHint",actions:["decrement"]}],"TRIGGER.PRESS_UP":{target:"focused",actions:["focusInput","clearHint"]}}},scrubbing:{tags:["focus"],effects:["activatePointerLock","trackMousemove","setupVirtualCursor","preventTextSelection"],on:{"SCRUBBER.POINTER_UP":{target:"focused",actions:["focusInput","clearCursorPoint"]},"SCRUBBER.POINTER_MOVE":[{guard:"isIncrementHint",actions:["increment","setCursorPoint"]},{guard:"isDecrementHint",actions:["decrement","setCursorPoint"]}]}}},implementations:{guards:{clampValueOnBlur:({prop:e})=>e("clampValueOnBlur"),spinOnPress:({prop:e})=>!!e("spinOnPress"),isInRange:({computed:e})=>!e("isOutOfRange"),isDecrementHint:({context:e,event:t})=>(t.hint??e.get("hint"))==="decrement",isIncrementHint:({context:e,event:t})=>(t.hint??e.get("hint"))==="increment",isTouchPointer:({event:e})=>e.pointerType==="touch"},effects:{waitForChangeDelay({send:e}){const t=setTimeout(()=>{e({type:"CHANGE_DELAY"})},300);return()=>clearTimeout(t)},spinValue({send:e}){const t=setInterval(()=>{e({type:"SPIN"})},50);return()=>clearInterval(t)},trackFormControl({context:e,scope:t}){const n=R(t);return Ve(n,{onFieldsetDisabledChange(r){e.set("fieldsetDisabled",r)},onFormReset(){e.set("value",e.initial("value"))}})},setupVirtualCursor({context:e,scope:t}){const n=e.get("scrubberCursorPoint");return ct(t,n)},preventTextSelection({scope:e}){return mt(e)},trackButtonDisabled({context:e,scope:t,send:n}){const r=e.get("hint"),i=ut(t,r);return De(i,{attributes:["disabled"],callback(){n({type:"TRIGGER.PRESS_UP",src:"attr"})}})},attachWheelListener({scope:e,send:t,prop:n}){const r=R(e);if(!r||!e.isActiveElement(r)||!n("allowMouseWheel"))return;function i(a){a.preventDefault();const s=Math.sign(a.deltaY)*-1;s===1?t({type:"VALUE.INCREMENT"}):s===-1&&t({type:"VALUE.DECREMENT"})}return k(r,"wheel",i,{passive:!1})},activatePointerLock({scope:e}){if(!oe())return we(e.getDoc())},trackMousemove({scope:e,send:t,context:n,computed:r}){const i=e.getDoc();function a(l){const c=n.get("scrubberCursorPoint"),u=r("isRtl"),g=dt(e,{point:c,isRtl:u,event:l});g.hint&&t({type:"SCRUBBER.POINTER_MOVE",hint:g.hint,point:g.point})}function s(){t({type:"SCRUBBER.POINTER_UP"})}return Se(k(i,"mousemove",a,!1),k(i,"mouseup",s,!1))}},actions:{focusInput({scope:e,prop:t}){if(!t("focusInputOnChange"))return;const n=R(e);e.isActiveElement(n)||_(()=>n?.focus({preventScroll:!0}))},increment({context:e,event:t,prop:n,computed:r}){let i=Ce(r("valueAsNumber"),t.step??n("step"));n("allowOverflow")||(i=U(i,n("min"),n("max"))),e.set("value",T(i,{computed:r,prop:n}))},decrement({context:e,event:t,prop:n,computed:r}){let i=xe(r("valueAsNumber"),t.step??n("step"));n("allowOverflow")||(i=U(i,n("min"),n("max"))),e.set("value",T(i,{computed:r,prop:n}))},setClampedValue({context:e,prop:t,computed:n}){const r=U(n("valueAsNumber"),t("min"),t("max"));e.set("value",T(r,{computed:n,prop:t}))},setRawValue({context:e,event:t,prop:n,computed:r}){let i=q(t.value,{computed:r,prop:n});n("allowOverflow")||(i=U(i,n("min"),n("max"))),e.set("value",T(i,{computed:r,prop:n}))},setValue({context:e,event:t}){const n=t.target?.value??t.value;e.set("value",n)},clearValue({context:e}){e.set("value","")},incrementToMax({context:e,prop:t,computed:n}){const r=T(t("max"),{computed:n,prop:t});e.set("value",r)},decrementToMin({context:e,prop:t,computed:n}){const r=T(t("min"),{computed:n,prop:t});e.set("value",r)},setHint({context:e,event:t}){e.set("hint",t.hint)},clearHint({context:e}){e.set("hint",null)},invokeOnFocus({computed:e,prop:t}){t("onFocusChange")?.({focused:!0,value:e("formattedValue"),valueAsNumber:e("valueAsNumber")})},invokeOnBlur({computed:e,prop:t}){t("onFocusChange")?.({focused:!1,value:e("formattedValue"),valueAsNumber:e("valueAsNumber")})},invokeOnInvalid({computed:e,prop:t,event:n}){if(n.type==="INPUT.CHANGE")return;const r=e("valueAsNumber")>t("max")?"rangeOverflow":"rangeUnderflow";t("onValueInvalid")?.({reason:r,value:e("formattedValue"),valueAsNumber:e("valueAsNumber")})},invokeOnValueCommit({computed:e,prop:t}){t("onValueCommit")?.({value:e("formattedValue"),valueAsNumber:e("valueAsNumber")})},syncInputElement({context:e,event:t,computed:n,scope:r}){const i=t.type.endsWith("CHANGE")?e.get("value"):n("formattedValue"),a=R(r),s=t.selection??Z(a,r);_(()=>{ke(a,i),rt(a,s,r)})},setFormattedValue({context:e,computed:t,action:n}){e.set("value",t("formattedValue")),n(["syncInputElement"])},setCursorPoint({context:e,event:t}){e.set("scrubberCursorPoint",t.point)},clearCursorPoint({context:e}){e.set("scrubberCursorPoint",null)},setVirtualCursorPosition({context:e,scope:t}){const n=ve(t),r=e.get("scrubberCursorPoint");!n||!r||(n.style.transform=`translate3d(${r.x}px, ${r.y}px, 0px)`)}}}});Ge()(["allowMouseWheel","allowOverflow","clampValueOnBlur","dir","disabled","focusInputOnChange","form","formatOptions","getRootNode","id","ids","inputMode","invalid","locale","max","min","name","onFocusChange","onValueChange","onValueCommit","onValueInvalid","pattern","required","readOnly","spinOnPress","step","translations","value","defaultValue"]);const It=e=>{const t=w.useId(),{getRootNode:n}=Te(),{dir:r,locale:i}=Re(),a=le(),s={id:t,ids:{label:a?.ids.label,input:a?.ids.control},disabled:a?.disabled,readOnly:a?.readOnly,required:a?.required,invalid:a?.invalid,dir:r,locale:i,getRootNode:n,...e},l=We(Et,s);return ft(l,qe)},Pt=Ie(),ye=w.forwardRef((e,t)=>{const[n,r]=Pt(e,["allowMouseWheel","allowOverflow","clampValueOnBlur","defaultValue","disabled","focusInputOnChange","form","formatOptions","id","ids","inputMode","invalid","locale","max","min","name","onFocusChange","onValueChange","onValueCommit","onValueInvalid","pattern","readOnly","required","spinOnPress","step","translations","value"]),i=It(n),a=F(i.getRootProps(),r);return f.jsx(Xe,{value:i,children:f.jsx(M.div,{...a,ref:t})})});ye.displayName="NumberInputRoot";const Tt="_textInputContainer_nw2nx_1",Rt="_input_nw2nx_12",xt="_iconButton_nw2nx_27",Ct="_small_nw2nx_33",S={textInputContainer:Tt,input:Rt,iconButton:xt,small:Ct,default:"_default_nw2nx_36"},St=({id:e,ref:t,name:n,size:r="default",onBlur:i,onChange:a,onValueChange:s,className:l,style:c={},placeholder:u,disabled:g=!1,min:p,max:I,step:h,value:v,defaultValue:N})=>{const x=L(S.textInputContainer,{[S.small]:r==="small",[S.default]:r==="default"},l);return f.jsx(ye,{id:e,min:p,max:I,step:h,disabled:g,value:typeof v<"u"?String(v):void 0,defaultValue:typeof N<"u"?String(N):void 0,onValueChange:o=>s?.(o.valueAsNumber),children:f.jsx(ue,{asChild:!0,children:f.jsxs("div",{className:x,style:c,children:[f.jsx(ce,{asChild:!0,children:f.jsx("button",{type:"button",className:L(S.iconButton),"aria-label":"Decrease value",children:f.jsx(Y,{icon:"remove",size:"tiny"})})}),f.jsx(de,{ref:t,name:n,className:L(S.input),placeholder:u,onBlur:i,onChange:a}),f.jsx(me,{asChild:!0,children:f.jsx("button",{type:"button",className:L(S.iconButton),"aria-label":"Increase value",children:f.jsx(Y,{icon:"add",size:"tiny"})})})]})})})};St.__docgenInfo={description:"",methods:[],displayName:"DsNumberInput",props:{id:{required:!1,tsType:{name:"string"},description:"Unique identifier for the input field"},ref:{required:!1,tsType:{name:"ReactRef",raw:"React.Ref<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},description:"The ref to the input field"},name:{required:!1,tsType:{name:"string"},description:"The name of the input field"},size:{required:!1,tsType:{name:"union",raw:"'small' | 'default'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'default'"}]},description:`The size of the input field
@default default`,defaultValue:{value:"'default'",computed:!1}},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.FocusEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactFocusEvent",raw:"React.FocusEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"event"}],return:{name:"void"}}},description:`Event handler called when the input field loses focus

@param event`},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"event"}],return:{name:"void"}}},description:`Callback when the value changes (native input onChange event)
This is provided for compatibility but onValueChange is preferred`},onValueChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: number) => void",signature:{arguments:[{type:{name:"number"},name:"value"}],return:{name:"void"}}},description:`Value change event handler (provides just the number value)
This is the preferred way to handle value changes`},className:{required:!1,tsType:{name:"string"},description:"Additional CSS class names"},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:"Additional styles to apply to the component",defaultValue:{value:"{}",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"The placeholder text"},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the number input is disabled",defaultValue:{value:"false",computed:!1}},min:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:"The minimum value of the number input"},max:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:`The maximum value of the number input
@default Number.MAX_SAFE_INTEGER`},step:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:`The amount to increment or decrement the value by
@default 1`},value:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:"The controlled value of the input"},defaultValue:{required:!1,tsType:{name:"union",raw:"number | undefined",elements:[{name:"number"},{name:"undefined"}]},description:`The initial value of the input when rendered.
Use when you don't need to control the value of the input.`}}};export{St as D};
