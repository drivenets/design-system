import{j as l}from"./jsx-runtime-u17CrQMm.js";import{c as C}from"./index-CMjPrJCW.js";import{D as E}from"./ds-icon-BH94ZUSb.js";import{r as f}from"./iframe-foGZe_Iu.js";import{c as j}from"./create-split-props-u5h9OPvL.js";import{c as N,a as g,u as M,b as k}from"./use-locale-context-D3iUicfk.js";import{Q as v,k as H,a8 as D,p as i,s as B,a9 as F,x as A,y as O,R as Y,V as G}from"./index-YmNYY-wR.js";import{u as x}from"./use-field-context-aPJPp5Xn.js";const[K,I]=N({name:"PasswordInputContext",hookName:"usePasswordInputContext",providerName:"<PasswordInputProvider />"}),V=f.forwardRef((e,t)=>{const n=I(),a=v(n.getControlProps(),e);return l.jsx(g.div,{...a,ref:t})});V.displayName="PasswordInputControl";const R=f.forwardRef((e,t)=>{const n=I(),a=v(n.getIndicatorProps(),e);return l.jsx(g.span,{...a,ref:t,children:n.visible?e.children:e.fallback})});R.displayName="PasswordInputIndicator";const q=f.forwardRef((e,t)=>{const n=I(),a=v(n.getInputProps(),e),r=x();return l.jsx(g.input,{"aria-describedby":r?.ariaDescribedby,...a,ref:t})});q.displayName="PasswordInputInput";var U=A("password-input").parts("root","input","label","control","indicator","visibilityTrigger"),c=U.build(),y=e=>e.ids?.input??`p-input-${e.id}-input`,P=e=>e.getById(y(e));function W(e,t){const{scope:n,prop:a,context:r}=e,s=r.get("visible"),o=!!a("disabled"),u=!!a("invalid"),d=!!a("readOnly"),b=!!a("required"),h=!(d||o),w=a("translations");return{visible:s,disabled:o,invalid:u,focus(){P(n)?.focus()},setVisible(p){e.send({type:"VISIBILITY.SET",value:p})},toggleVisible(){e.send({type:"VISIBILITY.SET",value:!s})},getRootProps(){return t.element({...c.root.attrs,dir:a("dir"),"data-disabled":i(o),"data-invalid":i(u),"data-readonly":i(d)})},getLabelProps(){return t.label({...c.label.attrs,htmlFor:y(n),"data-disabled":i(o),"data-invalid":i(u),"data-readonly":i(d),"data-required":i(b)})},getInputProps(){return t.input({...c.input.attrs,id:y(n),autoCapitalize:"off",name:a("name"),required:a("required"),autoComplete:a("autoComplete"),spellCheck:!1,readOnly:d,disabled:o,type:s?"text":"password","data-state":s?"visible":"hidden","aria-invalid":F(u),"data-disabled":i(o),"data-invalid":i(u),"data-readonly":i(d),...a("ignorePasswordManagers")?Q:{}})},getVisibilityTriggerProps(){return t.button({...c.visibilityTrigger.attrs,type:"button",tabIndex:-1,"aria-controls":y(n),"aria-expanded":s,"data-readonly":i(d),disabled:o,"data-disabled":i(o),"data-state":s?"visible":"hidden","aria-label":w?.visibilityTrigger?.(s),onPointerDown(p){B(p)&&h&&(p.preventDefault(),e.send({type:"TRIGGER.CLICK"}))}})},getIndicatorProps(){return t.element({...c.indicator.attrs,"aria-hidden":!0,"data-state":s?"visible":"hidden","data-disabled":i(o),"data-invalid":i(u),"data-readonly":i(d)})},getControlProps(){return t.element({...c.control.attrs,"data-disabled":i(o),"data-invalid":i(u),"data-readonly":i(d)})}}}var Q={"data-1p-ignore":"","data-lpignore":"true","data-bwignore":"true","data-form-type":"other","data-protonpass-ignore":"true"},$=H({props({props:e}){return{id:D(),defaultVisible:!1,autoComplete:"current-password",ignorePasswordManagers:!1,...e,translations:{visibilityTrigger(t){return t?"Hide password":"Show password"},...e.translations}}},context({prop:e,bindable:t}){return{visible:t(()=>({value:e("visible"),defaultValue:e("defaultVisible"),onChange(n){e("onVisibilityChange")?.({visible:n})}}))}},initialState(){return"idle"},effects:["trackFormEvents"],states:{idle:{on:{"VISIBILITY.SET":{actions:["setVisibility"]},"TRIGGER.CLICK":{actions:["toggleVisibility","focusInputEl"]}}}},implementations:{actions:{setVisibility({context:e,event:t}){e.set("visible",t.value)},toggleVisibility({context:e}){e.set("visible",t=>!t)},focusInputEl({scope:e}){P(e)?.focus()}},effects:{trackFormEvents({scope:e,send:t}){const a=P(e)?.form;if(!a)return;const r=e.getWin(),s=new r.AbortController;return a.addEventListener("reset",o=>{o.defaultPrevented||t({type:"VISIBILITY.SET",value:!1})},{signal:s.signal}),a.addEventListener("submit",()=>{t({type:"VISIBILITY.SET",value:!1})},{signal:s.signal}),()=>s.abort()}}}});O()(["defaultVisible","dir","id","onVisibilityChange","visible","ids","getRootNode","disabled","invalid","required","readOnly","translations","ignorePasswordManagers","autoComplete","name"]);const z=e=>{const t=f.useId(),{getRootNode:n}=M(),{dir:a}=k(),r=x(),s={id:t,ids:{input:r?.ids.control},disabled:r?.disabled,readOnly:r?.readOnly,required:r?.required,invalid:r?.invalid,dir:a,getRootNode:n,...e},o=Y($,s);return W(o,G)},J=j(),_=f.forwardRef((e,t)=>{const[n,a]=J(e,["autoComplete","defaultVisible","disabled","id","ids","ignorePasswordManagers","invalid","name","onVisibilityChange","readOnly","required","translations","visible"]),r=z(n),s=v(r.getRootProps(),a);return l.jsx(K,{value:r,children:l.jsx(g.div,{...s,ref:t})})});_.displayName="PasswordInputRoot";const L=f.forwardRef((e,t)=>{const n=I(),a=v(n.getVisibilityTriggerProps(),e);return l.jsx(g.button,{...a,ref:t})});L.displayName="PasswordInputVisibilityTrigger";const X="_textInputContainer_1fccn_1",Z="_input_1fccn_12",ee="_small_1fccn_33",te="_trigger_1fccn_42",ae="_indicator_1fccn_43",m={textInputContainer:X,input:Z,small:ee,default:"_default_1fccn_36",trigger:te,indicator:ae},ne=({id:e,ref:t,name:n,size:a="default",onBlur:r,onChange:s,onValueChange:o,className:u,style:d={},value:b,defaultValue:h,placeholder:w,disabled:p=!1})=>{const S=C(m.textInputContainer,{[m.small]:a==="small",[m.default]:a==="default"},u);return l.jsx(_,{disabled:p,children:l.jsx(V,{children:l.jsxs("div",{className:S,style:d,children:[l.jsx(q,{asChild:!0,children:l.jsx("input",{id:e,ref:t,name:n,className:C(m.input),value:b,defaultValue:h,placeholder:w,onBlur:r,onChange:T=>{s?.(T),o?.(T.target.value)}})}),l.jsx(L,{className:m.trigger,"aria-label":"Toggle password visibility",children:l.jsx(R,{className:m.indicator,fallback:l.jsx(E,{icon:"visibility_off",size:"tiny"}),children:l.jsx(E,{icon:"visibility",size:"tiny"})})})]})})})};ne.__docgenInfo={description:"",methods:[],displayName:"DsPasswordInput",props:{id:{required:!1,tsType:{name:"string"},description:"Unique identifier for the input field"},ref:{required:!1,tsType:{name:"ReactRef",raw:"React.Ref<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},description:"The ref to the input field"},name:{required:!1,tsType:{name:"string"},description:"The name of the input field"},size:{required:!1,tsType:{name:"union",raw:"'small' | 'default'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'default'"}]},description:`The size of the input field
@default default`,defaultValue:{value:"'default'",computed:!1}},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.FocusEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactFocusEvent",raw:"React.FocusEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"event"}],return:{name:"void"}}},description:`Event handler called when the input field loses focus

@param event`},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: React.ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"event"}],return:{name:"void"}}},description:`Callback when the value changes (native input onChange event)
This is provided for compatibility but onValueChange is preferred`},onValueChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:`Value change event handler (provides just the string value)
This is the preferred way to handle value changes`},className:{required:!1,tsType:{name:"string"},description:"Additional CSS class names"},style:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:"Additional styles to apply to the component",defaultValue:{value:"{}",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"The placeholder text"},value:{required:!1,tsType:{name:"string"},description:"The current value (for controlled usage)"},defaultValue:{required:!1,tsType:{name:"string"},description:`The initial value of the input when rendered.
Use when you don't need to control the value of the input.`},disabled:{required:!1,tsType:{name:"boolean"},description:"Whether the password input is disabled",defaultValue:{value:"false",computed:!1}}}};export{ne as D};
