const wt=["top","right","bottom","left"],_=Math.min,j=Math.max,Yt=Math.round,_t=Math.floor,$t=t=>({x:t,y:t}),ht={left:"right",right:"left",bottom:"top",top:"bottom"},xt={start:"end",end:"start"};function X(t,e,n){return j(t,_(e,n))}function L(t,e){return typeof t=="function"?t(e):t}function N(t){return t.split("-")[0]}function W(t){return t.split("-")[1]}function G(t){return t==="x"?"y":"x"}function J(t){return t==="y"?"height":"width"}const yt=new Set(["top","bottom"]);function R(t){return yt.has(N(t))?"y":"x"}function Q(t){return G(R(t))}function bt(t,e,n){n===void 0&&(n=!1);const o=W(t),s=Q(t),i=J(s);let r=s==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(r=$(r)),[r,$(r)]}function vt(t){const e=$(t);return[q(t),e,q(e)]}function q(t){return t.replace(/start|end/g,e=>xt[e])}const Z=["left","right"],I=["right","left"],At=["top","bottom"],Ot=["bottom","top"];function St(t,e,n){switch(t){case"top":case"bottom":return n?e?I:Z:e?Z:I;case"left":case"right":return e?At:Ot;default:return[]}}function Pt(t,e,n,o){const s=W(t);let i=St(N(t),n==="start",o);return s&&(i=i.map(r=>r+"-"+s),e&&(i=i.concat(i.map(q)))),i}function $(t){return t.replace(/left|right|bottom|top/g,e=>ht[e])}function Ct(t){return{top:0,right:0,bottom:0,left:0,...t}}function rt(t){return typeof t!="number"?Ct(t):{top:t,right:t,bottom:t,left:t}}function tt(t){const{x:e,y:n,width:o,height:s}=t;return{width:o,height:s,top:n,left:e,right:e+o,bottom:n+s,x:e,y:n}}function et(t,e,n){let{reference:o,floating:s}=t;const i=R(e),r=Q(e),a=J(r),g=N(e),x=i==="y",m=o.x+o.width/2-s.width/2,l=o.y+o.height/2-s.height/2,u=o[a]/2-s[a]/2;let c;switch(g){case"top":c={x:m,y:o.y-s.height};break;case"bottom":c={x:m,y:o.y+o.height};break;case"right":c={x:o.x+o.width,y:l};break;case"left":c={x:o.x-s.width,y:l};break;default:c={x:o.x,y:o.y}}switch(W(e)){case"start":c[r]-=u*(n&&x?-1:1);break;case"end":c[r]+=u*(n&&x?-1:1);break}return c}async function Dt(t,e){var n;e===void 0&&(e={});const{x:o,y:s,platform:i,rects:r,elements:a,strategy:g}=t,{boundary:x="clippingAncestors",rootBoundary:m="viewport",elementContext:l="floating",altBoundary:u=!1,padding:c=0}=L(e,t),f=rt(c),d=a[u?l==="floating"?"reference":"floating":l],y=tt(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(d)))==null||n?d:d.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(a.floating)),boundary:x,rootBoundary:m,strategy:g})),b=l==="floating"?{x:o,y:s,width:r.floating.width,height:r.floating.height}:r.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a.floating)),h=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},v=tt(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:g}):b);return{top:(y.top-v.top+f.top)/h.y,bottom:(v.bottom-y.bottom+f.bottom)/h.y,left:(y.left-v.left+f.left)/h.x,right:(v.right-y.right+f.right)/h.x}}const zt=async(t,e,n)=>{const{placement:o="bottom",strategy:s="absolute",middleware:i=[],platform:r}=n,a=i.filter(Boolean),g=await(r.isRTL==null?void 0:r.isRTL(e));let x=await r.getElementRects({reference:t,floating:e,strategy:s}),{x:m,y:l}=et(x,o,g),u=o,c={},f=0;for(let d=0;d<a.length;d++){var p;const{name:y,fn:b}=a[d],{x:w,y:h,data:v,reset:A}=await b({x:m,y:l,initialPlacement:o,placement:u,strategy:s,middlewareData:c,rects:x,platform:{...r,detectOverflow:(p=r.detectOverflow)!=null?p:Dt},elements:{reference:t,floating:e}});m=w??m,l=h??l,c={...c,[y]:{...c[y],...v}},A&&f<=50&&(f++,typeof A=="object"&&(A.placement&&(u=A.placement),A.rects&&(x=A.rects===!0?await r.getElementRects({reference:t,floating:e,strategy:s}):A.rects),{x:m,y:l}=et(x,u,g)),d=-1)}return{x:m,y:l,placement:u,strategy:s,middlewareData:c}},Xt=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:o,placement:s,rects:i,platform:r,elements:a,middlewareData:g}=e,{element:x,padding:m=0}=L(t,e)||{};if(x==null)return{};const l=rt(m),u={x:n,y:o},c=Q(s),f=J(c),p=await r.getDimensions(x),d=c==="y",y=d?"top":"left",b=d?"bottom":"right",w=d?"clientHeight":"clientWidth",h=i.reference[f]+i.reference[c]-u[c]-i.floating[f],v=u[c]-i.reference[c],A=await(r.getOffsetParent==null?void 0:r.getOffsetParent(x));let P=A?A[w]:0;(!P||!await(r.isElement==null?void 0:r.isElement(A)))&&(P=a.floating[w]||i.floating[f]);const T=h/2-v/2,k=P/2-p[f]/2-1,S=_(l[y],k),H=_(l[b],k),E=S,V=P-p[f]-H,O=P/2-p[f]/2+T,F=X(E,O,V),M=!g.arrow&&W(s)!=null&&O!==F&&i.reference[f]/2-(O<E?S:H)-p[f]/2<0,C=M?O<E?O-E:O-V:0;return{[c]:u[c]+C,data:{[c]:F,centerOffset:O-F-C,...M&&{alignmentOffset:C}},reset:M}}}),qt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,o;const{placement:s,middlewareData:i,rects:r,initialPlacement:a,platform:g,elements:x}=e,{mainAxis:m=!0,crossAxis:l=!0,fallbackPlacements:u,fallbackStrategy:c="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:p=!0,...d}=L(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const y=N(s),b=R(a),w=N(a)===a,h=await(g.isRTL==null?void 0:g.isRTL(x.floating)),v=u||(w||!p?[$(a)]:vt(a)),A=f!=="none";!u&&A&&v.push(...Pt(a,p,f,h));const P=[a,...v],T=await g.detectOverflow(e,d),k=[];let S=((o=i.flip)==null?void 0:o.overflows)||[];if(m&&k.push(T[y]),l){const O=bt(s,r,h);k.push(T[O[0]],T[O[1]])}if(S=[...S,{placement:s,overflows:k}],!k.every(O=>O<=0)){var H,E;const O=(((H=i.flip)==null?void 0:H.index)||0)+1,F=P[O];if(F&&(!(l==="alignment"?b!==R(F):!1)||S.every(D=>R(D.placement)===b?D.overflows[0]>0:!0)))return{data:{index:O,overflows:S},reset:{placement:F}};let M=(E=S.filter(C=>C.overflows[0]<=0).sort((C,D)=>C.overflows[1]-D.overflows[1])[0])==null?void 0:E.placement;if(!M)switch(c){case"bestFit":{var V;const C=(V=S.filter(D=>{if(A){const B=R(D.placement);return B===b||B==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(B=>B>0).reduce((B,pt)=>B+pt,0)]).sort((D,B)=>D[1]-B[1])[0])==null?void 0:V[0];C&&(M=C);break}case"initialPlacement":M=a;break}if(s!==M)return{reset:{placement:M}}}return{}}}};function nt(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ot(t){return wt.some(e=>t[e]>=0)}const Kt=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n,platform:o}=e,{strategy:s="referenceHidden",...i}=L(t,e);switch(s){case"referenceHidden":{const r=await o.detectOverflow(e,{...i,elementContext:"reference"}),a=nt(r,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:ot(a)}}}case"escaped":{const r=await o.detectOverflow(e,{...i,altBoundary:!0}),a=nt(r,n.floating);return{data:{escapedOffsets:a,escaped:ot(a)}}}default:return{}}}}},ct=new Set(["left","top"]);async function kt(t,e){const{placement:n,platform:o,elements:s}=t,i=await(o.isRTL==null?void 0:o.isRTL(s.floating)),r=N(n),a=W(n),g=R(n)==="y",x=ct.has(r)?-1:1,m=i&&g?-1:1,l=L(e,t);let{mainAxis:u,crossAxis:c,alignmentAxis:f}=typeof l=="number"?{mainAxis:l,crossAxis:0,alignmentAxis:null}:{mainAxis:l.mainAxis||0,crossAxis:l.crossAxis||0,alignmentAxis:l.alignmentAxis};return a&&typeof f=="number"&&(c=a==="end"?f*-1:f),g?{x:c*m,y:u*x}:{x:u*x,y:c*m}}const Gt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,o;const{x:s,y:i,placement:r,middlewareData:a}=e,g=await kt(e,t);return r===((n=a.offset)==null?void 0:n.placement)&&(o=a.arrow)!=null&&o.alignmentOffset?{}:{x:s+g.x,y:i+g.y,data:{...g,placement:r}}}}},Jt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:s,platform:i}=e,{mainAxis:r=!0,crossAxis:a=!1,limiter:g={fn:y=>{let{x:b,y:w}=y;return{x:b,y:w}}},...x}=L(t,e),m={x:n,y:o},l=await i.detectOverflow(e,x),u=R(N(s)),c=G(u);let f=m[c],p=m[u];if(r){const y=c==="y"?"top":"left",b=c==="y"?"bottom":"right",w=f+l[y],h=f-l[b];f=X(w,f,h)}if(a){const y=u==="y"?"top":"left",b=u==="y"?"bottom":"right",w=p+l[y],h=p-l[b];p=X(w,p,h)}const d=g.fn({...e,[c]:f,[u]:p});return{...d,data:{x:d.x-n,y:d.y-o,enabled:{[c]:r,[u]:a}}}}}},Qt=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:o,placement:s,rects:i,middlewareData:r}=e,{offset:a=0,mainAxis:g=!0,crossAxis:x=!0}=L(t,e),m={x:n,y:o},l=R(s),u=G(l);let c=m[u],f=m[l];const p=L(a,e),d=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(g){const w=u==="y"?"height":"width",h=i.reference[u]-i.floating[w]+d.mainAxis,v=i.reference[u]+i.reference[w]-d.mainAxis;c<h?c=h:c>v&&(c=v)}if(x){var y,b;const w=u==="y"?"width":"height",h=ct.has(N(s)),v=i.reference[l]-i.floating[w]+(h&&((y=r.offset)==null?void 0:y[l])||0)+(h?0:d.crossAxis),A=i.reference[l]+i.reference[w]+(h?0:((b=r.offset)==null?void 0:b[l])||0)-(h?d.crossAxis:0);f<v?f=v:f>A&&(f=A)}return{[u]:c,[l]:f}}}},Ut=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,o;const{placement:s,rects:i,platform:r,elements:a}=e,{apply:g=()=>{},...x}=L(t,e),m=await r.detectOverflow(e,x),l=N(s),u=W(s),c=R(s)==="y",{width:f,height:p}=i.floating;let d,y;l==="top"||l==="bottom"?(d=l,y=u===(await(r.isRTL==null?void 0:r.isRTL(a.floating))?"start":"end")?"left":"right"):(y=l,d=u==="end"?"top":"bottom");const b=p-m.top-m.bottom,w=f-m.left-m.right,h=_(p-m[d],b),v=_(f-m[y],w),A=!e.middlewareData.shift;let P=h,T=v;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=w),(o=e.middlewareData.shift)!=null&&o.enabled.y&&(P=b),A&&!u){const S=j(m.left,0),H=j(m.right,0),E=j(m.top,0),V=j(m.bottom,0);c?T=f-2*(S!==0||H!==0?S+H:j(m.left,m.right)):P=p-2*(E!==0||V!==0?E+V:j(m.top,m.bottom))}await g({...e,availableWidth:T,availableHeight:P});const k=await r.getDimensions(a.floating);return f!==k.width||p!==k.height?{reset:{rects:!0}}:{}}}};function z(){return typeof window<"u"}function U(t){return at(t)?(t.nodeName||"").toLowerCase():"#document"}function Y(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Et(t){var e;return(e=(at(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function at(t){return z()?t instanceof Node||t instanceof Y(t).Node:!1}function lt(t){return z()?t instanceof Element||t instanceof Y(t).Element:!1}function ft(t){return z()?t instanceof HTMLElement||t instanceof Y(t).HTMLElement:!1}function it(t){return!z()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Y(t).ShadowRoot}const Rt=new Set(["inline","contents"]);function mt(t){const{overflow:e,overflowX:n,overflowY:o,display:s}=dt(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!Rt.has(s)}const Tt=new Set(["table","td","th"]);function Zt(t){return Tt.has(U(t))}const Mt=[":popover-open",":modal"];function Lt(t){return Mt.some(e=>{try{return t.matches(e)}catch{return!1}})}const Nt=["transform","translate","scale","rotate","perspective"],Ht=["transform","translate","scale","rotate","perspective","filter"],Vt=["paint","layout","strict","content"];function Bt(t){const e=Ft(),n=lt(t)?dt(t):t;return Nt.some(o=>n[o]?n[o]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Ht.some(o=>(n.willChange||"").includes(o))||Vt.some(o=>(n.contain||"").includes(o))}function It(t){let e=K(t);for(;ft(e)&&!ut(e);){if(Bt(e))return e;if(Lt(e))return null;e=K(e)}return null}function Ft(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const jt=new Set(["html","body","#document"]);function ut(t){return jt.has(U(t))}function dt(t){return Y(t).getComputedStyle(t)}function te(t){return lt(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function K(t){if(U(t)==="html")return t;const e=t.assignedSlot||t.parentNode||it(t)&&t.host||Et(t);return it(e)?e.host:e}function gt(t){const e=K(t);return ut(e)?t.ownerDocument?t.ownerDocument.body:t.body:ft(e)&&mt(e)?e:gt(e)}function st(t,e,n){var o;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=gt(t),i=s===((o=t.ownerDocument)==null?void 0:o.body),r=Y(s);if(i){const a=Wt(r);return e.concat(r,r.visualViewport||[],mt(s)?s:[],a&&n?st(a):[])}return e.concat(s,st(s,[],n))}function Wt(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}export{Bt as A,It as B,U as C,mt as D,te as E,Xt as a,Ut as b,Et as c,$t as d,Y as e,qt as f,st as g,Kt as h,lt as i,Wt as j,dt as k,Qt as l,_t as m,ft as n,Gt as o,Yt as p,Ft as q,tt as r,Jt as s,zt as t,j as u,_ as v,Lt as w,K as x,ut as y,Zt as z};
