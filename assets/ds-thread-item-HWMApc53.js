import{j as e}from"./jsx-runtime-u17CrQMm.js";import{r as _}from"./iframe-CYjJFujY.js";import{c as I}from"./index-B4YxvotJ.js";import{D}from"./ds-avatar-BSD8ZEYz.js";import{D as o}from"./ds-button-CEMYd-ZE.js";import{D as v}from"./ds-icon-DIkq1sMi.js";import{a}from"./ds-dropdown-menu-BgDAkaX9.js";import{D as w}from"./ds-textarea-BgD0Zm7f.js";import{f as B}from"./format-relative-time-B216dNqo.js";const A="_iconButtonContent_14r4q_1",b="_threadItem_14r4q_8",k="_actions_14r4q_14",E="_alignRight_14r4q_17",z="_content_14r4q_20",R="_message_14r4q_23",S="_avatarWrapper_14r4q_27",M="_header_14r4q_60",W="_authorName_14r4q_67",V="_timestamp_14r4q_74",F="_actionButton_14r4q_98",G="_editContainer_14r4q_107",H="_editTextarea_14r4q_112",J="_editActions_14r4q_116",K="_dropdownContent_14r4q_123",t={iconButtonContent:A,threadItem:b,actions:k,alignRight:E,content:z,message:R,avatarWrapper:S,header:M,authorName:W,timestamp:V,actionButton:F,editContainer:G,editTextarea:H,editActions:J,dropdownContent:K},L=({id:n,author:c,content:s,createdAt:x,isCommentAuthorMessage:C=!1,canModify:y=!1,onEdit:d,onDelete:m,onMarkUnread:l,onResolved:u,className:j})=>{const[r,p]=_.useState(!1),[i,g]=_.useState(s);_.useEffect(()=>{r||g(s)},[s,r]);const h=!i.trim()||i===s,q=()=>{h||(d?.(n,i),p(!1))},N=()=>{g(s),p(!1)},f=y&&(d||m),T=!r&&(f||l||u);return e.jsxs("div",{className:I(t.threadItem,{[t.alignRight]:!C},j),children:[e.jsx("div",{className:t.avatarWrapper,children:e.jsx(D,{name:c.name,src:c.avatarSrc,size:"sm"})}),e.jsxs("div",{className:t.content,children:[e.jsxs("div",{className:t.header,children:[e.jsx("span",{className:t.authorName,children:c.name}),e.jsx("span",{className:t.timestamp,children:B(x)})]}),r?e.jsxs("div",{className:t.editContainer,children:[e.jsx(w,{className:t.editTextarea,value:i,onValueChange:g,rows:3}),e.jsxs("div",{className:t.editActions,children:[e.jsx(o,{design:"v1.2",buttonType:"tertiary",size:"small",onClick:N,children:"Cancel"}),e.jsx(o,{design:"v1.2",size:"small",onClick:q,disabled:h,children:"Save"})]})]}):e.jsx("p",{className:t.message,children:s})]}),T&&e.jsxs("div",{className:t.actions,children:[f&&e.jsxs(a.Root,{children:[e.jsx(a.Trigger,{asChild:!0,children:e.jsx(o,{design:"v1.2",buttonType:"tertiary",size:"small","aria-label":"More actions",className:t.actionButton,contentClassName:t.iconButtonContent,children:e.jsx(v,{icon:"more_vert",size:"tiny"})})}),e.jsxs(a.Content,{className:t.dropdownContent,children:[d&&e.jsx(a.Item,{value:"edit",onClick:()=>p(!0),children:"Edit"}),l&&e.jsx(a.Item,{value:"mark-unread",onClick:()=>l(n),children:"Mark as 'Unread'"}),m&&e.jsx(a.Item,{value:"delete",onClick:()=>m(n),children:"Delete"})]})]}),u&&e.jsx(o,{design:"v1.2",buttonType:"tertiary",size:"small",onClick:()=>u(n),"aria-label":"Mark message as resolved",className:t.actionButton,contentClassName:t.iconButtonContent,children:e.jsx(v,{icon:"check_circle",size:"tiny"})})]})]})};L.__docgenInfo={description:"",methods:[],displayName:"DsThreadItem",props:{id:{required:!0,tsType:{name:"string"},description:""},author:{required:!0,tsType:{name:"CommentAuthor"},description:""},content:{required:!0,tsType:{name:"string"},description:""},createdAt:{required:!0,tsType:{name:"Date"},description:""},isCommentAuthorMessage:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},canModify:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},onEdit:{required:!1,tsType:{name:"signature",type:"function",raw:"(messageId: string, newContent: string) => void",signature:{arguments:[{type:{name:"string"},name:"messageId"},{type:{name:"string"},name:"newContent"}],return:{name:"void"}}},description:""},onDelete:{required:!1,tsType:{name:"signature",type:"function",raw:"(messageId: string) => void",signature:{arguments:[{type:{name:"string"},name:"messageId"}],return:{name:"void"}}},description:""},onMarkUnread:{required:!1,tsType:{name:"signature",type:"function",raw:"(messageId: string) => void",signature:{arguments:[{type:{name:"string"},name:"messageId"}],return:{name:"void"}}},description:""},onResolved:{required:!1,tsType:{name:"signature",type:"function",raw:"(messageId: string) => void",signature:{arguments:[{type:{name:"string"},name:"messageId"}],return:{name:"void"}}},description:""},className:{required:!1,tsType:{name:"string"},description:""}}};export{L as D};
