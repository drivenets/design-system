import{j as i}from"./jsx-runtime-u17CrQMm.js";import{c as C}from"./index-CTg8sGNP.js";import{D as I}from"./ds-tooltip-Db3jtQHd.js";import{r as d}from"./iframe-Bhdmiu3A.js";import{c as N}from"./create-split-props-u5h9OPvL.js";import{c as P,S as p,T as v,a as S,e as E,a7 as R,a8 as T,h as j,u as L,a5 as q,R as w,a6 as D}from"./use-locale-context-BM9BBbCC.js";const[O,h]=P({name:"AvatarContext",hookName:"useAvatarContext",providerName:"<AvatarProvider />"}),k=d.forwardRef((e,t)=>{const a=h(),r=p(a.getFallbackProps(),e);return i.jsx(v.span,{...r,ref:t})});k.displayName="AvatarFallback";const y=d.forwardRef((e,t)=>{const a=h(),r=p(a.getImageProps(),e);return i.jsx(v.img,{...r,ref:t})});y.displayName="AvatarImage";var F=E("avatar").parts("root","image","fallback"),u=F.build(),_=e=>e.ids?.root??`avatar:${e.id}`,x=e=>e.ids?.image??`avatar:${e.id}:image`,M=e=>e.ids?.fallback??`avatar:${e.id}:fallback`,$=e=>e.getById(_(e)),g=e=>e.getById(x(e));function B(e,t){const{state:a,send:r,prop:s,scope:o}=e,n=a.matches("loaded");return{loaded:n,setSrc(c){g(o)?.setAttribute("src",c)},setLoaded(){r({type:"img.loaded",src:"api"})},setError(){r({type:"img.error",src:"api"})},getRootProps(){return t.element({...u.root.attrs,dir:s("dir"),id:_(o)})},getImageProps(){return t.img({...u.image.attrs,hidden:!n,dir:s("dir"),id:x(o),"data-state":n?"visible":"hidden",onLoad(){r({type:"img.loaded",src:"element"})},onError(){r({type:"img.error",src:"element"})}})},getFallbackProps(){return t.element({...u.fallback.attrs,dir:s("dir"),id:M(o),hidden:n,"data-state":n?"hidden":"visible"})}}}var V=S({initialState(){return"loading"},effects:["trackImageRemoval","trackSrcChange"],on:{"src.change":{target:"loading"},"img.unmount":{target:"error"}},states:{loading:{entry:["checkImageStatus"],on:{"img.loaded":{target:"loaded",actions:["invokeOnLoad"]},"img.error":{target:"error",actions:["invokeOnError"]}}},error:{on:{"img.loaded":{target:"loaded",actions:["invokeOnLoad"]}}},loaded:{on:{"img.error":{target:"error",actions:["invokeOnError"]}}}},implementations:{actions:{invokeOnLoad({prop:e}){e("onStatusChange")?.({status:"loaded"})},invokeOnError({prop:e}){e("onStatusChange")?.({status:"error"})},checkImageStatus({send:e,scope:t}){const a=g(t);if(!a?.complete)return;const r=z(a)?"img.loaded":"img.error";e({type:r,src:"ssr"})}},effects:{trackImageRemoval({send:e,scope:t}){const a=$(t);return T(a,{callback(r){Array.from(r[0].removedNodes).find(n=>n.nodeType===Node.ELEMENT_NODE&&n.matches("[data-scope=avatar][data-part=image]"))&&e({type:"img.unmount"})}})},trackSrcChange({send:e,scope:t}){const a=g(t);return R(a,{attributes:["src","srcset"],callback(){e({type:"src.change"})}})}}}});function z(e){return e.complete&&e.naturalWidth!==0&&e.naturalHeight!==0}j()(["dir","id","ids","onStatusChange","getRootNode"]);const H=e=>{const t=d.useId(),{getRootNode:a}=L(),{dir:r}=q(),s={id:t,dir:r,getRootNode:a,...e},o=w(V,s);return B(o,D)},U=N(),b=d.forwardRef((e,t)=>{const[a,r]=U(e,["id","ids","onStatusChange"]),s=H(a),o=p(s.getRootProps(),r);return i.jsx(O,{value:s,children:i.jsx(v.div,{...o,ref:t})})});b.displayName="AvatarRoot";const W="_avatar_n7kp1_1",G="_circle_n7kp1_12",J="_rounded_n7kp1_15",K="_xsm_n7kp1_15",Q="_sm_n7kp1_15",X="_regular_n7kp1_18",Y="_md_n7kp1_18",Z="_lg_n7kp1_18",ee="_xl_n7kp1_18",ae="_fallback_n7kp1_60",l={avatar:W,circle:G,rounded:J,xsm:K,sm:Q,regular:X,md:Y,lg:Z,xl:ee,fallback:ae},te=({src:e,alt:t,name:a,size:r="regular",type:s="circle",className:o,style:n,onStatusChange:c})=>{const f=m=>m.trim().split(" ").map(A=>A[0]).join("");return i.jsx(I,{content:a,children:i.jsxs(b,{onStatusChange:m=>c?.(m.status),className:C(l.avatar,l[r],l[s],o),style:n,children:[i.jsx(k,{className:l.fallback,children:f(a)}),e&&i.jsx(y,{src:e,alt:t||a})]})})};te.__docgenInfo={description:"DsAvatar component for displaying user profile pictures or initials",methods:[],displayName:"DsAvatar",props:{src:{required:!1,tsType:{name:"string"},description:"Image source URL"},alt:{required:!1,tsType:{name:"string"},description:"Alt text for the image"},name:{required:!0,tsType:{name:"string"},description:"Name to display in tooltip and as initials if image fails"},size:{required:!1,tsType:{name:"union",raw:"'xsm' | 'sm' | 'regular' | 'md' | 'lg' | 'xl'",elements:[{name:"literal",value:"'xsm'"},{name:"literal",value:"'sm'"},{name:"literal",value:"'regular'"},{name:"literal",value:"'md'"},{name:"literal",value:"'lg'"},{name:"literal",value:"'xl'"}]},description:`Size of the avatar
@default 'regular'`,defaultValue:{value:"'regular'",computed:!1}},type:{required:!1,tsType:{name:"union",raw:"'circle' | 'rounded'",elements:[{name:"literal",value:"'circle'"},{name:"literal",value:"'rounded'"}]},description:`Shape of the avatar
@default 'circle'`,defaultValue:{value:"'circle'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"Custom class name"},style:{required:!1,tsType:{name:"CSSProperties"},description:"Custom inline styles"},onStatusChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(status: 'error' | 'loaded') => void",signature:{arguments:[{type:{name:"union",raw:"'error' | 'loaded'",elements:[{name:"literal",value:"'error'"},{name:"literal",value:"'loaded'"}]},name:"status"}],return:{name:"void"}}},description:"Callback when the status of the image changes"}}};export{te as D};
