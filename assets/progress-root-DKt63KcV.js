import{j as V}from"./jsx-runtime-u17CrQMm.js";import{r as y}from"./iframe-foGZe_Iu.js";import{c as R}from"./create-split-props-u5h9OPvL.js";import{c as w,u as E,b as S,a as I}from"./use-locale-context-D3iUicfk.js";import{k as N,S as $,T,U as O,x as M,y as A,R as L,V as U,Q as j}from"./index-YmNYY-wR.js";const[z,ie]=w({name:"ProgressContext",hookName:"useProgressContext",providerName:"<ProgressProvider />"});var D=M("progress").parts("root","label","track","range","valueText","view","circle","circleTrack","circleRange"),n=D.build(),H=e=>e.ids?.root??`progress-${e.id}`,F=e=>e.ids?.track??`progress-${e.id}-track`,Q=e=>e.ids?.label??`progress-${e.id}-label`,W=e=>e.ids?.circle??`progress-${e.id}-circle`;function q(e,t){const{context:a,computed:o,prop:r,send:s,scope:i}=e,l=o("percent"),C=o("isIndeterminate")?"":o("formatter").format(l/100),c=r("max"),v=r("min"),d=r("orientation"),b=r("translations"),p=o("isIndeterminate"),u=a.get("value"),P=b?.value({value:u,max:c,percent:l,min:v,formatter:o("formatter")})??"",m=B(u,c),h={role:"progressbar","aria-label":P,"data-max":c,"aria-valuemin":v,"aria-valuemax":c,"aria-valuenow":u??void 0,"data-orientation":d,"data-state":m},f=J(e);return{value:u,valueAsString:P,min:v,max:c,percent:l,percentAsString:C,indeterminate:p,setValue(g){s({type:"VALUE.SET",value:g})},setToMax(){s({type:"VALUE.SET",value:c})},setToMin(){s({type:"VALUE.SET",value:v})},getRootProps(){return t.element({dir:r("dir"),...n.root.attrs,id:H(i),"data-max":c,"data-value":u??void 0,"data-state":m,"data-orientation":d,style:{"--percent":p?void 0:l}})},getLabelProps(){return t.element({dir:r("dir"),id:Q(i),...n.label.attrs,"data-orientation":d})},getValueTextProps(){return t.element({dir:r("dir"),"aria-live":"polite",...n.valueText.attrs})},getTrackProps(){return t.element({dir:r("dir"),id:F(i),...n.track.attrs,...h})},getRangeProps(){return t.element({dir:r("dir"),...n.range.attrs,"data-orientation":d,"data-state":m,style:{[o("isHorizontal")?"width":"height"]:p?void 0:`${l}%`}})},getCircleProps(){return t.element({dir:r("dir"),id:W(i),...n.circle.attrs,...h,...f.root})},getCircleTrackProps(){return t.element({dir:r("dir"),"data-orientation":d,...n.circleTrack.attrs,...f.track})},getCircleRangeProps(){return t.element({dir:r("dir"),...n.circleRange.attrs,...f.range,"data-state":m})},getViewProps(g){return t.element({dir:r("dir"),...n.view.attrs,"data-state":g.state,hidden:g.state!==m})}}}function B(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}var k={style:{"--radius":"calc(var(--size) / 2 - var(--thickness) / 2)",cx:"calc(var(--size) / 2)",cy:"calc(var(--size) / 2)",r:"var(--radius)",fill:"transparent",strokeWidth:"var(--thickness)"}},G={style:{width:"var(--size)",height:"var(--size)"}};function J(e){const{context:t,computed:a}=e;return{root:G,track:k,range:{opacity:t.get("value")===0?0:void 0,style:{...k.style,"--percent":a("percent"),"--circumference":"calc(2 * 3.14159 * var(--radius))","--offset":"calc(var(--circumference) * (100 - var(--percent)) / 100)",strokeDashoffset:"calc(var(--circumference) * ((100 - var(--percent)) / 100))",strokeDasharray:a("isIndeterminate")?void 0:"var(--circumference)",transformOrigin:"center",transform:"rotate(-90deg)"}}}}var K=N({props({props:e}){const t=e.min??0,a=e.max??100;return{orientation:"horizontal",...e,max:a,min:t,defaultValue:e.defaultValue!==void 0?e.defaultValue:Z(t,a),formatOptions:{style:"percent",...e.formatOptions},translations:{value:({value:o,percent:r,formatter:s})=>{if(o===null)return"loading...";if(s){const l=s.resolvedOptions().style==="percent"?r/100:o;return s.format(l)}return o.toString()},...e.translations}}},initialState(){return"idle"},entry:["validateContext"],context({bindable:e,prop:t}){return{value:e(()=>({defaultValue:t("defaultValue"),value:t("value"),onChange(a){t("onValueChange")?.({value:a})}}))}},computed:{isIndeterminate:({context:e})=>e.get("value")===null,percent({context:e,prop:t}){const a=e.get("value");return T(a)?O(a,t("min"),t("max"))*100:-1},formatter:$(({prop:e})=>[e("locale"),e("formatOptions")],([e,t])=>new Intl.NumberFormat(e,t)),isHorizontal:({prop:e})=>e("orientation")==="horizontal"},states:{idle:{on:{"VALUE.SET":{actions:["setValue"]}}}},implementations:{actions:{setValue:({context:e,event:t,prop:a})=>{const o=t.value===null?null:Math.max(0,Math.min(t.value,a("max")));e.set("value",o)},validateContext:({context:e,prop:t})=>{const a=t("max"),o=t("min"),r=e.get("value");if(r!=null){if(!x(a))throw new Error(`[progress] The max value passed \`${a}\` is not a valid number`);if(!X(r,a))throw new Error(`[progress] The value passed \`${r}\` exceeds the max value \`${a}\``);if(!Y(r,o))throw new Error(`[progress] The value passed \`${r}\` exceeds the min value \`${o}\``)}}}}}),x=e=>T(e)&&!isNaN(e),X=(e,t)=>x(e)&&e<=t,Y=(e,t)=>x(e)&&e>=t,Z=(e,t)=>e+(t-e)/2;A()(["dir","getRootNode","id","ids","max","min","orientation","translations","value","onValueChange","defaultValue","formatOptions","locale"]);const _=e=>{const t=y.useId(),{getRootNode:a}=E(),{dir:o,locale:r}=S(),s={id:t,dir:o,locale:r,getRootNode:a,...e},i=L(K,s);return q(i,U)},ee=R(),te=y.forwardRef((e,t)=>{const[a,o]=ee(e,["defaultValue","formatOptions","id","ids","locale","max","min","onValueChange","orientation","translations","value"]),r=_(a),s=j(r.getRootProps(),o);return V.jsx(z,{value:r,children:V.jsx(I.div,{...s,ref:t})})});te.displayName="ProgressRoot";export{te as P,ie as u};
